"use strict";angular.module("info.vietnamcode.nampnq.videogular.plugins.youtube",[]).run(["$rootScope","$window","$location",function(e,t,n){e.youtubeApiReady=!1,t.onYouTubeIframeAPIReady=function(){e.$apply(function(){e.youtubeApiReady=!0})};var a=document.createElement("script");a.src=n.protocol()+"://www.youtube.com/iframe_api";var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(a,r)}]).directive("vgYoutube",["$rootScope","$window","$timeout","$interval","VG_STATES",function(e,t,n,a,r){return{restrict:"A",require:"^videogular",link:function(t,n,a,i){var o,u,c,l,d=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/;function m(e){return e.match(d)[2]}function s(){i.mediaElement[0].__defineGetter__("currentTime",function(){return o.getCurrentTime()}),i.mediaElement[0].__defineSetter__("currentTime",function(e){return o.seekTo(e,!0)}),i.mediaElement[0].__defineGetter__("duration",function(){return o.getDuration()}),i.mediaElement[0].__defineGetter__("paused",function(){return o.getPlayerState()!=YT.PlayerState.PLAYING}),i.mediaElement[0].__defineGetter__("videoWidth",function(){return o.a.width}),i.mediaElement[0].__defineGetter__("videoHeight",function(){return o.a.height}),i.mediaElement[0].__defineGetter__("volume",function(){return o.getVolume()/100}),i.mediaElement[0].__defineSetter__("volume",function(e){return o.setVolume(100*e)}),i.mediaElement[0].play=function(){o.playVideo()},i.mediaElement[0].pause=function(){o.pauseVideo()},f(),angular.element(o.getIframe()).css({width:"100%",height:"100%"});var e=new CustomEvent("canplay");i.mediaElement[0].dispatchEvent(e)}function f(){i.onUpdateTime({target:i.mediaElement[0]})}function _(){u&&clearInterval(u)}function p(e){var t;e.target;switch(e.data){case YT.PlayerState.ENDED:_(),i.onComplete();break;case YT.PlayerState.PLAYING:e=new CustomEvent("playing");i.mediaElement[0].dispatchEvent(e),i.setState(r.PLAY),t=600,u&&_(),u=setInterval(f,t);break;case YT.PlayerState.PAUSED:i.currentState==r.PLAY&&i.setState(r.PAUSE),_();break;case YT.PlayerState.BUFFERING:e=new CustomEvent("waiting");i.mediaElement[0].dispatchEvent(e);break;case YT.PlayerState.CUED:}}function v(t){!function(e){return!!e&&e.match(d)}(t)?o&&o.destroy():function(t){o?o.cueVideoById({videoId:m(t)}):e.$watch("youtubeApiReady",function(e){e&&(o=new YT.Player(i.mediaElement[0],{videoId:m(t),playerVars:l,events:{onReady:s,onStateChange:p}}))})}(t)}c=null!==a.vgYoutube?a.vgYoutube.split(";"):null,l={controls:0,showinfo:0,rel:0,autoplay:0,start:0,wmode:"transparent"},null!==c&&c.forEach(function(e){var t=e.split("=");l.hasOwnProperty(t[0])&&(l[t[0]]=t[1]||0)}),t.$watch(function(){return i.sources},function(e,t){e&&e.length>0&&e[0].src?v(e[0].src.toString()):v(null)}),t.$on("$destroy",function(){_()})}}}]);