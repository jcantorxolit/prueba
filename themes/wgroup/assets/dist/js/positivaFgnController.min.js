"use strict";app.controller("consultantListCtrl",["$scope","$stateParams","$log","DTOptionsBuilder","DTColumnBuilder","DTColumnDefBuilder","$localStorage","$compile","toaster","$state","$rootScope","$timeout","$http","SweetAlert","$aside","$document","ListService",function(t,n,i,o,e,a,l,r,s,c,u,d,p,f,m,w,h){function v(){var n=[{name:"criteria_operators",value:null},{name:"criteria_conditions",value:null},{name:"positiva_fgn_consultant_filter_field",value:null}];h.getDataList(n).then(function(n){t.criteria=n.data.data.criteriaOperatorList,t.conditions=n.data.data.criteriaConditionList,t.audit.fields=n.data.data.filterField},function(n){t.status="Unable to load customer data: "+n.message})}t.audit={fields:[],filters:[]},v(),t.addFilter=function(){null==t.audit.filters&&(t.audit.filters=[]),t.audit.filters.push({id:0,field:null,criteria:t.criteria.length>0?t.criteria[1]:null,condition:t.conditions.length>0?t.conditions[0]:null,value:""})},t.onFilter=function(){t.reloadData()},t.removeFilter=function(n){t.audit.filters.splice(n,1)},t.onCleanFilter=function(){t.audit.filters=[],t.reloadData()};var g="consultandListCtrl-"+window.currentUser.id;t.dtInstancePositivaFgn={},t.dtOptionsPositivaFgn=o.newOptions().withBootstrap().withOption("responsive",!0).withOption("ajax",{data:function(n){return angular.isDefined(t.audit)&&angular.isDefined(t.audit.filters)&&(n.filter={filters:t.audit.filters.filter(function(t){return null!=t&&null!=t.field&&null!=t.criteria}).map(function(t,n,i){return{field:t.field.name,operator:t.criteria.value,value:t.value,condition:t.condition.value}})}),JSON.stringify(n)},url:"api/positiva-fgn-consultant",type:"POST",beforeSend:function(){},complete:function(){}}).withDataProp("data").withOption("stateSave",!0).withOption("stateSaveCallback",function(t,n){l[g]=n}).withOption("stateLoadCallback",function(){return l[g]}).withOption("order",[[0,"desc"]]).withOption("serverSide",!0).withOption("processing",!0).withOption("fnPreDrawCallback",function(){return!0}).withOption("fnDrawCallback",function(){C()}).withOption("language",{}).withPaginationType("full_numbers").withOption("createdRow",function(n,i,o){r(angular.element(n).contents())(t)}),t.dtColumnsPositivaFgn=[e.newColumn(null).withTitle("Acciones").withOption("width",120).notSortable().renderWith(function(t){var n="",i="",o='<a class="btn btn-primary btn-xs editRow lnk" href="#" uib-tooltip="Editar"  data-id="'+t.id+'"'+i+' >   <i class="fa fa-edit"></i></a> ',e='<a class="btn btn-info btn-xs modalRow lnk" href="#"  uib-tooltip="Configurar seccionales" data-id="'+t.id+'"'+i+' >   <i class="ti-map"></i></a> ';return n+=o,n+=e}),e.newColumn("fullName").withTitle("Nombre").withOption("width",200).withOption("defaultContent",""),e.newColumn("documentType").withTitle("Tipo Identificación").withOption("width",200).withOption("defaultContent",""),e.newColumn("documentNumber").withTitle("# Identificación").withOption("width",200).withOption("defaultContent",""),e.newColumn("job").withTitle("Cargo").withOption("width",200).withOption("defaultContent",""),e.newColumn("regional").withTitle("Regional").withOption("width",200).withOption("defaultContent",""),e.newColumn("sectional").withTitle("Seccional").withOption("width",200).withOption("defaultContent",""),e.newColumn("strategy").withTitle("Estrategia").withOption("width",200).withOption("defaultContent",""),e.newColumn("type").withTitle("Tipo").withOption("width",200).withOption("defaultContent",""),e.newColumn(null).withTitle("Estado").withOption("width",200).renderWith(function(t){var n="label label-danger",i="Inactivo";return null==t.isActive&&void 0==t.isActive||"Activo"==t.isActive&&(n="label label-success",i="Activo"),'<span class="'+n+'">'+i+"</span>"})];var C=function(){$("#dtPositivaFgn a.editRow").on("click",function(){var t=$(this).data("id");c.go("app.positiva-fgn.consultants-edit",{consultantId:t})}),$("#dtPositivaFgn a.modalRow").on("click",function(){var t=$(this).data("id");O(t)})};t.reloadData=function(){t.dtInstancePositivaFgn.reloadData()},t.onCreate=function(){c.go("app.positiva-fgn.consultants-edit",{consultantId:""})};var O=function(n){t.consultantId=n;var i=m.open({templateUrl:u.app.views.urlRoot+"modules/positiva-fgn/consultant/consultant_sectional.htm",placement:"right",backdrop:"static",size:"lg",controller:"ModalInstanceSideConsultantSectionalCtrl",scope:t});i.result.then(function(){t.reloadData()})};t.onUpload=function(){var n=m.open({templateUrl:u.app.views.urlRoot+"modules/common/modals/import_modal.htm",placement:"bottom",size:"lg",backdrop:!0,controller:"ModalPositivaFgnConsultantImportCtrl",scope:t});n.result.then(function(n){t.reloadData()})}}]),app.controller("ModalInstanceSideConsultantSectionalCtrl",["$rootScope","$stateParams","$scope","$uibModalInstance","DTOptionsBuilder","DTColumnBuilder","DTColumnDefBuilder","$log","$timeout","SweetAlert","$http","$compile","ListService",function(t,n,i,o,e,a,l,r,s,c,u,d,p){function f(){var t=[{name:"positiva_fgn_consultant_sectional",criteria:{regionalId:i.entity.regional?i.entity.regional.value:null}}];p.getDataList(t).then(function(t){i.regionalList=t.data.data.regionalList,i.sectionalList=t.data.data.sectionalList},function(t){i.status="Unable to load customer data: "+t.message})}i.typeList=t.parameters("positiva_fgn_consultant_sectional_type"),i.regionalList=[],i.sectionalList=[];var m=function(){i.entity={id:0,consultantId:i.consultantId,regional:null,sectional:null,type:null,isActive:!1}};m(),f(),i.filterSectional=function(){i.entity.sectional=null,f()},i.form={submit:function(t){var n=null;if(i.Form=t,t.$invalid){var o=null,n=null;for(o in t)"$"!=o[0]&&(null!==n||t[o].$valid||(n=t[o].$name),t[o].$pristine&&(t[o].$dirty=!0));return angular.element(".ng-invalid[name="+n+"]").focus(),void c.swal("El formulario contiene errores!","Por favor corrige los errores del formulario e intentalo de nuevo.","error")}w()},reset:function(){i.Form.$setPristine(!0),m()}};var w=function(){var t={},n=JSON.stringify(i.entity);return t.data=Base64.encode(n),u({method:"POST",url:"api/positiva-fgn-consultant-sectional/save",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(t)}).then(function(t){i.form.reset(),i.reloadData(),c.swal("Proceso Exitoso","Se ha almacenado correctamente la información.","success")})["catch"](function(t){r.error(t),c.swal("Error de guardado",t.data.message,"error")})};i.onLoadRecord=function(){if(i.entity.id>0){var t={id:i.entity.id};u({method:"GET",url:"api/positiva-fgn-consultant-sectional/get",params:t})["catch"](function(t,n){c.swal("Error","Se ha presentado un error al intentar acceder a la información.","error")}).then(function(t){s(function(){i.entity=t.data.result,f()})})}},i.dtInstancePositivaFgnSectional={},i.dtOptionsPositivaFgnSectional=e.newOptions().withBootstrap().withOption("responsive",!0).withOption("ajax",{data:function(t){return t.consultantId=i.consultantId,JSON.stringify(t)},url:"api/positiva-fgn-consultant-sectional",type:"POST",beforeSend:function(){},complete:function(){}}).withDataProp("data").withOption("order",[[0,"desc"]]).withOption("serverSide",!0).withOption("processing",!0).withOption("fnPreDrawCallback",function(){return!0}).withOption("fnDrawCallback",function(){h()}).withOption("language",{}).withPaginationType("full_numbers").withOption("createdRow",function(t,n,o){d(angular.element(t).contents())(i)}),i.dtColumnsPositivaFgnSectional=[a.newColumn(null).withTitle("Acciones").withOption("width",120).notSortable().renderWith(function(t){var n="",i='<a class="btn btn-primary btn-xs editRow lnk" href="#" uib-tooltip="Editar"  data-id="'+t.id+'"  >   <i class="fa fa-edit"></i></a> ';return n+=i}),a.newColumn("regional").withTitle("Regional").withOption("width",200).withOption("defaultContent",""),a.newColumn("sectional").withTitle("Seccional").withOption("width",200).withOption("defaultContent",""),a.newColumn("type").withTitle("Tipo").withOption("width",200).withOption("defaultContent",""),a.newColumn(null).withTitle("Estado").withOption("width",200).renderWith(function(t){var n="label label-danger",i="Inactivo";return null==t.isActive&&void 0==t.isActive||"Activo"==t.isActive&&(n="label label-success",i="Activo"),'<span class="'+n+'">'+i+"</span>"})];var h=function(){$("#dtPositivaFgnSectional a.editRow").on("click",function(){var t=$(this).data("id");i.entity.id=t,i.onLoadRecord()})};i.reloadData=function(){i.dtInstancePositivaFgnSectional.reloadData()},i.onCloseModal=function(){o.close(1)},i.onUpload=function(){var n=$aside.open({templateUrl:t.app.views.urlRoot+"modules/positiva-fgn/consultant/consultant_import_modal.htm",placement:"bottom",size:"lg",backdrop:!0,controller:"consultantImportModalCtrl",scope:i});n.result.then(function(t){t&&t.sessionId&&null!=i.$parent&&i.$parent.navToSection("staging","staging",t.sessionId)},function(){})}}]),app.controller("ModalPositivaFgnConsultantImportCtrl",["$rootScope","$stateParams","$scope","FileUploader","$uibModalInstance","$log","$timeout","SweetAlert","$http","toaster","ngNotify","ListService",function(t,n,i,o,e,a,l,r,s,c,u,d){function p(){var t=[{name:"export_url",value:null}];d.getDataList(t).then(function(t){f=t.data.data.exportUrl.item,w.url=f+"api/v1/positiva-fgn/consultant-import",i.uploader.url=f+"api/v1/positiva-fgn/consultant-import"},function(t){i.status="Unable to load customer data: "+t.message})}var f="",m=null;i.showTemplate=!0;var w=i.uploader=new o({url:f+"api/v1/positiva-fgn/consultant-import",formData:[]});p(),i.download=function(){jQuery("#downloadDocument")[0].src="api/positiva-fgn-consultant/download-template"},w.filters.push({name:"customFilter",fn:function(t,n){return this.queue.length<10}}),w.onWhenAddingFileFailed=function(t,n,i){console.info("onWhenAddingFileFailed",t,n,i)},w.onAfterAddingFile=function(t){console.info("onAfterAddingFile",t)},w.onAfterAddingAll=function(t){console.info("onAfterAddingAll",t)},w.onBeforeUploadItem=function(t){console.info("onBeforeUploadItem",t);var i={id:n.customerId};t.formData.push(i)},w.onProgressItem=function(t,n){console.info("onProgressItem",t,n)},w.onProgressAll=function(t){console.info("onProgressAll",t)},w.onSuccessItem=function(t,n,i,o){console.info("onSuccessItem",t,n,i,o)},w.onErrorItem=function(t,n,i,o){console.info("onErrorItem",t,n,i,o)},w.onCancelItem=function(t,n,i,o){console.info("onCancelItem",t,n,i,o)},w.onCompleteItem=function(t,n,i,o){console.info("onCompleteItem",t,n,i,o),m=n},w.onCompleteAll=function(){console.info("onCompleteAll"),e.close(m)}}]);
"use strict";app.controller("consultantEditCtrl",["$scope","$stateParams","$log","DTOptionsBuilder","DTColumnBuilder","DTColumnDefBuilder","$compile","toaster","$state","$rootScope","$timeout","$http","SweetAlert","$aside","$document","$filter",function(e,t,n,a,i,r,o,l,s,c,u,d,f,m,p,y){function g(){var t=y("filter")(e.entity.details.strategy,function(e){return e.type&&"STT001"==e.type.value});return t}e.entity={},e.typeList=c.parameters("positiva_fgn_consultant_type"),e.documentTypeList=c.parameters("employee_document_type"),e.genderList=c.parameters("gender"),e.gradeList=c.parameters("positiva_fgn_consultant_grade"),e.accountingAccountList=c.parameters("accounting_account"),e.workingDayList=c.parameters("positiva_fgn_consultant_workday"),e.epsList=c.parameters("eps"),e.afpList=c.parameters("afp"),e.ccfList=c.parameters("ccf"),e.accountTypeList=c.parameters("account_type"),e.contactInformationList=c.parameters("extrainfo"),e.strategyList=c.parameters("positiva_fgn_consultant_strategy"),e.strategyTypeList=c.parameters("positiva_fgn_strategy_type"),e.maxDate=new Date,e.datePickerConfig={culture:"es-CO",format:"dd/MM/yyyy"};var v=function(){e.entity={id:t.consultantId||0,type:null,isActive:null,documentType:null,documentNumber:null,fullName:null,gender:null,birthDate:null,job:null,grade:null,accountingAccount:null,admissionDate:null,withdrawalDate:null,profession:null,workingDay:null,mainContact:null,telephone:null,eps:null,afp:null,ccf:null,accountType:null,bank:null,accountNumber:null,details:{license:[],contact:[],strategy:[]}}};v(),e.form={submit:function(t){var n=null;if(e.Form=t,t.$invalid){var a=null,n=null;for(a in t)"$"!=a[0]&&(null!==n||t[a].$valid||(n=t[a].$name),t[a].$pristine&&(t[a].$dirty=!0));return angular.element(".ng-invalid[name="+n+"]").focus(),void f.swal("El formulario contiene errores!","Por favor corrige los errores del formulario e intentalo de nuevo.","error")}var i=g();return 1!=i.length?void f.swal("El formulario contiene errores!","Por favor indique una estrategia base.","error"):void w()},reset:function(){e.Form.$setPristine(!0),v()}};var w=function(){var t={},a=JSON.stringify(e.entity);return t.data=Base64.encode(a),d({method:"POST",url:"api/positiva-fgn-consultant/save",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(t)}).then(function(t){e.entity.id=t.data.result.id,e.entity.details=t.data.result.details,f.swal("Proceso Exitoso","Se ha almacenado correctamente la información.","success")})["catch"](function(e){n.error(e),f.swal("Error de guardado",e.data.message,"error")})};e.onLoadRecord=function(){if(e.entity.id>0){var t={id:e.entity.id};d({method:"GET",url:"api/positiva-fgn-consultant/get",params:t})["catch"](function(e,t){f.swal("Error","Se ha presentado un error al intentar acceder a la información.","error")}).then(function(t){u(function(){e.entity=t.data.result})})}},e.onLoadRecord(),e.onAddInfoDetailLicense=function(){u(function(){e.entity.details.license.push({id:0,license:null,expeditionDate:null,issuingEntity:null})})},e.onRemoveInfoDetailLicense=function(t,a){return 0==a?void e.entity.details.license.splice(t,1):void f.swal({title:"Está seguro?",text:"Eliminará el registro seleccionado",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Si, eliminar!",cancelButtonText:"No, cancelar!",closeOnConfirm:!0,closeOnCancel:!0},function(a){a&&u(function(){var a=e.entity.details.license[t];e.entity.details.license.splice(t,1);var i={};i.id=a.id,i.detail="license",d({method:"POST",url:"api/positiva-fgn-consultant-detail/delete",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(i)}).then(function(e){swal("Eliminado","Registro eliminado satisfactoriamente","info")})["catch"](function(e){n.error(e),f.swal("Error en la eliminación","Se ha presentado un error durante la eliminación del registro. Por favor inténtelo de nuevo, si el error persiste, comuníquese con el administrador del sistema","error")})})})},e.onAddInfoDetailContact=function(){u(function(){e.entity.details.contact.push({id:0,value:"",type:null})})},e.onRemoveInfoDetailContact=function(t,a){return 0==a?void e.entity.details.contact.splice(t,1):void f.swal({title:"Está seguro?",text:"Eliminará el registro seleccionado",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Si, eliminar!",cancelButtonText:"No, cancelar!",closeOnConfirm:!0,closeOnCancel:!0},function(a){a&&u(function(){var a=e.entity.details.contact[t];e.entity.details.contact.splice(t,1);var i={};i.id=a.id,i.detail="contact",d({method:"POST",url:"api/positiva-fgn-consultant-detail/delete",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(i)}).then(function(e){swal("Eliminado","Registro eliminado satisfactoriamente","info")})["catch"](function(e){n.error(e),f.swal("Error en la eliminación","Se ha presentado un error durante la eliminación del registro. Por favor inténtelo de nuevo, si el error persiste, comuníquese con el administrador del sistema","error")})})})},e.onAddInfoDetailStrategy=function(){u(function(){var t=y("filter")(e.entity.details.strategy),n="STT001";t.length&&(n="STT002");var a=y("filter")(e.strategyTypeList,{value:n});a=a[0]||null,e.entity.details.strategy.push({id:0,strategy:"",type:a,isActive:!0})})},e.onRemoveInfoDetailStrategy=function(t,a){return 0==a?void e.entity.details.strategy.splice(t,1):void f.swal({title:"Está seguro?",text:"Eliminará el registro seleccionado",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Si, eliminar!",cancelButtonText:"No, cancelar!",closeOnConfirm:!0,closeOnCancel:!0},function(a){a&&u(function(){var a=e.entity.details.strategy[t];e.entity.details.strategy.splice(t,1);var i={};i.id=a.id,i.detail="strategy",d({method:"POST",url:"api/positiva-fgn-consultant-detail/delete",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(i)}).then(function(e){swal("Eliminado","Registro eliminado satisfactoriamente","info")})["catch"](function(e){n.error(e),f.swal("Error en la eliminación","Se ha presentado un error durante la eliminación del registro. Por favor inténtelo de nuevo, si el error persiste, comuníquese con el administrador del sistema","error")})})})},e.onBack=function(){s.go("app.positiva-fgn.consultants-list")},e.valideSingle=function(t){var n=y("filter")(e.entity.details.strategy,{strategy:t});return!!n.length},e.valideSingleStrategyType=function(e){if("STT001"!=e.value)return!1;var t=g();return!!t.length}}]);
"use strict";app.controller("campusListCtrl",["$scope","$stateParams","$log","DTOptionsBuilder","DTColumnBuilder","DTColumnDefBuilder","$localStorage","$compile","toaster","$state","$rootScope","$timeout","$http","SweetAlert","$aside","$document","ListService",function(t,i,n,e,a,o,r,l,u,c,d,s,p,f,w,h,m){function v(){var i=[{name:"criteria_operators",value:null},{name:"criteria_conditions",value:null},{name:"positiva_fgn_campus_filter_field",value:null}];m.getDataList(i).then(function(i){t.criteria=i.data.data.criteriaOperatorList,t.conditions=i.data.data.criteriaConditionList,t.audit.fields=i.data.data.filterField},function(i){t.status="Unable to load customer data: "+i.message})}t.audit={fields:[],filters:[]},v(),t.addFilter=function(){null==t.audit.filters&&(t.audit.filters=[]),t.audit.filters.push({id:0,field:null,criteria:t.criteria.length>0?t.criteria[1]:null,condition:t.conditions.length>0?t.conditions[0]:null,value:""})},t.onFilter=function(){t.reloadData()},t.removeFilter=function(i){t.audit.filters.splice(i,1)},t.onCleanFilter=function(){t.audit.filters=[],t.reloadData()};var g="campusListCtrl-"+window.currentUser.id;t.dtInstancePositivaFgn={},t.dtOptionsPositivaFgn=e.newOptions().withBootstrap().withOption("responsive",!0).withOption("ajax",{data:function(i){return angular.isDefined(t.audit)&&angular.isDefined(t.audit.filters)&&(i.filter={filters:t.audit.filters.filter(function(t){return null!=t&&null!=t.field&&null!=t.criteria}).map(function(t,i,n){return{field:t.field.name,operator:t.criteria.value,value:t.value,condition:t.condition.value}})}),JSON.stringify(i)},url:"api/positiva-fgn-campus",type:"POST",beforeSend:function(){},complete:function(){}}).withDataProp("data").withOption("stateSave",!0).withOption("stateSaveCallback",function(t,i){r[g]=i}).withOption("stateLoadCallback",function(){return r[g]}).withOption("order",[[0,"desc"]]).withOption("serverSide",!0).withOption("processing",!0).withOption("fnPreDrawCallback",function(){return!0}).withOption("fnDrawCallback",function(){O()}).withOption("language",{}).withPaginationType("full_numbers").withOption("createdRow",function(i,n,e){l(angular.element(i).contents())(t)}),t.dtColumnsPositivaFgn=[a.newColumn(null).withTitle("Acciones").withOption("width",120).notSortable().renderWith(function(t){var i="",n="",e='<a class="btn btn-primary btn-xs editRow lnk" href="#" uib-tooltip="Editar"  data-id="'+t.id+'"'+n+' >   <i class="fa fa-edit"></i></a> ',a='<a class="btn btn-danger btn-xs dropRow lnk" href="#"  uib-tooltip="Borrar" data-id="'+t.id+'"'+n+' >   <i class="fa fa-trash"></i></a> ';return i+=e,i+=a}),a.newColumn("regional").withTitle("Regional").withOption("width",200).withOption("defaultContent",""),a.newColumn("sectional").withTitle("Seccional").withOption("width",200).withOption("defaultContent",""),a.newColumn("campus").withTitle("Sede").withOption("width",200).withOption("defaultContent",""),a.newColumn("department").withTitle("Departamento").withOption("width",200).withOption("defaultContent",""),a.newColumn("city").withTitle("Ciudad").withOption("width",200).withOption("defaultContent",""),a.newColumn("address").withTitle("Dirección").withOption("width",200).withOption("defaultContent","")];var O=function(){$("#dtPositivaFgn a.editRow").on("click",function(){var t=$(this).data("id");C(t)}),$("#dtPositivaFgn a.dropRow").on("click",function(){var i=$(this).data("id");f.swal({title:"Está seguro?",text:"Eliminará el registro seleccionado.",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Si, eliminar!",cancelButtonText:"No, continuar!",closeOnConfirm:!0,closeOnCancel:!0},function(n){if(n){var e={};e.id=i,p({method:"POST",url:"api/positiva-fgn-campus/delete",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(e)}).then(function(t){f.swal("Proceso Exitoso","Se ha eliminado correctamente el registro.","success")})["catch"](function(t){f.swal("Error en la eliminación","Se ha presentado un error durante la eliminación del registro por favor intentelo de nuevo","error")})["finally"](function(){t.reloadData()})}})})};t.reloadData=function(){t.dtInstancePositivaFgn.reloadData()},t.onCreate=function(){C(0)};var C=function(i){t.campusId=i;var n=w.open({templateUrl:d.app.views.urlRoot+"modules/positiva-fgn/campus/campus_edit.htm",placement:"right",backdrop:"static",size:"lg",controller:"campusEditCtrl",scope:t});n.result.then(function(){t.reloadData()})}}]);
"use strict";app.controller("campusEditCtrl",["$rootScope","$stateParams","$scope","$log","$timeout","SweetAlert","$http","$compile","ListService","$state","$uibModalInstance",function(t,e,a,n,i,r,o,s,l,c,u){function d(){var t=[{name:"positiva_fgn_consultant_sectional",criteria:{regionalId:a.entity.regional?a.entity.regional.value:null}}];l.getDataList(t).then(function(t){a.regionalList=t.data.data.regionalList,a.sectionalList=t.data.data.sectionalList},function(t){a.status="Unable to load customer data: "+t.message})}a.typeList=t.parameters("positiva_fgn_consultant_sectional_type"),a.regionalList=[],a.sectionalList=[],a.departmentList=[],a.cityList=[];var m=function(){a.entity={id:a.campusId||0,regional:null,sectional:null,campus:null,department:null,city:null,address:null,isActive:!1}};m(),d(),a.getDepartments=function(){var t={cid:68};o({method:"GET",url:"api/states",params:t}).then(function(t){a.departmentList=t.data.result})},a.getDepartments(),a.changeDepartment=function(t,e){a.cityList=[],e&&(a.entity.city=null);var n={sid:t.id};o({method:"GET",url:"api/towns",params:n}).then(function(t){a.cityList=t.data.result})},a.filterSectional=function(){a.entity.sectional=null,d()},a.form={submit:function(t){var e=null;if(a.Form=t,t.$invalid){var n=null,e=null;for(n in t)"$"!=n[0]&&(null!==e||t[n].$valid||(e=t[n].$name),t[n].$pristine&&(t[n].$dirty=!0));return angular.element(".ng-invalid[name="+e+"]").focus(),void r.swal("El formulario contiene errores!","Por favor corrige los errores del formulario e intentalo de nuevo.","error")}f()},reset:function(){a.Form.$setPristine(!0),m()}};var f=function(){var t={},e=JSON.stringify(a.entity);return t.data=Base64.encode(e),o({method:"POST",url:"api/positiva-fgn-campus/save",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(t)}).then(function(t){a.entity.id=t.data.result.id,r.swal("Proceso Exitoso","Se ha almacenado correctamente la información.","success")})["catch"](function(t){n.error(t),r.swal("Error de guardado","Error guardando el registro. Por favor verifique los datos ingresados!","error")})};a.onLoadRecord=function(){if(a.entity.id>0){var t={id:a.entity.id};o({method:"GET",url:"api/positiva-fgn-campus/get",params:t})["catch"](function(t,e){r.swal("Error","Se ha presentado un error al intentar acceder a la información.","error")}).then(function(t){i(function(){a.entity=t.data.result,d(),a.changeDepartment(a.entity.department,!1)})})}},a.onLoadRecord(),a.onBack=function(){u.close(1)}}]);
"use strict";app.controller("vendorListCtrl",["$scope","$stateParams","$log","DTOptionsBuilder","DTColumnBuilder","DTColumnDefBuilder","$localStorage","$compile","toaster","$state","$rootScope","$timeout","$http","SweetAlert","$aside","$document","ListService",function(t,i,n,e,a,o,l,r,d,u,c,s,f,p,w,h,v){function m(){var i=[{name:"criteria_operators",value:null},{name:"criteria_conditions",value:null},{name:"positiva_fgn_vendor_filter_field",value:null}];v.getDataList(i).then(function(i){t.criteria=i.data.data.criteriaOperatorList,t.conditions=i.data.data.criteriaConditionList,t.audit.fields=i.data.data.filterField},function(i){t.status="Unable to load customer data: "+i.message})}t.audit={fields:[],filters:[]},m(),t.addFilter=function(){null==t.audit.filters&&(t.audit.filters=[]),t.audit.filters.push({id:0,field:null,criteria:t.criteria.length>0?t.criteria[1]:null,condition:t.conditions.length>0?t.conditions[0]:null,value:""})},t.onFilter=function(){t.reloadData()},t.removeFilter=function(i){t.audit.filters.splice(i,1)},t.onCleanFilter=function(){t.audit.filters=[],t.reloadData()};var g="vendorListCtrl-"+window.currentUser.id;t.dtInstancePositivaFgn={},t.dtOptionsPositivaFgn=e.newOptions().withBootstrap().withOption("responsive",!0).withOption("ajax",{data:function(i){return angular.isDefined(t.audit)&&angular.isDefined(t.audit.filters)&&(i.filter={filters:t.audit.filters.filter(function(t){return null!=t&&null!=t.field&&null!=t.criteria}).map(function(t,i,n){return{field:t.field.name,operator:t.criteria.value,value:t.value,condition:t.condition.value}})}),JSON.stringify(i)},url:"api/positiva-fgn-vendor",type:"POST",beforeSend:function(){},complete:function(){}}).withDataProp("data").withOption("stateSave",!0).withOption("stateSaveCallback",function(t,i){l[g]=i}).withOption("stateLoadCallback",function(){return l[g]}).withOption("order",[[0,"desc"]]).withOption("serverSide",!0).withOption("processing",!0).withOption("fnPreDrawCallback",function(){return!0}).withOption("fnDrawCallback",function(){O()}).withOption("language",{}).withPaginationType("full_numbers").withOption("createdRow",function(i,n,e){r(angular.element(i).contents())(t)}),t.dtColumnsPositivaFgn=[a.newColumn(null).withTitle("Acciones").withOption("width",120).notSortable().renderWith(function(t){var i="",n="",e='<a class="btn btn-primary btn-xs editRow lnk" href="#" uib-tooltip="Editar"  data-id="'+t.id+'"'+n+' >   <i class="fa fa-edit"></i></a> ',a='<a class="btn btn-danger btn-xs delRow lnk" href="#"  uib-tooltip="Eliminar" data-id="'+t.id+'"'+n+' >   <i class="fa fa-trash"></i></a> ';return i+=e,i+=a}),a.newColumn("documentType").withTitle("Tipo Identificación").withOption("width",200).withOption("defaultContent",""),a.newColumn("documentNumber").withTitle("# Identificación / Nit").withOption("width",200).withOption("defaultContent",""),a.newColumn("name").withTitle("Nombre / Razón Social").withOption("width",200).withOption("defaultContent",""),a.newColumn("department").withTitle("Departamento").withOption("width",200).withOption("defaultContent",""),a.newColumn("town").withTitle("Municipio").withOption("width",200).withOption("defaultContent",""),a.newColumn("strategy").withTitle("Estrategia").withOption("width",200).withOption("defaultContent",""),a.newColumn(null).withTitle("Estado").withOption("width",200).renderWith(function(t){var i="label label-danger",n="Inactivo";return null==t.isActive&&void 0==t.isActive||"Activo"==t.isActive&&(i="label label-success",n="Activo"),'<span class="'+i+'">'+n+"</span>"})];var O=function(){$("#dtPositivaFgn a.editRow").on("click",function(){var t=$(this).data("id");u.go("app.positiva-fgn.vendor-edit",{vendorId:t})}),$("#dtPositivaFgn a.delRow").on("click",function(){var i=$(this).data("id");p.swal({title:"Está seguro?",text:"Eliminará el registro seleccionado.",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Si, eliminar!",cancelButtonText:"No, continuar!",closeOnConfirm:!0,closeOnCancel:!0},function(n){if(n){var e={};e.id=i,f({method:"POST",url:"api/positiva-fgn-vendor/delete",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(e)}).then(function(t){p.swal("Proceso Exitoso","Se ha eliminado correctamente el registro.","success")})["catch"](function(t){p.swal("Error en la eliminación","Se ha presentado un error durante la eliminación del registro por favor intentelo de nuevo","error")})["finally"](function(){t.reloadData()})}})})};t.reloadData=function(){t.dtInstancePositivaFgn.reloadData()},t.onCreate=function(){u.go("app.positiva-fgn.vendor-edit",{vendorId:""})}}]);
"use strict";app.controller("tabsActivityCtrl",["$scope","$rootScope","$stateParams","$timeout","$filter",function(t,e,o,a,i){t.loading=!1,t.activeTab=1,t.loadedOther=[1],t.vendorId=o.vendorId,t.getView=function(e){var o=i("filter")(t.views,{name:e});return o[0]},t.switchTab=function(e){a(function(){t.tabname=e,t.loadedOther.push(e)})}}]);
"use strict";app.controller("vendorEditCtrl",["$scope","$stateParams","$log","DTOptionsBuilder","DTColumnBuilder","DTColumnDefBuilder","$compile","toaster","$state","$rootScope","$timeout","$http","SweetAlert","$aside","$document","$filter",function(e,t,n,a,i,o,r,l,s,c,d,u,m,f,p,v){e.entity={},e.documentTypeList=c.parameters("employee_document_type"),e.contactInformationList=c.parameters("extrainfo"),e.strategyList=c.parameters("positiva_fgn_consultant_strategy"),e.townList=[],e.departmentList=[],e.maxDate=new Date,e.datePickerConfig={culture:"es-CO",format:"dd/MM/yyyy"};var y=function(){e.entity={id:t.vendorId||0,isActive:null,documentType:null,documentNumber:null,name:null,legalRepresentative:null,department:null,town:null,telephone:null,email:null,details:{contact:[],strategy:[]}}};y(),e.form={submit:function(t){var n=null;if(e.Form=t,t.$invalid){var a=null,n=null;for(a in t)"$"!=a[0]&&(null!==n||t[a].$valid||(n=t[a].$name),t[a].$pristine&&(t[a].$dirty=!0));return angular.element(".ng-invalid[name="+n+"]").focus(),void m.swal("El formulario contiene errores!","Por favor corrige los errores del formulario e intentalo de nuevo.","error")}g()},reset:function(){e.Form.$setPristine(!0),y()}};var g=function(){var t={},a=JSON.stringify(e.entity);return t.data=Base64.encode(a),u({method:"POST",url:"api/positiva-fgn-vendor/save",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(t)}).then(function(t){m.swal("Proceso Exitoso","Se ha almacenado correctamente la información.","success"),0==e.entity.id&&d(function(){s.go("app.positiva-fgn.vendor-edit",{vendorId:t.data.result.id})},1e3),e.entity.details=t.data.result.details})["catch"](function(e){n.error(e),m.swal("Error de guardado",e.data.message,"error")})};e.getDepartments=function(){var t={cid:68};u({method:"GET",url:"api/states",params:t}).then(function(t){e.departmentList=t.data.result})},e.getDepartments(),e.changeDepartment=function(t,n){e.townList=[],n&&(e.entity.town=null);var a={sid:t.id};u({method:"GET",url:"api/towns",params:a}).then(function(t){e.townList=t.data.result})},e.onLoadRecord=function(){if(e.entity.id>0){var t={id:e.entity.id};u({method:"GET",url:"api/positiva-fgn-vendor/get",params:t})["catch"](function(e,t){m.swal("Error","Se ha presentado un error al intentar acceder a la información.","error")}).then(function(t){d(function(){e.entity=t.data.result,e.changeDepartment(e.entity.department,!1)})})}},e.onLoadRecord(),e.onAddInfoDetailContact=function(){d(function(){e.entity.details.contact.push({id:0,value:"",type:null})})},e.onRemoveInfoDetailContact=function(t,a){return 0==a?void e.entity.details.contact.splice(t,1):void m.swal({title:"Está seguro?",text:"Eliminará el registro seleccionado",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Si, eliminar!",cancelButtonText:"No, cancelar!",closeOnConfirm:!0,closeOnCancel:!0},function(a){a?d(function(){var a=e.entity.details.contact[t];if(e.entity.details.contact.splice(t,1),0!=a.id){var i={};i.id=a.id,i.detail="contact",u({method:"POST",url:"api/positiva-fgn-vendor-detail/delete",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(i)}).then(function(e){swal("Eliminado","Registro eliminado satisfactoriamente","info")})["catch"](function(e){n.error(e),m.swal("Error en la eliminación","Se ha presentado un error durante la eliminación del registro. Por favor inténtelo de nuevo, si el error persiste, comuníquese con el administrador del sistema","error")})["finally"](function(){})}}):swal("Cancelación","La operación ha sido cancelada","error")})},e.onAddInfoDetailStrategy=function(){d(function(){e.entity.details.strategy.push({id:0,strategy:"",isActive:!0})})},e.onRemoveInfoDetailStrategy=function(t,a){return 0==a?void e.entity.details.strategy.splice(t,1):void m.swal({title:"Está seguro?",text:"Eliminará el registro seleccionado",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Si, eliminar!",cancelButtonText:"No, cancelar!",closeOnConfirm:!0,closeOnCancel:!0},function(a){a?d(function(){var a=e.entity.details.strategy[t];if(e.entity.details.strategy.splice(t,1),0!=a.id){var i={};i.id=a.id,i.detail="strategy",u({method:"POST",url:"api/positiva-fgn-vendor-detail/delete",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(i)}).then(function(e){swal("Eliminado","Registro eliminado satisfactoriamente","info")})["catch"](function(e){n.error(e),m.swal("Error en la eliminación","Se ha presentado un error durante la eliminación del registro. Por favor inténtelo de nuevo, si el error persiste, comuníquese con el administrador del sistema","error")})["finally"](function(){})}}):swal("Cancelación","La operación ha sido cancelada","error")})},e.onBack=function(){s.go("app.positiva-fgn.vendor-list")},e.valideSingle=function(t){var n=v("filter")(e.entity.details.strategy,{strategy:t});return!!n.length}}]);
"use strict";app.controller("mainContactEditCtrl",["$scope","$aside","$stateParams","$log","$compile","toaster","$state","SweetAlert","$rootScope","$http","$timeout","$uibModal",function(n,t,o,e,a,r,i,c,l,s,d,u){var f=e,m=[];n.contactTypesList=l.parameters("rolescontact"),n.entity={vendorId:o.vendorId,maincontacts:[]},n.form={submit:function(n){var t=null;if(n.$invalid){var o=null,t=null;for(o in n)"$"!=o[0]&&(null!==t||n[o].$valid||(t=n[o].$name),n[o].$pristine&&(n[o].$dirty=!0));return angular.element(".ng-invalid[name="+t+"]").focus(),void c.swal("El formulario contiene errores!","Por favor corrige los errores del formulario e intentalo de nuevo.","error")}p()},reset:function(n){n.$setPristine(!0)}};var p=function(){var t={},o=JSON.stringify(n.entity);return t.data=Base64.encode(o),s({method:"POST",url:"api/positiva-fgn-vendor-main-contact/save",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(t)}).then(function(t){d(function(){c.swal("Validación exitosa","Guardando información del cliente...","success"),n.entity=t.data.result,m=angular.copy(t.data.result.maincontacts)})})["catch"](function(n){e.error(n),c.swal("Error de guardado","Error guardando el registro. Por favor verifique los datos ingresados!","error")})};n.onLoadRecord=function(){if(n.entity.vendorId>0){var t={vendorId:n.entity.vendorId};s({method:"GET",url:"api/positiva-fgn-vendor-main-contact/get",params:t})["catch"](function(n,t){c.swal("Error","Se ha presentado un error al intentar acceder a la información.","error")}).then(function(t){d(function(){n.entity.maincontacts=t.data.result,m=angular.copy(t.data.result)})})}},n.onLoadRecord(),n.addInfoContact=function(t){n.openModal(t)},n.openModal=function(t){var o=u.open({templateUrl:l.app.views.urlRoot+"modules/positiva-fgn/vendor/tabs/main-contact/info_contact.htm",controller:"ModalContactInstanceCtrl",backdrop:"static",windowTopClass:"top-modal",scope:n,resolve:{mainContact:function(){return t}}});o.result.then(function(n){f.info("despues de cerrar....")},function(){e.info("Modal dismissed at: "+new Date)})},n.addMainContact=function(){n.entity.maincontacts.push({id:0,name:"",firstLastName:"",secondLastName:"",name:"",info:[],contactType:null})},n.removeMainContact=function(t,o){return 0==o.id?void n.entity.maincontacts.splice(t,1):void c.swal({title:"Está seguro?",text:"Eliminará el registro seleccionado",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Si, eliminar!",cancelButtonText:"No, cancelar!",closeOnConfirm:!0,closeOnCancel:!0},function(o){o&&d(function(){var o=n.entity.maincontacts[t],a={};a.id=o.id,s({method:"POST",url:"api/positiva-fgn-vendor-main-contact/delete",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(a)}).then(function(o){r.pop("success","Operación Exitosa","Registro eliminado"),n.entity.maincontacts.splice(t,1)})["catch"](function(n){e.error(n),r.pop("error","Error","Por favor verifique los datos requeridos del formulario y vuelva a intentarlo")})})})},n.onCancel=function(){n.entity.maincontacts=angular.copy(m)}}]),app.controller("ModalContactInstanceCtrl",["$scope","$uibModalInstance","mainContact","$log","$timeout","$rootScope","SweetAlert","$http",function(n,t,o,e,a,r,i,c){n.extrainfo=r.parameters("extrainfo"),n.mainContact=o,0==n.mainContact.info.length&&(o.info=[{id:0,type:null,value:null}]),n.form={submit:function(o){var e=null;if(n.Form=o,o.$invalid){var a=null,e=null;for(a in o)"$"!=a[0]&&(null!==e||o[a].$valid||(e=o[a].$name),o[a].$pristine&&(o[a].$dirty=!0));return angular.element(".ng-invalid[name="+e+"]").focus(),void i.swal("El formulario contiene errores!","Por favor corrige los errores del formulario e intentalo de nuevo.","error")}t.close(1)},reset:function(){n.Form.$setPristine(!0)}},n.addInfo=function(){n.mainContact.info.push({id:0,type:null,value:null})},n.removeContact=function(t,o){return 0==o.id?void n.mainContact.info.splice(t,1):void i.swal({title:"Está seguro?",text:"Eliminará el registro seleccionado",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Si, eliminar!",cancelButtonText:"No, cancelar!",closeOnConfirm:!0,closeOnCancel:!0},function(o){o&&a(function(){var o=n.mainContact.info[t],a={};a.id=o.id,c({method:"POST",url:"api/positiva-fgn-vendor-main-contact/deleteInfo",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(a)}).then(function(o){swal("Operación Exitosa","Registro eliminado","success"),n.mainContact.info.splice(t,1)})["catch"](function(n){e.error(n),swal("Cancelación","Por favor verifique los datos requeridos del formulario y vuelva a intentarlo","error")})})})}}]);
"use strict";app.controller("coverageEditCtrl",["$rootScope","$stateParams","$scope","$log","DTOptionsBuilder","DTColumnBuilder","$timeout","SweetAlert","$http","$compile","ListService","$state",function(t,n,e,i,o,a,r,l,s,d,c,u){function f(){var t=[{name:"positiva_fgn_consultant_sectional",criteria:{regionalId:e.entity.regional?e.entity.regional.value:null}}];c.getDataList(t).then(function(t){e.regionalList=t.data.data.regionalList,e.sectionalList=t.data.data.sectionalList},function(t){e.status="Unable to load customer data: "+t.message})}e.regionalList=[],e.sectionalList=[],e.departmentList=[],e.townList=[];var p=function(){e.entity={id:0,vendorId:n.vendorId,regional:null,sectional:null,department:null,town:null}};p(),f(),e.getDepartments=function(){var t={cid:68};s({method:"GET",url:"api/states",params:t}).then(function(t){e.departmentList=t.data.result})},e.getDepartments(),e.changeDepartment=function(t,n){e.townList=[],n&&(e.entity.town=null);var i={sid:t.id};s({method:"GET",url:"api/towns",params:i}).then(function(t){e.townList=t.data.result})},e.filterSectional=function(){e.entity.sectional=null,f()},e.form={submit:function(t){var n=null;if(e.Form=t,t.$invalid){var i=null,n=null;for(i in t)"$"!=i[0]&&(null!==n||t[i].$valid||(n=t[i].$name),t[i].$pristine&&(t[i].$dirty=!0));return angular.element(".ng-invalid[name="+n+"]").focus(),void l.swal("El formulario contiene errores!","Por favor corrige los errores del formulario e intentalo de nuevo.","error")}w()},reset:function(){e.Form.$setPristine(!0),p()}};var w=function(){var t={},n=JSON.stringify(e.entity);return t.data=Base64.encode(n),s({method:"POST",url:"api/positiva-fgn-vendor-coverage/save",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(t)}).then(function(t){e.form.reset(),e.reloadData(),l.swal("Proceso Exitoso","Se ha almacenado correctamente la información.","success")})["catch"](function(t){i.error(t),l.swal("Error de guardado",t.data.message,"error")})};e.onLoadRecord=function(){if(e.entity.id>0){var t={id:e.entity.id};s({method:"GET",url:"api/positiva-fgn-vendor-coverage/get",params:t})["catch"](function(t,n){l.swal("Error","Se ha presentado un error al intentar acceder a la información.","error")}).then(function(t){r(function(){e.entity=t.data.result,e.changeDepartment(e.entity.department,!1)})})}},e.dtInstancePositivaFgnVendorCoverage={},e.dtOptionsPositivaFgnVendorCoverage=o.newOptions().withBootstrap().withOption("responsive",!0).withOption("ajax",{data:function(t){return t.vendorId=n.vendorId,JSON.stringify(t)},url:"api/positiva-fgn-vendor-coverage",type:"POST",beforeSend:function(){},complete:function(){}}).withDataProp("data").withOption("order",[[0,"desc"]]).withOption("serverSide",!0).withOption("processing",!0).withOption("fnPreDrawCallback",function(){return!0}).withOption("fnDrawCallback",function(){m()}).withOption("language",{}).withPaginationType("full_numbers").withOption("createdRow",function(t,n,i){d(angular.element(t).contents())(e)}),e.dtColumnsPositivaFgnVendorCoverage=[a.newColumn(null).withTitle("Acciones").withOption("width",120).notSortable().renderWith(function(t){var n="",e="",i='<a class="btn btn-primary btn-xs editRow lnk" href="#" uib-tooltip="Editar"  data-id="'+t.id+'"'+e+' >   <i class="fa fa-edit"></i></a> ',o='<a class="btn btn-danger btn-xs dropRow lnk" href="#"  uib-tooltip="Borrar" data-id="'+t.id+'"'+e+' >   <i class="fa fa-trash"></i></a> ';return n+=i,n+=o}),a.newColumn("regional").withTitle("Regional").withOption("width",200).withOption("defaultContent",""),a.newColumn("sectional").withTitle("Seccional").withOption("width",200).withOption("defaultContent",""),a.newColumn("department").withTitle("Departamento").withOption("width",200).withOption("defaultContent",""),a.newColumn("town").withTitle("Municipio").withOption("width",200).withOption("defaultContent","")];var m=function(){$("#dtPositivaFgnVendorCoverage a.editRow").on("click",function(){var t=$(this).data("id");e.entity.id=t,e.onLoadRecord()}),$("#dtPositivaFgnVendorCoverage a.dropRow").on("click",function(){var t=$(this).data("id");l.swal({title:"Está seguro?",text:"Eliminará el registro seleccionado.",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Si, eliminar!",cancelButtonText:"No, continuar!",closeOnConfirm:!0,closeOnCancel:!0},function(n){if(n){var i={};i.id=t,s({method:"POST",url:"api/positiva-fgn-vendor-coverage/delete",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(i)}).then(function(t){l.swal("Proceso Exitoso","Se ha eliminado correctamente el registro.","success")})["catch"](function(t){l.swal("Error en la eliminación","Se ha presentado un error durante la eliminación del registro por favor intentelo de nuevo","error")})["finally"](function(){e.reloadData()})}})})};e.reloadData=function(){e.dtInstancePositivaFgnVendorCoverage.reloadData()},e.onCancel=function(){e.form.reset()}}]);
"use strict";app.controller("contractEditCtrl",["$rootScope","$stateParams","$scope","$log","DTOptionsBuilder","DTColumnBuilder","$timeout","SweetAlert","$http","$compile","$state",function(t,n,e,o,i,a,r,l,c,d,s){e.maxDate=new Date,e.datePickerConfig={culture:"es-CO",format:"dd/MM/yyyy"};var u=function(){e.entity={id:0,vendorId:n.vendorId,contractNumber:null,startDate:null,endDate:null,contractValue:null,isActive:!0}};u(),e.form={submit:function(t){var n=null;if(e.Form=t,t.$invalid){var o=null,n=null;for(o in t)"$"!=o[0]&&(null!==n||t[o].$valid||(n=t[o].$name),t[o].$pristine&&(t[o].$dirty=!0));return angular.element(".ng-invalid[name="+n+"]").focus(),void l.swal("El formulario contiene errores!","Por favor corrige los errores del formulario e intentalo de nuevo.","error")}f()},reset:function(){e.Form.$setPristine(!0),u()}};var f=function(){var t={},n=JSON.stringify(e.entity);return t.data=Base64.encode(n),c({method:"POST",url:"api/positiva-fgn-vendor-contract/save",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(t)}).then(function(t){e.form.reset(),e.reloadData(),l.swal("Proceso Exitoso","Se ha almacenado correctamente la información.","success")})["catch"](function(t){o.error(t),l.swal("Error de guardado",t.data.message,"error")})};e.onLoadRecord=function(){if(e.entity.id>0){var t={id:e.entity.id};c({method:"GET",url:"api/positiva-fgn-vendor-contract/get",params:t})["catch"](function(t,n){l.swal("Error","Se ha presentado un error al intentar acceder a la información.","error")}).then(function(t){r(function(){e.entity=t.data.result})})}},e.dtInstancePositivaFgnVendorContract={},e.dtOptionsPositivaFgnVendorContract=i.newOptions().withBootstrap().withOption("responsive",!0).withOption("ajax",{data:function(t){return t.vendorId=n.vendorId,JSON.stringify(t)},url:"api/positiva-fgn-vendor-contract",type:"POST",beforeSend:function(){},complete:function(){}}).withDataProp("data").withOption("order",[[0,"desc"]]).withOption("serverSide",!0).withOption("processing",!0).withOption("fnPreDrawCallback",function(){return!0}).withOption("fnDrawCallback",function(){w()}).withOption("language",{}).withPaginationType("full_numbers").withOption("createdRow",function(t,n,o){d(angular.element(t).contents())(e)}),e.dtColumnsPositivaFgnVendorContract=[a.newColumn(null).withTitle("Acciones").withOption("width",120).notSortable().renderWith(function(t){var n="",e="",o='<a class="btn btn-primary btn-xs editRow lnk" href="#" uib-tooltip="Editar"  data-id="'+t.id+'"'+e+' >   <i class="fa fa-edit"></i></a> ',i='<a class="btn btn-danger btn-xs dropRow lnk" href="#"  uib-tooltip="Borrar" data-id="'+t.id+'"'+e+' >   <i class="fa fa-trash"></i></a> ';return n+=o,n+=i}),a.newColumn("contractNumber").withTitle("Número de Contrato").withOption("width",200).withOption("defaultContent",""),a.newColumn("startDate").withTitle("Fecha Inicio").withOption("width",200).withOption("defaultContent",""),a.newColumn("endDate").withTitle("Fecha Finalización").withOption("width",200).withOption("defaultContent",""),a.newColumn("contractValue").withTitle("Valor Contrato").withOption("width",200).withOption("defaultContent",""),a.newColumn(null).withTitle("Estado").withOption("width",200).renderWith(function(t){var n="label label-danger",e="Inactivo";return null==t.isActive&&void 0==t.isActive||"Activo"==t.isActive&&(n="label label-success",e="Activo"),'<span class="'+n+'">'+e+"</span>"})];var w=function(){$("#dtPositivaFgnVendorContract a.editRow").on("click",function(){var t=$(this).data("id");e.entity.id=t,e.onLoadRecord()}),$("#dtPositivaFgnVendorContract a.dropRow").on("click",function(){var t=$(this).data("id");l.swal({title:"Está seguro?",text:"Eliminará el registro seleccionado.",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Si, eliminar!",cancelButtonText:"No, continuar!",closeOnConfirm:!0,closeOnCancel:!0},function(n){if(n){var o={};o.id=t,c({method:"POST",url:"api/positiva-fgn-vendor-contract/delete",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(o)}).then(function(t){l.swal("Proceso Exitoso","Se ha eliminado correctamente el registro.","success")})["catch"](function(t){l.swal("Error en la eliminación","Se ha presentado un error durante la eliminación del registro por favor intentelo de nuevo","error")})["finally"](function(){e.reloadData()})}})})};e.reloadData=function(){e.dtInstancePositivaFgnVendorContract.reloadData()},e.onCancel=function(){e.form.reset()}}]);
"use strict";app.controller("tabsCtrl",["$scope","$rootScope","$stateParams","$timeout","$filter",function(t,e,a,i,o){t.loading=!1,t.activeTab=1,t.loadedOther=[1],t.getView=function(e){var a=o("filter")(t.views,{name:e});return a[0]},t.switchTab=function(e){i(function(){t.activeTab=e,t.loadedOther.push(e)})}}]);
"use strict";app.controller("taskListCtrl",["$scope","$stateParams","$log","DTOptionsBuilder","DTColumnBuilder","DTColumnDefBuilder","$localStorage","$compile","toaster","$state","$rootScope","$timeout","$http","SweetAlert","$aside","$document",function(t,o,n,e,i,a,l,r,s,c,u,p,d,f,m,w){var h="taskListCtrl-"+window.currentUser.id;t.dtInstancePositivaFgn={},t.dtOptionsPositivaFgn=e.newOptions().withBootstrap().withOption("responsive",!0).withOption("ajax",{data:function(t){return JSON.stringify(t)},url:"api/positiva-fgn-gestpos",type:"POST",beforeSend:function(){},complete:function(){}}).withDataProp("data").withOption("stateSave",!0).withOption("stateSaveCallback",function(t,o){l[h]=o}).withOption("stateLoadCallback",function(){return l[h]}).withOption("order",[[0,"asc"]]).withOption("serverSide",!0).withOption("processing",!0).withOption("fnPreDrawCallback",function(){return!0}).withOption("fnDrawCallback",function(){g()}).withOption("language",{}).withPaginationType("full_numbers").withOption("createdRow",function(o,n,e){r(angular.element(o).contents())(t)}),t.dtColumnsPositivaFgn=[i.newColumn(null).withTitle("Acciones").withOption("width",120).notSortable().renderWith(function(t){var o="",n="",e='<a class="btn btn-primary btn-xs editRow lnk" href="#" uib-tooltip="Editar"  data-id="'+t.id+'"'+n+' >   <i class="fa fa-edit"></i></a> ',i='<a class="btn btn-danger btn-xs dropRow lnk" href="#"  uib-tooltip="Borrar" data-id="'+t.id+'"'+n+' >   <i class="fa fa-trash"></i></a> ';return o+=e,o+=i}),i.newColumn("number").withTitle("Id").withOption("width",200).withOption("defaultContent",""),i.newColumn("code").withTitle("Código").withOption("width",200).withOption("defaultContent",""),i.newColumn("name").withTitle("Tarea").withOption("width",200).withOption("defaultContent",""),i.newColumn("type").withTitle("Tipo").withOption("width",200).withOption("defaultContent",""),i.newColumn("mainTask").withTitle("Tarea Principal").withOption("width",200).withOption("defaultContent",""),i.newColumn(null).withTitle("Estado").withOption("width",200).renderWith(function(t){var o="label label-danger",n="Inactivo";return null==t.isActive&&void 0==t.isActive||"Activo"==t.isActive&&(o="label label-success",n="Activo"),'<span class="'+o+'">'+n+"</span>"})];var g=function(){$("#dtPositivaFgn a.editRow").on("click",function(){var t=$(this).data("id");v(t)}),$("#dtPositivaFgn a.dropRow").on("click",function(){var o=$(this).data("id");f.swal({title:"Está seguro?",text:"Eliminará el registro seleccionado.",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Si, eliminar!",cancelButtonText:"No, continuar!",closeOnConfirm:!0,closeOnCancel:!0},function(n){if(n){var e={};e.id=o,d({method:"POST",url:"api/positiva-fgn-gestpos/delete",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(e)}).then(function(t){f.swal("Proceso Exitoso","Se ha eliminado correctamente el registro.","success")})["catch"](function(t){f.swal("Error en la eliminación",t.data.message,"error")})["finally"](function(){t.reloadData()})}})})};t.reloadData=function(){t.dtInstancePositivaFgn.reloadData()},t.onCreate=function(){v(0)};var v=function(o){t.campusId=o;var n=m.open({templateUrl:u.app.views.urlRoot+"modules/positiva-fgn/gestpos/task/task_edit.htm",placement:"right",backdrop:"static",size:"lg",controller:"taskEditCtrl",scope:t});n.result.then(function(){t.reloadData()})};t.onUpload=function(){var o=m.open({templateUrl:u.app.views.urlRoot+"modules/common/modals/import_modal.htm",placement:"bottom",size:"lg",backdrop:!0,controller:"ModalPositivaFgnTaskImportCtrl",scope:t});o.result.then(function(o){t.reloadData()})}}]),app.controller("ModalPositivaFgnTaskImportCtrl",["$rootScope","$stateParams","$scope","FileUploader","$uibModalInstance","$log","$timeout","SweetAlert","$http","toaster","ngNotify","ListService",function(t,o,n,e,i,a,l,r,s,c,u,p){function d(){var t=[{name:"export_url",value:null}];p.getDataList(t).then(function(t){f=t.data.data.exportUrl.item,w.url=f+"api/v1/positiva-fgn/gestpos-task-import",n.uploader.url=f+"api/v1/positiva-fgn/gestpos-task-import"},function(t){n.status="Unable to load customer data: "+t.message})}var f="",m=null;n.showTemplate=!0;var w=n.uploader=new e({url:f+"api/v1/positiva-fgn/gestpos-task-import",formData:[]});d(),n.download=function(){jQuery("#downloadDocument")[0].src="api/positiva-fgn-gestpos/download-template"},w.filters.push({name:"customFilter",fn:function(t,o){return this.queue.length<10}}),w.onWhenAddingFileFailed=function(t,o,n){console.info("onWhenAddingFileFailed",t,o,n)},w.onAfterAddingFile=function(t){console.info("onAfterAddingFile",t)},w.onAfterAddingAll=function(t){console.info("onAfterAddingAll",t)},w.onBeforeUploadItem=function(t){console.info("onBeforeUploadItem",t);var n={id:o.customerId};t.formData.push(n)},w.onProgressItem=function(t,o){console.info("onProgressItem",t,o)},w.onProgressAll=function(t){console.info("onProgressAll",t)},w.onSuccessItem=function(t,o,n,e){console.info("onSuccessItem",t,o,n,e)},w.onErrorItem=function(t,o,n,e){console.info("onErrorItem",t,o,n,e)},w.onCancelItem=function(t,o,n,e){console.info("onCancelItem",t,o,n,e)},w.onCompleteItem=function(t,o,n,e){console.info("onCompleteItem",t,o,n,e),m=o},w.onCompleteAll=function(){console.info("onCompleteAll"),i.close(m)}}]);
"use strict";app.controller("taskEditCtrl",["$rootScope","$stateParams","$scope","$log","$timeout","SweetAlert","$http","$compile","ListService","$state","$uibModalInstance","ModuleListService",function(t,e,n,a,i,s,o,r,l,u,c,d){function p(){var t=[{name:"main_task_list"},{name:"subtask_list"}];d.getDataList("/positiva-fgn-gestpos/config",t).then(function(t){n.mainTaskList=t.data.result.mainTaskList,n.subTaskList=t.data.result.subTaskList},function(t){n.status="Unable to load customer data: "+t.message})}n.sectorList=t.parameters("positiva_fgn_gestpos_sector"),n.programList=t.parameters("positiva_fgn_gestpos_program"),n.planList=t.parameters("positiva_fgn_gestpos_plan"),n.actionLineList=t.parameters("positiva_fgn_gestpos_action_line"),n.mainTaskList=[],n.subTaskList=[],n.main=!0,n.subtask=!1,n.dependenTask=!1;var m=function(){n.entity={id:n.campusId||0,type:"main",name:null,isActive:!0,addCode:!1,sector:null,program:null,plan:null,actionLine:null,consecutive:null,mainTask:null,subTask:null},n.isManual=!1};m(),n.onChangeType=function(t,e){switch(t){case"main":n.main=!0,n.subtask=!1,n.dependenTask=!1;break;case"subtask":n.main=!1,n.subtask=!0,n.dependenTask=!1;break;case"dependenTask":n.main=!1,n.subtask=!1,n.dependenTask=!0}e&&m(),n.entity.type=t},n.clearCode=function(){n.entity.addCode||(n.entity.sector=null,n.entity.program=null,n.entity.plan=null,n.entity.actionLine=null,n.entity.consecutive=null)},p(),n.form={submit:function(t){var e=null;if(n.Form=t,t.$invalid){var a=null,e=null;for(a in t)"$"!=a[0]&&(null!==e||t[a].$valid||(e=t[a].$name),t[a].$pristine&&(t[a].$dirty=!0));return angular.element(".ng-invalid[name="+e+"]").focus(),void s.swal("El formulario contiene errores!","Por favor corrige los errores del formulario e intentalo de nuevo.","error")}f()},reset:function(){n.Form.$setPristine(!0),m()}};var f=function(){var t={},e=JSON.stringify(n.entity);return t.data=Base64.encode(e),o({method:"POST",url:"api/positiva-fgn-gestpos/save",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(t)}).then(function(t){0==n.entity.id&&n.onBack(),s.swal("Proceso Exitoso","Se ha almacenado correctamente la información.","success")})["catch"](function(t){a.error(t),s.swal("Error de guardado",t.data.message,"error")})};n.setManual=function(){n.isManual=!0,n.entity.subTask=null},n.onLoadRecord=function(){if(n.entity.id>0){var t={id:n.entity.id};o({method:"GET",url:"api/positiva-fgn-gestpos/get",params:t})["catch"](function(t,e){s.swal("Error","Se ha presentado un error al intentar acceder a la información.","error")}).then(function(t){i(function(){n.entity=t.data.result,n.onChangeType(n.entity.type,!1)})})}},n.onLoadRecord(),n.onBack=function(){c.close(1)}}]);
"use strict";app.controller("activityCtrl",["$scope","$stateParams","$log","$compile","$rootScope","$timeout",function(t,e,i,o,c,n){t.activity_section="list",t.currentId=0,t.editMode="create",t.navToSection=function(e,i,o){n(function(){t.activity_section=e,t.editMode=i,t.currentId=o})}}]);
"use strict";app.controller("activityListCtrl",["$scope","$stateParams","$log","DTOptionsBuilder","DTColumnBuilder","DTColumnDefBuilder","$localStorage","$compile","toaster","$state","$rootScope","$timeout","$http","$aside",function(t,o,i,n,e,a,l,s,r,c,p,d,u,f){var v="activityListCtrl-"+window.currentUser.id;t.dtInstancePositivaFgnGestposActivity={},t.dtOptionsPositivaFgnGestposActivity=n.newOptions().withBootstrap().withOption("responsive",!0).withOption("ajax",{data:function(t){return JSON.stringify(t)},url:"api/positiva-fgn-gestpos-activity",type:"POST",beforeSend:function(){},complete:function(){}}).withDataProp("data").withOption("stateSave",!0).withOption("stateSaveCallback",function(t,o){l[v]=o}).withOption("stateLoadCallback",function(){return l[v]}).withOption("order",[[0,"asc"]]).withOption("serverSide",!0).withOption("processing",!0).withOption("fnPreDrawCallback",function(){return!0}).withOption("fnDrawCallback",function(){m()}).withOption("language",{}).withPaginationType("full_numbers").withOption("createdRow",function(o,i,n){s(angular.element(o).contents())(t)}),t.dtColumnsPositivaFgnGestposActivity=[e.newColumn(null).withTitle("Acciones").withOption("width",90).notSortable().renderWith(function(t){var o="",i="",n='<a class="btn btn-primary btn-xs editRow lnk" href="#" uib-tooltip="Editar"  data-id="'+t.id+'"'+i+' >   <i class="fa fa-edit"></i></a> ',e='<a class="btn btn-info btn-xs evidenceRow lnk" href="#"  uib-tooltip="Evidencias" data-id="'+t.id+'"'+i+' >   <i class="fa fa-th-list"></i></a> ';return o+=n,o+=e}),e.newColumn("name").withTitle("Actividad").withOption("width",200).withOption("defaultContent",""),e.newColumn("code").withTitle("Código").withOption("width",200).withOption("defaultContent",""),e.newColumn("strategy").withTitle("Estrategia").withOption("width",200).withOption("defaultContent",""),e.newColumn(null).withTitle("Estado").withOption("width",200).renderWith(function(t){var o="label label-danger",i="Inactivo";return null==t.isActive&&void 0==t.isActive||"Activo"==t.isActive&&(o="label label-success",i="Activo"),'<span class="'+o+'">'+i+"</span>"})];var m=function(){$("#dtPositivaFgnGestposActivity a.editRow").on("click",function(){var t=$(this).data("id");w(t)}),$("#dtPositivaFgnGestposActivity a.evidenceRow").on("click",function(){var t=$(this).data("id");h(t)})};t.reloadData=function(){t.dtInstancePositivaFgnGestposActivity.reloadData()},t.onCreate=function(){null!=t.$parent&&t.$parent.navToSection("edit","edit")};var w=function(i){null!=t.$parent&&(o.gestposId=i,t.$parent.navToSection("edit","edit",i))},h=function(i){o.gestposId=i;var n=f.open({templateUrl:p.app.views.urlRoot+"modules/positiva-fgn/gestpos/activity/evidence/evidence_list.htm",placement:"right",backdrop:"static",size:"lg",controller:"evidenceListCtrl",scope:t});n.result.then(function(){})};t.onUpload=function(){var o=f.open({templateUrl:p.app.views.urlRoot+"modules/common/modals/import_modal.htm",placement:"bottom",size:"lg",backdrop:!0,controller:"ModalPositivaFgnGestposActivitiesImportCtrl",scope:t});o.result.then(function(o){t.reloadData()})}}]),app.controller("ModalPositivaFgnGestposActivitiesImportCtrl",["$rootScope","$stateParams","$scope","FileUploader","$uibModalInstance","$log","$timeout","SweetAlert","$http","toaster","ngNotify","ListService",function(t,o,i,n,e,a,l,s,r,c,p,d){function u(){var t=[{name:"export_url",value:null}];d.getDataList(t).then(function(t){f=t.data.data.exportUrl.item,m.url=f+"api/v1/positiva-fgn/gestpos-activity-import",i.uploader.url=f+"api/v1/positiva-fgn/gestpos-activity-import"},function(t){i.status="Unable to load customer data: "+t.message})}var f="",v=null;i.showTemplate=!0;var m=i.uploader=new n({url:f+"api/v1/positiva-fgn/gestpos-activity-import",formData:[]});u(),i.download=function(){jQuery("#downloadDocument")[0].src="api/positiva-fgn-gestpos-activity/download-template"},m.filters.push({name:"customFilter",fn:function(t,o){return this.queue.length<10}}),m.onWhenAddingFileFailed=function(t,o,i){console.info("onWhenAddingFileFailed",t,o,i)},m.onAfterAddingFile=function(t){console.info("onAfterAddingFile",t)},m.onAfterAddingAll=function(t){console.info("onAfterAddingAll",t)},m.onBeforeUploadItem=function(t){console.info("onBeforeUploadItem",t);var i={id:o.customerId};t.formData.push(i)},m.onProgressItem=function(t,o){console.info("onProgressItem",t,o)},m.onProgressAll=function(t){console.info("onProgressAll",t)},m.onSuccessItem=function(t,o,i,n){console.info("onSuccessItem",t,o,i,n)},m.onErrorItem=function(t,o,i,n){console.info("onErrorItem",t,o,i,n)},m.onCancelItem=function(t,o,i,n){console.info("onCancelItem",t,o,i,n)},m.onCompleteItem=function(t,o,i,n){console.info("onCompleteItem",t,o,i,n),v=o},m.onCompleteAll=function(){console.info("onCompleteAll"),e.close(v)}}]);
"use strict";app.controller("activityEditCtrl",["$rootScope","$stateParams","$scope","$log","$timeout","SweetAlert","$http","$compile","ListService","$state","ModuleListService","$filter",function(t,e,i,a,r,n,o,s,l,c,u,d){i.sectorList=t.parameters("positiva_fgn_gestpos_sector"),i.programList=t.parameters("positiva_fgn_gestpos_program"),i.planList=t.parameters("positiva_fgn_gestpos_plan"),i.actionLineList=t.parameters("positiva_fgn_gestpos_action_line"),i.activityTypeList=t.parameters("positiva_fgn_gestpos_activity_type"),i.strategyList=t.parameters("positiva_fgn_consultant_strategy");var p=function(){i.entity={id:i.$parent.currentId||0,type:"main",task:null,isActive:!0,isAutomatic:!1,enableAutomatic:!0,sector:null,program:null,plan:null,actionLine:null,consecutive:null,activityType:null,strategy:[]}};p(),i.form={submit:function(t){var e=null;if(i.Form=t,t.$invalid){var a=null,e=null;for(a in t)"$"!=a[0]&&(null!==e||t[a].$valid||(e=t[a].$name),t[a].$pristine&&(t[a].$dirty=!0));return angular.element(".ng-invalid[name="+e+"]").focus(),void n.swal("El formulario contiene errores!","Por favor corrige los errores del formulario e intentalo de nuevo.","error")}f()},reset:function(){i.Form.$setPristine(!0),p()}};var f=function(){var t={},r=JSON.stringify(i.entity);return t.data=Base64.encode(r),o({method:"POST",url:"api/positiva-fgn-gestpos-activity/save",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(t)}).then(function(t){i.entity.enableAutomatic&&i.$emit("realoadAssociatedTask"),i.entity.id=t.data.result.id,e.gestposId=i.entity.id,i.entity.strategy=t.data.result.strategy,n.swal("Proceso Exitoso","Se ha almacenado correctamente la información.","success")})["catch"](function(t){a.error(t),n.swal("Error de guardado","Error guardando el registro. Por favor verifique los datos ingresados!","error")})};i.onLoadRecord=function(){if(i.entity.id>0){var t={id:i.entity.id};o({method:"GET",url:"api/positiva-fgn-gestpos-activity/get",params:t})["catch"](function(t,e){n.swal("Error","Se ha presentado un error al intentar acceder a la información.","error")}).then(function(t){r(function(){i.entity=t.data.result})})}},i.onLoadRecord(),i.onBack=function(){null!=i.$parent&&i.$parent.navToSection("list","list")},i.onAddStrategy=function(){r(function(){i.entity.strategy.push({id:0,strategy:"",isActive:!0})})},i.onRemoveStrategy=function(t,e){return 0==e?void i.entity.strategy.splice(t,1):void n.swal({title:"Está seguro?",text:"Eliminará el registro seleccionado",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Si, eliminar!",cancelButtonText:"No, cancelar!",closeOnConfirm:!0,closeOnCancel:!0},function(e){e?r(function(){var e=i.entity.strategy[t];if(i.entity.strategy.splice(t,1),0!=e.id){var r={};r.id=e.id,r.detail="strategy",o({method:"POST",url:"api/positiva-fgn-gestpos-activity/delete",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(r)}).then(function(t){swal("Eliminado","Registro eliminado satisfactoriamente","info")})["catch"](function(t){a.error(t),n.swal("Error en la eliminación","Se ha presentado un error durante la eliminación del registro. Por favor inténtelo de nuevo, si el error persiste, comuníquese con el administrador del sistema","error")})["finally"](function(){})}}):swal("Cancelación","La operación ha sido cancelada","error")})},i.valideSingle=function(t){var e=d("filter")(i.entity.strategy,{strategy:t});return!!e.length}}]);
"use strict";app.controller("associatedTaskListCtrl",["$scope","$stateParams","$log","DTOptionsBuilder","DTColumnBuilder","DTColumnDefBuilder","$localStorage","$compile","toaster","$state","$rootScope","$timeout","$http","$aside","SweetAlert",function(t,n,e,i,a,o,s,r,l,d,c,p,u,w,h){t.entity={showDependents:!1};var f="associatedTaskListCtrl-"+window.currentUser.id;t.dtInstanceAssociatedtask={},t.dtOptionsAssociatedtask=i.newOptions().withBootstrap().withOption("responsive",!0).withOption("ajax",{data:function(e){return e.gestposId=n.gestposId,e.showDependents=t.entity.showDependents,JSON.stringify(e)},url:"api/positiva-fgn-gestpos-activity-associated-task",type:"POST",beforeSend:function(){},complete:function(){}}).withDataProp("data").withOption("stateSave",!0).withOption("stateSaveCallback",function(t,n){s[f]=n}).withOption("stateLoadCallback",function(){return s[f]}).withOption("order",[]).withOption("serverSide",!0).withOption("processing",!0).withOption("fnPreDrawCallback",function(){return!0}).withOption("fnDrawCallback",function(){m()}).withOption("language",{}).withPaginationType("full_numbers").withOption("createdRow",function(n,e,i){r(angular.element(n).contents())(t)}),t.dtColumnsAssociatedtask=[a.newColumn(null).withTitle("Acciones").withOption("width",90).notSortable().renderWith(function(t){var n="",e="";if("Principal"==t.type){var i='<a class="btn btn-danger btn-xs delRow lnk" href="#" uib-tooltip="Eliminar"  data-id="'+t.id+'"'+e+' >   <i class="fa fa-trash"></i></a> ';n+=i}return n}),a.newColumn("number").withTitle("id").withOption("width",200).notSortable().withOption("defaultContent",""),a.newColumn("name").withTitle("Tarea").withOption("width",200).notSortable().withOption("defaultContent",""),a.newColumn("type").withTitle("Tipo").withOption("width",200).notSortable().withOption("defaultContent",""),a.newColumn("mainTask").withTitle("Tarea Principal").withOption("width",200).notSortable().withOption("defaultContent","")];var m=function(){$("#dtAssociatedtask a.delRow").on("click",function(){var t=$(this).data("id");O(t)})};t.reloadData=function(){t.dtInstanceAssociatedtask.reloadData()},t.onViewDependents=function(){t.reloadData()};var O=function(n){h.swal({title:"Está seguro?",text:"Eliminará el registro seleccionado.",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Si, eliminar!",cancelButtonText:"No, continuar!",closeOnConfirm:!0,closeOnCancel:!0},function(e){if(e){var i={};i.id=n,u({method:"POST",url:"api/positiva-fgn-gestpos-activity-associated-task/delete",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(i)}).then(function(t){h.swal("Proceso Exitoso","Se ha eliminado correctamente el registro.","success")})["catch"](function(t){h.swal("Error en la eliminación","Se ha presentado un error durante la eliminación del registro por favor intentelo de nuevo","error")})["finally"](function(){t.reloadData()})}})};t.onAddTask=function(){var n=w.open({templateUrl:c.app.views.urlRoot+"modules/positiva-fgn/gestpos/activity/associated-task/add_task.htm",placement:"right",backdrop:"static",size:"lg",controller:"ModalAddTaskCtrl",scope:t});n.result.then(function(){t.reloadData()})},t.$on("realoadAssociatedTask",function(n,e){t.reloadData()})}]),app.controller("ModalAddTaskCtrl",["$rootScope","$stateParams","$scope","$uibModalInstance","DTOptionsBuilder","DTColumnBuilder","DTColumnDefBuilder","$log","$timeout","SweetAlert","$http","$compile",function(t,n,e,i,a,o,s,r,l,d,c,p){var u=function(){e.entity={taskId:0,gestposId:n.gestposId,showDependents:!1,name:null}};u();var w=function(){var t={},n=JSON.stringify(e.entity);return t.data=Base64.encode(n),c({method:"POST",url:"api/positiva-fgn-gestpos-activity-associated-task/save",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(t)}).then(function(t){e.reloadData(),d.swal("Proceso Exitoso","Se ha almacenado correctamente la información.","success")})["catch"](function(t){r.error(t),d.swal("Error de guardado",t.data.message,"error")})};e.onViewDependents=function(){e.reloadData()},e.dtInstancePositivaFgnCampus={},e.dtOptionsPositivaFgnCampus=a.newOptions().withBootstrap().withOption("responsive",!0).withOption("ajax",{data:function(t){return t.gestposId=n.gestposId,t.showDependents=e.entity.showDependents,e.entity.name&&(t.search={value:e.entity.name,regex:!1}),JSON.stringify(t)},url:"api/positiva-fgn-gestpos-activity-associated-task/maintask",type:"POST",beforeSend:function(){},complete:function(){}}).withDataProp("data").withOption("bFilter",!1).withOption("order",!1).withOption("serverSide",!0).withOption("processing",!0).withOption("fnPreDrawCallback",function(){return!0}).withOption("fnDrawCallback",function(){h()}).withOption("language",{}).withPaginationType("full_numbers").withOption("createdRow",function(t,n,i){p(angular.element(t).contents())(e)}),e.dtColumnsPositivaFgnCampus=[o.newColumn(null).withTitle("Acciones").withOption("width",120).notSortable().renderWith(function(t){var n="";if("Principal"==t.type){var e='<a class="btn btn-green btn-xs addRow lnk" href="#" uib-tooltip="Agregar"  data-id="'+t.id+'"  >   <i class="glyphicon glyphicon-plus"></i></a> ';n+=e}return n}),o.newColumn("number").withTitle("id").withOption("width",200).withOption("defaultContent",""),o.newColumn("name").withTitle("Tarea").withOption("width",200).withOption("defaultContent",""),o.newColumn("type").withTitle("Tipo").withOption("width",200).withOption("defaultContent",""),o.newColumn("mainTask").withTitle("Tarea Principal").withOption("width",200).withOption("defaultContent","")];var h=function(){$("#dtPositivaFgnCampus a.addRow").on("click",function(){var t=$(this).data("id");e.entity.taskId=t,w()})};e.reloadData=function(){e.dtInstancePositivaFgnCampus.reloadData()},e.onCloseModal=function(){i.close(1)},e.onSearch=function(){e.reloadData()},e.onClear=function(){e.entity.name=null,e.reloadData()}}]);
"use strict";app.controller("evidenceListCtrl",["$rootScope","$stateParams","$scope","$uibModalInstance","DTOptionsBuilder","DTColumnBuilder","DTColumnDefBuilder","$localStorage","$log","$timeout","SweetAlert","$http","$compile",function(e,t,n,i,o,a,r,l,s,c,d,u,p){n.evidenceList=e.parameters("positiva_fgn_gestpos_evidence");var f=function(){n.entity={taskId:0,gestposId:t.gestposId,evidence:null,isRequired:null}};f(),n.form={submit:function(e){var t=null;if(n.Form=e,e.$invalid){var i=null,t=null;for(i in e)"$"!=i[0]&&(null!==t||e[i].$valid||(t=e[i].$name),e[i].$pristine&&(e[i].$dirty=!0));return angular.element(".ng-invalid[name="+t+"]").focus(),void d.swal("El formulario contiene errores!","Por favor corrige los errores del formulario e intentalo de nuevo.","error")}w()},reset:function(){n.Form.$setPristine(!0),f()}};var w=function(){var e={},t=JSON.stringify(n.entity);return e.data=Base64.encode(t),u({method:"POST",url:"api/positiva-fgn-gestpos-activity-evidence/save",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(e)}).then(function(e){n.form.reset(),n.reloadData(),d.swal("Proceso Exitoso","Se ha almacenado correctamente la información.","success")})["catch"](function(e){s.error(e),d.swal("Error de guardado",e.data.message,"error")})};n.onViewDependents=function(){n.reloadData()};var h="evidenceListCtrl-"+window.currentUser.id;n.dtInstanceEvidence={},n.dtOptionsEvidence=o.newOptions().withBootstrap().withOption("responsive",!0).withOption("ajax",{data:function(e){return e.gestposId=t.gestposId,e.showDependents=n.entity.showDependents,JSON.stringify(e)},url:"api/positiva-fgn-gestpos-activity-evidence/",type:"POST",beforeSend:function(){},complete:function(){}}).withDataProp("data").withOption("stateSave",!0).withOption("stateSaveCallback",function(e,t){l[h]=t}).withOption("stateLoadCallback",function(){return l[h]}).withOption("bFilter",!1).withOption("order",[[0,"desc"]]).withOption("serverSide",!0).withOption("processing",!0).withOption("fnPreDrawCallback",function(){return!0}).withOption("fnDrawCallback",function(){v()}).withOption("language",{}).withPaginationType("full_numbers").withOption("createdRow",function(e,t,i){p(angular.element(e).contents())(n)}),n.dtColumnsEvidence=[a.newColumn(null).withTitle("Acciones").withOption("width",120).notSortable().renderWith(function(e){var t="",n="",i='<a class="btn btn-danger btn-xs delRow lnk" href="#" uib-tooltip="Eliminar"  data-id="'+e.id+'"'+n+' >   <i class="fa fa-trash"></i></a> ';return t+=i}),a.newColumn("evidence").withTitle("Evidencia").withOption("width",200).withOption("defaultContent",""),a.newColumn("isRequired").withTitle("Requerido").withOption("width",200).withOption("defaultContent","")];var v=function(){$("#dtEvidence a.delRow").on("click",function(){var e=$(this).data("id");m(e)})};n.reloadData=function(){n.dtInstanceEvidence.reloadData()},n.onCloseModal=function(){i.close(1)};var m=function(e){d.swal({title:"Está seguro?",text:"Eliminará el registro seleccionado.",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Si, eliminar!",cancelButtonText:"No, continuar!",closeOnConfirm:!0,closeOnCancel:!0},function(t){if(t){var i={};i.id=e,u({method:"POST",url:"api/positiva-fgn-gestpos-activity-evidence/delete",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(i)}).then(function(e){d.swal("Proceso Exitoso","Se ha eliminado correctamente el registro.","success")})["catch"](function(e){d.swal("Error en la eliminación","Se ha presentado un error durante la eliminación del registro por favor intentelo de nuevo","error")})["finally"](function(){n.reloadData()})}})}}]);
"use strict";app.controller("configListCtrl",["$scope","$stateParams","$log","DTOptionsBuilder","DTColumnBuilder","DTColumnDefBuilder","$localStorage","$compile","toaster","$state","$rootScope","$timeout","$http","$aside",function(t,i,n,o,a,e,l,c,s,r,d,p,u,w){var f="configListCtrl-"+window.currentUser.id;t.dtInstancePositivaFgn={},t.dtOptionsPositivaFgn=o.newOptions().withBootstrap().withOption("responsive",!0).withOption("ajax",{data:function(t){return JSON.stringify(t)},url:"api/positiva-fgn-fgn-config",type:"POST",beforeSend:function(){},complete:function(){}}).withDataProp("data").withOption("stateSave",!0).withOption("stateSaveCallback",function(t,i){l[f]=i}).withOption("stateLoadCallback",function(){return l[f]}).withOption("order",[[0,"asc"]]).withOption("serverSide",!0).withOption("processing",!0).withOption("fnPreDrawCallback",function(){return!0}).withOption("fnDrawCallback",function(){h()}).withOption("language",{}).withPaginationType("full_numbers").withOption("createdRow",function(i){c(angular.element(i).contents())(t)}),t.dtColumnsPositivaFgn=[a.newColumn(null).withTitle("Acciones").withOption("width",90).notSortable().renderWith(function(t){var i="",n="",o='<a class="btn btn-primary btn-xs editRow lnk" href="#" uib-tooltip="Editar" data-id="'+t.id+'"'+n+' >   <i class="fa fa-edit"></i></a> ',a='<a class="btn btn-blue btn-xs activityRow lnk" href="#"  uib-tooltip="Continuar" data-id="'+t.id+'"'+n+' >   <i class="fa fa-play-circle"></i></a> ',e='<a class="btn btn-info btn-xs viewRow lnk" href="#"  uib-tooltip="Ver" data-id="'+t.id+'"'+n+' >   <i class="fa fa-eye"></i></a> ';return"Inactivo"!=t.isActive&&(d.can("positiva_fgn_periods_create_edit")&&(i+=o),i+=a),i+=e}),a.newColumn("period").withTitle("Periodo").withOption("width",200).withOption("defaultContent",""),a.newColumn("startDate").withTitle("Fecha Inicio").withOption("width",200).withOption("defaultContent",""),a.newColumn("endDate").withTitle("Fecha Fin").withOption("width",200).withOption("defaultContent",""),a.newColumn(null).withTitle("Estado").withOption("width",200).renderWith(function(t){var i="label label-danger",n="Inactivo";return null==t.isActive&&void 0==t.isActive||"Activo"==t.isActive&&(i="label label-success",n="Activo"),'<span class="'+i+'">'+n+"</span>"})];var h=function(){$("#dtPositivaFgn a.editRow").on("click",function(){var i=$(this).data("id");l.isView=!1,t.onCreate(i,!1)}),$("#dtPositivaFgn a.viewRow").on("click",function(){var i=$(this).data("id");l.isView=!0,t.onNext(i)}),$("#dtPositivaFgn a.activityRow").on("click",function(){var i=$(this).data("id");l.isView=!1,t.onNext(i)})};t.reloadData=function(){t.dtInstancePositivaFgn.reloadData()},t.onNext=function(t){r.go("app.positiva-fgn.fgn-activity-list",{configId:t})},t.onCreate=function(n){i.configId=n;var o=w.open({templateUrl:d.app.views.urlRoot+"modules/positiva-fgn/fgn/config/config_edit.htm",placement:"right",backdrop:"static",size:"lg",controller:"configEditCtrl",scope:t});o.result.then(function(){t.reloadData()})}}]);
"use strict";app.controller("configEditCtrl",["$rootScope","$stateParams","$scope","$log","$timeout","SweetAlert","$http","$state","$uibModalInstance","moment","$localStorage",function(t,e,n,a,r,i,o,c,l,s,d){n.isView=d.isView||!1,n.maxDate=new Date,n.datePickerConfig={culture:"es-CO",format:"dd/MM/yyyy"};var f=function(){n.entity={id:e.configId||0,period:null,startDate:null,endDate:null,isActive:!0}};f(),n.$watch("entity.startDate",function(){if(n.entity.startDate){var t=s(n.entity.startDate,"DD/MM/YYYY"),e=t.format("D"),a=t.format("M"),r=t.format("YYYY");(e>1||a>1)&&(n.entity.startDate=s("01/01/"+r).format("DD/MM/YYYY"),n.entity.endDate="31/12/"+r,n.entity.period=r)}}),n.form={submit:function(t){var e=null;if(n.Form=t,t.$invalid){var a=null,e=null;for(a in t)"$"!=a[0]&&(null!==e||t[a].$valid||(e=t[a].$name),t[a].$pristine&&(t[a].$dirty=!0));return angular.element(".ng-invalid[name="+e+"]").focus(),void i.swal("El formulario contiene errores!","Por favor corrige los errores del formulario e intentalo de nuevo.","error")}u()},reset:function(){n.Form.$setPristine(!0),f()}};var u=function(){var t={},e=JSON.stringify(n.entity);return t.data=Base64.encode(e),o({method:"POST",url:"api/positiva-fgn-fgn-config/save",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(t)}).then(function(t){n.entity.id=t.data.result.id,i.swal("Proceso Exitoso","Se ha almacenado correctamente la información.","success")})["catch"](function(t){a.error(t),i.swal("Error de guardado",t.data.message,"error")})};n.onLoadRecord=function(){if(n.entity.id>0){var t={id:n.entity.id};o({method:"GET",url:"api/positiva-fgn-fgn-config/get",params:t})["catch"](function(t,e){i.swal("Error","Se ha presentado un error al intentar acceder a la información.","error")}).then(function(t){r(function(){n.entity=t.data.result})})}},n.onLoadRecord(),n.onBack=function(){l.close(1)},n.onNext=function(){t.isView=!0,c.go("app.positiva-fgn.fgn-activity-list",{configId:n.entity.id})}}]);
"use strict";app.controller("PFFactivityListCtrl",["$scope","$stateParams","$log","DTOptionsBuilder","DTColumnBuilder","DTColumnDefBuilder","$localStorage","$compile","toaster","$state","$rootScope","SweetAlert","$http","$aside",function(t,i,n,o,e,a,l,c,r,s,d,f,u,p){t.isView=l.isView;var g="activityListCtrl-"+window.currentUser.id;t.dtOptionsPositivaFgnActivity=o.newOptions().withBootstrap().withOption("responsive",!0).withOption("ajax",{data:function(t){return t.configId=i.configId,JSON.stringify(t)},url:"api/positiva-fgn-fgn-activity",type:"POST",beforeSend:function(){},complete:function(){}}).withDataProp("data").withOption("stateSave",!0).withOption("stateSaveCallback",function(t,i){l[g]=i}).withOption("stateLoadCallback",function(){return l[g]}).withOption("order",[[3,"asc"]]).withOption("serverSide",!0).withOption("processing",!0).withOption("fnPreDrawCallback",function(){return!0}).withOption("fnDrawCallback",function(){w()}).withOption("language",{}).withPaginationType("full_numbers").withOption("createdRow",function(i,n,o){c(angular.element(i).contents())(t)}),t.dtColumnsPositivaFgnActivity=[e.newColumn(null).withTitle("Acciones").withOption("width",140).notSortable().renderWith(function(i){var n="",o="",e="";t.isView?e='<a class="btn btn-info btn-xs editRow lnk" href="#" uib-tooltip="Ver" data-id="'+i.id+'" >   <i class="fa fa-eye"></i></a> ':t.can("positiva_fgn_activity_create_edit")&&(e='<a class="btn btn-primary btn-xs editRow lnk" href="#" uib-tooltip="Editar" data-id="'+i.id+'">   <i class="fa fa-edit" ></i></a> ');var a='<a class="btn btn-blue btn-xs configRow lnk" href="#"  uib-tooltip="Configurar" data-id="'+i.id+'" >   <i class="fa fa-cog"></i></a> ',l='<a class="btn btn-info btn-xs configSectionalRow lnk" href="#"  uib-tooltip="Configurar por Seccional" data-id="'+i.id+'" >   <i class="fa fa-th-list"></i></a> ';return!t.isView&&t.can("positiva_fgn_activity_delete")&&(o='<a class="btn btn-danger btn-xs dropRow lnk" href="#"  uib-tooltip="Eliminar"  data-id="'+i.id+'" >   <i class="fa fa-trash"></i></a> '),n+=e,n+=a,n+=l,n+=o}),e.newColumn("axis").withTitle("Eje").withOption("width",200).withOption("defaultContent",""),e.newColumn("action").withTitle("Acción").withOption("width",200).withOption("defaultContent",""),e.newColumn("code").withTitle("Cod. Actividad").withOption("width",200).withOption("defaultContent",""),e.newColumn("name").withTitle("Actividad").withOption("width",200).withOption("defaultContent",""),e.newColumn("strategy").withTitle("Estrategia").withOption("width",200).withOption("defaultContent",""),e.newColumn("goalCoverage").withTitle("Meta Cobertura").withOption("width",200).withOption("defaultContent",""),e.newColumn("goalCompliance").withTitle("Meta Cumplimiento").withOption("width",200).withOption("defaultContent","")],t.dtInstancePositivaFgnCallback=function(i){t.dtInstancePositivaFgnActivity=i};var w=function(){$("#dtPositivaFgnActivity a.editRow").on("click",function(){var t=$(this).data("id");s.go("app.positiva-fgn.fgn-activity-edit",{configId:i.configId,activityId:t})}),$("#dtPositivaFgnActivity a.configRow").on("click",function(){var t=$(this).data("id");s.go("app.positiva-fgn.fgn-activity-config",{configId:i.configId,activityId:t})}),$("#dtPositivaFgnActivity a.configSectionalRow").on("click",function(){var t=$(this).data("id");s.go("app.positiva-fgn.fgn-activity-config-sectional",{configId:i.configId,activityId:t})}),$("#dtPositivaFgnActivity a.dropRow").on("click",function(){var i=$(this).data("id");f.swal({title:"Está seguro?",text:"Eliminará el registro seleccionado.",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Si, eliminar!",cancelButtonText:"No, continuar!",closeOnConfirm:!0,closeOnCancel:!0},function(n){if(n){var o={};o.id=i,o.detail="activity",u({method:"POST",url:"api/positiva-fgn-fgn-activity/delete",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(o)}).then(function(t){f.swal("Proceso Exitoso","Se ha eliminado correctamente el registro.","success")})["catch"](function(t){f.swal("Error en la eliminación","Se ha presentado un error durante la eliminación del registro por favor intentelo de nuevo","error")})["finally"](function(){t.reloadData()})}})})};t.reloadData=function(){t.dtInstancePositivaFgnActivity.reloadData()},t.onCreate=function(){s.go("app.positiva-fgn.fgn-activity-edit",{configId:i.configId,activityId:0})},t.onBack=function(){s.go("app.positiva-fgn.fgn")},t.onUpload=function(){var i=p.open({templateUrl:d.app.views.urlRoot+"modules/common/modals/import_modal.htm",placement:"bottom",size:"lg",backdrop:!0,controller:"ModalPFFactivityImportCtrl",scope:t});i.result.then(function(i){t.reloadData()})}}]),app.controller("ModalPFFactivityImportCtrl",["$rootScope","$stateParams","$scope","FileUploader","$uibModalInstance","$log","$timeout","SweetAlert","$http","toaster","ngNotify","ListService",function(t,i,n,o,e,a,l,c,r,s,d,f){function u(){var t=[{name:"export_url",value:null}];f.getDataList(t).then(function(t){p=t.data.data.exportUrl.item,w.url=p+"api/v1/positiva-fgn/fgn-activity-import",n.uploader.url=p+"api/v1/positiva-fgn/fgn-activity-import"},function(t){n.status="Unable to load customer data: "+t.message})}var p="",g=null;n.showTemplate=!0;var w=n.uploader=new o({url:p+"api/v1/positiva-fgn/fgn-activity-import",formData:[]});u(),n.download=function(){angular.element("#downloadDocument")[0].src="api/positiva-fgn-fgn-activity/download-template"},w.filters.push({name:"customFilter",fn:function(t,i){return this.queue.length<10}}),w.onWhenAddingFileFailed=function(t,i,n){console.info("onWhenAddingFileFailed",t,i,n)},w.onAfterAddingFile=function(t){console.info("onAfterAddingFile",t)},w.onAfterAddingAll=function(t){console.info("onAfterAddingAll",t)},w.onBeforeUploadItem=function(n){console.info("onBeforeUploadItem",n);var o={id:i.customerId,user:t.currentUser().id};n.formData.push(o)},w.onProgressItem=function(t,i){console.info("onProgressItem",t,i)},w.onProgressAll=function(t){console.info("onProgressAll",t)},w.onSuccessItem=function(t,i,n,o){console.info("onSuccessItem",t,i,n,o)},w.onErrorItem=function(t,i,n,o){console.info("onErrorItem",t,i,n,o)},w.onCancelItem=function(t,i,n,o){console.info("onCancelItem",t,i,n,o)},w.onCompleteItem=function(t,i,n,o){console.info("onCompleteItem",t,i,n,o),g=i},w.onCompleteAll=function(){console.info("onCompleteAll"),e.close(g)}}]);
"use strict";app.controller("PFFactivityEditCtrl",["$scope","$stateParams","$log","$compile","$state","$rootScope","$timeout","$http","SweetAlert","$document","$filter","$localStorage",function(t,i,a,n,e,o,r,l,c,s,d,u){t.axisList=o.parameters("positiva_fgn_activity_axis"),t.actionList=o.parameters("positiva_fgn_activity_action"),t.activityTypeList=o.parameters("positiva_fgn_gestpos_activity_type"),t.strategyList=o.parameters("positiva_fgn_consultant_strategy"),t.typeList=o.parameters("positiva_fgn_activity_type"),t.groupList=o.parameters("positiva_fgn_activity_group"),t.periodicityList=o.parameters("positiva_fgn_activity_periodicity"),t.isView=u.isView;var f=function(){t.entity={id:i.activityId||0,configId:i.configId,axis:null,action:null,code:null,name:null,goalAnnual:null,type:null,group:null,details:{indicator:[],strategy:[]}}};f(),t.form={submit:function(i){var a=null;if(t.Form=i,i.$invalid){var n=null,a=null;for(n in i)"$"!=n[0]&&(null!==a||i[n].$valid||(a=i[n].$name),i[n].$pristine&&(i[n].$dirty=!0));return angular.element(".ng-invalid[name="+a+"]").focus(),void c.swal("El formulario contiene errores!","Por favor corrige los errores del formulario e intentalo de nuevo.","error")}g()},reset:function(){t.Form.$setPristine(!0),f()}};var g=function(){var i={},n=JSON.stringify(t.entity);return i.data=Base64.encode(n),l({method:"POST",url:"api/positiva-fgn-fgn-activity/save",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(i)}).then(function(i){t.entity.id=i.data.result.id,t.entity.details=i.data.result.details,c.swal("Proceso Exitoso","Se ha almacenado correctamente la información.","success")})["catch"](function(t){a.error(t),c.swal("Error de guardado",t.data.message,"error")})};t.onLoadRecord=function(){if(t.entity.id>0){var i={id:t.entity.id};l({method:"GET",url:"api/positiva-fgn-fgn-activity/get",params:i})["catch"](function(t,i){c.swal("Error","Se ha presentado un error al intentar acceder a la información.","error")}).then(function(i){r(function(){t.entity=i.data.result})})}},t.onLoadRecord(),t.onAddStrategy=function(){r(function(){t.entity.details.strategy.push({id:0,strategy:"",isActive:!0})})},t.onRemoveStrategy=function(i,n){return 0==n?void t.entity.details.strategy.splice(i,1):void c.swal({title:"Está seguro?",text:"Eliminará el registro seleccionado",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Si, eliminar!",cancelButtonText:"No, cancelar!",closeOnConfirm:!0,closeOnCancel:!0},function(n){n&&r(function(){var n=t.entity.details.strategy[i],e={};e.id=n.id,e.detail="strategy",l({method:"POST",url:"api/positiva-fgn-fgn-activity/delete",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(e)}).then(function(a){t.entity.details.strategy.splice(i,1),swal("Eliminado","Registro eliminado satisfactoriamente","info")})["catch"](function(t){a.error(t),c.swal("Error en la eliminación",t.data.message,"error")})})})},t.onAddIndicator=function(){r(function(){t.entity.details.indicator.push({id:0,type:null,periodicity:null,formulation:null,goal:0})})},t.onRemoveIndicator=function(i,n){return 0==n?void t.entity.details.indicator.splice(i,1):void c.swal({title:"Está seguro?",text:"Eliminará el registro seleccionado",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Si, eliminar!",cancelButtonText:"No, cancelar!",closeOnConfirm:!0,closeOnCancel:!0},function(n){n&&r(function(){var n=t.entity.details.indicator[i],e={};e.id=n.id,e.detail="indicator",l({method:"POST",url:"api/positiva-fgn-fgn-activity/delete",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(e)}).then(function(a){t.entity.details.indicator.splice(i,1),swal("Eliminado","Registro eliminado satisfactoriamente","info")})["catch"](function(t){a.error(t),c.swal("Error en la eliminación",t.data.message,"error")})})})},t.calculateGoal=function(t){t.goal=0,t.goal+=t.jan?parseInt(t.jan):0,t.goal+=t.feb?parseInt(t.feb):0,t.goal+=t.mar?parseInt(t.mar):0,t.goal+=t.apr?parseInt(t.apr):0,t.goal+=t.may?parseInt(t.may):0,t.goal+=t.jun?parseInt(t.jun):0,t.goal+=t.jul?parseInt(t.jul):0,t.goal+=t.aug?parseInt(t.aug):0,t.goal+=t.sep?parseInt(t.sep):0,t.goal+=t.oct?parseInt(t.oct):0,t.goal+=t.nov?parseInt(t.nov):0,t.goal+=t.dec?parseInt(t.dec):0},t.onBack=function(){e.go("app.positiva-fgn.fgn-activity-list",{configId:i.configId})},t.valideSingle=function(i){var a=d("filter")(t.entity.details.strategy,{strategy:i});return!!a.length},t.valideSingleIndicator=function(i){var a=d("filter")(t.entity.details.indicator,{type:i});return!!a.length},t.onConfig=function(){e.go("app.positiva-fgn.fgn-activity-config",{configId:i.configId,activityId:t.entity.id})},t.onConfigSectional=function(){e.go("app.positiva-fgn.fgn-activity-config-sectional",{configId:i.configId,activityId:t.entity.id})}}]);
"use strict";app.controller("PFFactivityConfigEditCtrl",["$scope","$stateParams","$log","$compile","$state","$rootScope","$timeout","$http","SweetAlert","$document","$aside","$localStorage",function(t,i,e,a,n,o,r,l,c,s,d,u){var f=e;t.modalityList=o.parameters("positiva_fgn_activity_modality"),t.executionTypeList=o.parameters("positiva_fgn_activity_execution_type"),t.isView=u.isView,t.details=[];var p=function(){t.entity={id:i.activityId,axis:null,action:null,code:null,name:null,hasCoverage:!1,hasCompliance:!1,details:{indicator:[],strategy:[]}},t.gestpos={id:0,fgnActivityId:i.activityId,strategy:null,modality:null,executionType:null,activity:null,task:null,providesCoverage:!1,providesCompliance:!1}};p(),t.form={submit:function(i){var e=null;if(t.Form=i,i.$invalid){var a=null,e=null;for(a in i)"$"!=a[0]&&(null!==e||i[a].$valid||(e=i[a].$name),i[a].$pristine&&(i[a].$dirty=!0));return angular.element(".ng-invalid[name="+e+"]").focus(),void c.swal("El formulario contiene errores!","Por favor corrige los errores del formulario e intentalo de nuevo.","error")}g()},reset:function(){t.Form.$setPristine(!0),p()}};var g=function(){var i={},a=JSON.stringify(t.gestpos);return i.data=Base64.encode(a),l({method:"POST",url:"api/positiva-fgn-fgn-activity-config/save",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(i)}).then(function(i){t.gestpos.activity=null,t.gestpos.task=null,t.gestpos.strategy=null,t.gestpos.modality=null,t.gestpos.executionType=null,t.grid.dataSource.read(),c.swal("Proceso Exitoso","Se ha almacenado correctamente la información.","success")})["catch"](function(t){e.error(t),c.swal("Error de guardado",t.data.message,"error")})};t.onLoadRecord=function(){if(t.entity.id>0){var i={id:t.entity.id};l({method:"GET",url:"api/positiva-fgn-fgn-activity/get",params:i})["catch"](function(t,i){c.swal("Error","Se ha presentado un error al intentar acceder a la información.","error")}).then(function(i){r(function(){t.entity=i.data.result})})}},t.onLoadRecord(),t.onBack=function(){n.go("app.positiva-fgn.fgn-activity-list",{configId:i.configId})},t.onCancel=function(){t.Form={strategy:"",modality:"",executionType:"",activityName:"",taskName:""},t.gestpos={id:0,fgnActivityId:i.activityId,providesCoverage:"",providesCompliance:""}},t.onAddActivity=function(){if(!t.gestpos.strategy)return void c.swal("Valor requerido","Debe seleccionar una estrategia para abrir la ventana de actividades.","warning");t.strategy=t.gestpos.strategy.strategy.value;var i=d.open({templateUrl:o.app.views.urlRoot+"modules/positiva-fgn/fgn/activity-config/activity_task_list.htm",placement:"right",backdrop:"static",size:"lg",controller:"PFFactivityTaskListCtrl",scope:t});i.result.then(function(i){t.gestpos.activity=i.activity,t.gestpos.task=i.task,console.log("response",i)})},r(function(){t.mainGridOptions={dataSource:{type:"odata",transport:{read:{url:"api/positiva-fgn-fgn-activity-config",dataType:"json",type:"POST",data:function(){var t={fgnActivityId:i.activityId,sizeOf:i.activityId};return t}},parameterMap:function(t){return JSON.stringify(t)}},schema:{model:{id:"id"},data:function(t){return t.data||t},total:function(t){return t.recordsTotal||t.data.length||0}},pageSize:10,serverPaging:!0,serverFiltering:!0,serverSorting:!0},sortable:{mode:"multiple"},pageable:{change:function(t){pager.index=t.index,f.info("page.index",pager.index)}},filterable:{mode:"row"},columns:[{field:null,title:"Acciones",filterable:!1,command:[{text:" ",template:"<a class='btn btn-warning btn btn-xs' ng-click='onEditConfig(dataItem)' uib-tooltip='Editar' tooltip-placement='right'><i class='fa fa-pencil'></i></a> "},{text:" ",template:"<a class='btn btn-light-red btn btn-xs' ng-click='onRemoveConfig(dataItem)' uib-tooltip='Eliminar' tooltip-placement='right'><i class='fa fa-trash'></i></a> "}],width:"80px"},{field:"strategy",title:"Estrategia",filterable:!1},{field:"modality",title:"Modalidad",filterable:!1},{field:"executionType",title:"Tipo Ejecución",filterable:!1},{field:"activity",title:"Actividad",filterable:!1},{field:"task",title:"Tarea",filterable:!1}]},t.detailGridOptions=function(t){return{dataSource:{type:"odata",transport:{read:{url:"api/positiva-fgn-fgn-activity-config-subtask",dataType:"json",type:"POST",data:function(){var e={activityConfigId:t.id,sizeOf:i.activityId};return e}},parameterMap:function(t,i){return JSON.stringify(t)}},requestEnd:function(t){},schema:{model:{id:"id"},data:function(t){return t.data||t},total:function(t){return t.recordsTotal||t.data.length||0}},serverPaging:!1,serverSorting:!0,serverFiltering:!1,filter:!1},editable:"incell",edit:function(t){editedRow.model=t.model},scrollable:!1,sortable:!0,pageable:!1,columns:[{title:"Acciones",command:[{text:" ",template:"<a class='btn btn-blue btn btn-xs' ng-click='onConfigSubtask(dataItem)' uib-tooltip='Configurar' tooltip-placement='right'><i class='fa fa-cog'></i></a> "}],width:"80px"},{field:"subtask",title:"Tarea"},{field:"executionType",title:"Tipo Ejecución"},{field:"providesCoverage",title:"Aportar Cobertura"},{field:"providesCompliance",title:"Aporta Cumplimiento"}]}}}),t.$on("kendoWidgetCreated",function(i){void 0!==t.grid&&null!==t.grid||(t.grid=i)}),t.onRemoveConfig=function(i){c.swal({title:"Está seguro?",text:"Eliminará el registro seleccionado",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Si, eliminar!",cancelButtonText:"No, cancelar!",closeOnConfirm:!0,closeOnCancel:!0},function(a){a&&r(function(){var a={};a.id=i.id,l({method:"POST",url:"api/positiva-fgn-fgn-activity-config/delete",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(a)}).then(function(i){t.grid.dataSource.read(),swal("Eliminado","Registro eliminado satisfactoriamente","info")})["catch"](function(t){e.error(t),c.swal("Error en la eliminación",t.data.message,"error")})})})},t.onEditConfig=function(i){var e={id:i.id};l({method:"GET",url:"api/positiva-fgn-fgn-activity-config/get",params:e})["catch"](function(t,i){c.swal("Error","Se ha presentado un error al intentar acceder a la información.","error")}).then(function(i){r(function(){t.gestpos=i.data.result})})},t.onConfigSubtask=function(i){t.configSubtaskId=i.id;var e=d.open({templateUrl:o.app.views.urlRoot+"modules/positiva-fgn/fgn/activity-config/activity_subtask_edit.htm",placement:"right",backdrop:"static",size:"md",controller:"PFFactivitySubtaskEditCtrl",scope:t});e.result.then(function(){t.grid.dataSource.read()})},t.onEdit=function(){o.isView=!1,n.go("app.positiva-fgn.fgn-activity-edit",{configId:i.configId,activityId:t.entity.id})},t.onConfigSectional=function(){n.go("app.positiva-fgn.fgn-activity-config-sectional",{configId:i.configId,activityId:t.entity.id})}}]),app.controller("PFFactivitySubtaskEditCtrl",["$rootScope","$stateParams","$scope","$uibModalInstance","DTOptionsBuilder","DTColumnBuilder","DTColumnDefBuilder","$log","$timeout","SweetAlert","$http","$compile","ListService",function(t,i,e,a,n,o,r,l,c,s,d,u,f){e.executionTypeList=t.parameters("positiva_fgn_activity_execution_type");var p=function(){e.entity={id:e.configSubtaskId,axis:null,action:null,code:null,name:null,mainTask:null,dependenTask:null,hasCoverage:!1,hasCompliance:!1,providesCoverage:!1,providesCompliance:!1,executionType:null}};p(),e.form={submit:function(t){var i=null;if(e.Form=t,t.$invalid){var a=null,i=null;for(a in t)"$"!=a[0]&&(null!==i||t[a].$valid||(i=t[a].$name),t[a].$pristine&&(t[a].$dirty=!0));return angular.element(".ng-invalid[name="+i+"]").focus(),void s.swal("El formulario contiene errores!","Por favor corrige los errores del formulario e intentalo de nuevo.","error")}g()},reset:function(){e.Form.$setPristine(!0),p()}};var g=function(){var t={},i=JSON.stringify(e.entity);return t.data=Base64.encode(i),d({method:"POST",url:"api/positiva-fgn-fgn-activity-config/saveSubtask",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(t)}).then(function(t){s.swal("Proceso Exitoso","Se ha almacenado correctamente la información.","success"),a.close(1)})["catch"](function(t){l.error(t),s.swal("Error de guardado",t.data.message,"error")})};e.onLoadRecord=function(){if(e.entity.id>0){var t={id:e.entity.id,activityId:i.activityId};d({method:"GET",url:"api/positiva-fgn-fgn-activity-config/getSubtask",params:t})["catch"](function(t,i){s.swal("Error","Se ha presentado un error al intentar acceder a la información.","error")}).then(function(t){c(function(){e.entity=t.data.result})})}},e.onLoadRecord(),e.onCloseModal=function(){a.dismiss("cancel")}}]);
"use strict";app.controller("PFFactivityTaskListCtrl",["$scope","$uibModalInstance","DTOptionsBuilder","DTColumnBuilder","DTColumnDefBuilder","$timeout","SweetAlert","$compile",function(t,i,n,a,e,o,s,c){t.dtInstanceActivityTaskList={},t.dtOptionsActivityTaskList=n.newOptions().withBootstrap().withOption("responsive",!0).withOption("ajax",{data:function(i){return i.strategy=t.strategy,JSON.stringify(i)},url:"api/positiva-fgn-fgn-activity-config-activity",type:"POST",beforeSend:function(){},complete:function(){}}).withDataProp("data").withOption("order",[[0,"desc"]]).withOption("serverSide",!0).withOption("processing",!0).withOption("fnPreDrawCallback",function(){return!0}).withOption("fnDrawCallback",function(){d()}).withOption("language",{}).withPaginationType("full_numbers").withOption("createdRow",function(i,n,a){c(angular.element(i).contents())(t)}),t.dtColumnsActivityTaskList=[a.newColumn(null).withTitle("Acciones").withOption("width",90).notSortable().renderWith(function(t){var i="",n='<a class="btn btn-green btn-xs addRow lnk" href="#" uib-tooltip="Agregar"  data-idactivity="'+t.idActivity+'" data-idtask="'+t.idTask+'"     data-activity="'+t.activity+'" data-task="'+t.task+'" data-number="'+t.number+'" >   <i class="glyphicon glyphicon-plus"></i></a> ';return i+=n}),a.newColumn("code").withTitle("Código").withOption("width",200).withOption("defaultContent",""),a.newColumn("activity").withTitle("Actividad").withOption("width",200).withOption("defaultContent",""),a.newColumn("task").withTitle("Tarea").withOption("width",200).withOption("defaultContent","")];var d=function(){$("#dtActivityTaskList a.addRow").on("click",function(){var t=$(this).data("activity"),n=$(this).data("task"),a=$(this).data("idactivity"),e=$(this).data("idtask"),o=$(this).data("number"),s={activity:{item:t,value:a},task:{item:n,value:e,number:o}};i.close(s)})};t.reloadData=function(){t.dtInstanceActivityTaskList.reloadData()},t.onCloseModal=function(){i.dismiss()}}]);
"use strict";app.controller("PFFactivityConfigSectionalEditCtrl",["$scope","$stateParams","$log","DTOptionsBuilder","DTColumnBuilder","$compile","$state","$rootScope","$timeout","$http","$localStorage","SweetAlert","$document","$aside","ListService",function(t,n,i,a,o,e,r,l,c,s,d,f,u,g,p){function v(){var n=[{name:"positiva_fgn_consultant_sectional",criteria:{regionalId:t.entity.regional?t.entity.regional.value:null}}];p.getDataList(n).then(function(n){t.regionalList=n.data.data.regionalList,t.sectionalList=n.data.data.sectionalList},function(n){t.status="Unable to load customer data: "+n.message})}t.typeList=l.parameters("positiva_fgn_consultant_sectional_type"),t.regionalList=[],t.sectionalList=[],t.initialEntity={},t.isView=d.isView;var m=function(){t.entity={id:0,fgnActivityId:n.activityId,axis:null,action:null,code:null,name:null,goalAnnual:null,goalCoverage:0,goalCompliance:0,regional:null,sectional:null,details:{indicator:[]}}};m(),v(),t.filterSectional=function(){t.entity.sectional=null,v()},t.form={submit:function(n){var i=null;if(t.Form=n,n.$invalid){var a=null,i=null;for(a in n)"$"!=a[0]&&(null!==i||n[a].$valid||(i=n[a].$name),n[a].$pristine&&(n[a].$dirty=!0));return angular.element(".ng-invalid[name="+i+"]").focus(),void f.swal("El formulario contiene errores!","Por favor corrige los errores del formulario e intentalo de nuevo.","error")}w()},reset:function(){t.Form.$setPristine(!0),t.entity=angular.copy(t.initialEntity)}};var w=function(){var n={},a=JSON.stringify(t.entity);return n.data=Base64.encode(a),s({method:"POST",url:"api/positiva-fgn-fgn-activity-config-sectional/save",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(n)}).then(function(n){t.form.reset(),t.reloadData(),t.entity.goalCoverage=n.data.result.goalCoverage,t.entity.goalCompliance=n.data.result.goalCompliance,f.swal("Proceso Exitoso","Se ha almacenado correctamente la información.","success")})["catch"](function(t){i.error(t),f.swal("Error de guardado",t.data.message,"error")})};t.onLoadRecord=function(){if(t.entity.fgnActivityId>0){var n={id:t.entity.fgnActivityId};s({method:"GET",url:"api/positiva-fgn-fgn-activity/getClear",params:n})["catch"](function(t,n){f.swal("Error","Se ha presentado un error al intentar acceder a la información.","error")}).then(function(n){c(function(){t.entity=n.data.result,t.initialEntity=angular.copy(n.data.result)})})}},t.onLoadRecord(),t.calculateGoal=function(t){t.goal=0,t.goal+=parseInt(t.jan)>0?parseInt(t.jan):0,t.goal+=parseInt(t.feb)>0?parseInt(t.feb):0,t.goal+=parseInt(t.mar)>0?parseInt(t.mar):0,t.goal+=parseInt(t.apr)>0?parseInt(t.apr):0,t.goal+=parseInt(t.may)>0?parseInt(t.may):0,t.goal+=parseInt(t.jun)>0?parseInt(t.jun):0,t.goal+=parseInt(t.jul)>0?parseInt(t.jul):0,t.goal+=parseInt(t.aug)>0?parseInt(t.aug):0,t.goal+=parseInt(t.sep)>0?parseInt(t.sep):0,t.goal+=parseInt(t.oct)>0?parseInt(t.oct):0,t.goal+=parseInt(t.nov)>0?parseInt(t.nov):0,t.goal+=parseInt(t.dec)>0?parseInt(t.dec):0},t.onBack=function(){r.go("app.positiva-fgn.fgn-activity-list",{configId:n.configId})},t.onCancel=function(){t.form.reset()},t.dtInstanceActivityConfigSectional={},t.dtOptionsActivityConfigSectional=a.newOptions().withBootstrap().withOption("responsive",!0).withOption("ajax",{data:function(t){return t.fgnActivityId=n.activityId,JSON.stringify(t)},url:"api/positiva-fgn-fgn-activity-config-sectional",type:"POST",beforeSend:function(){},complete:function(){}}).withDataProp("data").withOption("order",[[0,"desc"]]).withOption("serverSide",!0).withOption("processing",!0).withOption("fnPreDrawCallback",function(){return!0}).withOption("fnDrawCallback",function(){y()}).withOption("language",{}).withPaginationType("full_numbers").withOption("createdRow",function(n,i,a){e(angular.element(n).contents())(t)}),t.dtColumnsActivityConfigSectional=[o.newColumn(null).withTitle("Acciones").withOption("width",120).notSortable().renderWith(function(t){var n="",i="";if(l.isView)var a='<a class="btn btn-primary btn-xs editRow lnk" href="#" uib-tooltip="Ver"  data-id="'+t.id+'"'+i+' >   <i class="fa fa-eye"></i></a> ';else var a='<a class="btn btn-primary btn-xs editRow lnk" href="#" uib-tooltip="Editar"  data-id="'+t.id+'"'+i+' >   <i class="fa fa-edit"></i></a> ';if(!l.isView)var o='<a class="btn btn-danger btn-xs deleteSectional lnk" href="#"  uib-tooltip="Configurar" data-id="'+t.id+'"'+i+' >   <i class="fa fa-trash"></i></a> ';var e='<a class="btn btn-info btn-xs configConsultant lnk" href="#"  uib-tooltip="Configurar Asesores" data-id="'+t.id+'"'+i+' >   <i class="fa fa-user-circle"></i></a> ';return n+=a,n+=o||"",n+=e}),o.newColumn("regional").withTitle("Regional").withOption("width",200).withOption("defaultContent",""),o.newColumn("sectional").withTitle("Seccional").withOption("width",200).withOption("defaultContent",""),o.newColumn("goalCoverage").withTitle("Meta Cobertura").withOption("width",200).withOption("defaultContent",""),o.newColumn("goalCompliance").withTitle("Meta Cumplimiento").withOption("width",200).withOption("defaultContent","")];var y=function(){$("#dtActivityConfigSectional a.editRow").on("click",function(){var n=$(this).data("id");t.onEditConfig(n)}),$("#dtActivityConfigSectional a.deleteSectional").on("click",function(){var n=$(this).data("id");f.swal({title:"Está seguro?",text:"Eliminará el registro seleccionado.",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Si, eliminar!",cancelButtonText:"No, continuar!",closeOnConfirm:!0,closeOnCancel:!0},function(i){if(i){var a={};a.id=n,s({method:"POST",url:"api/positiva-fgn-fgn-activity-config-sectional/delete",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(a)}).then(function(t){f.swal("Proceso Exitoso","Se ha eliminado correctamente el registro.","success")})["catch"](function(t){f.swal("Error en la eliminación",t.data.message,"error")})["finally"](function(){t.reloadData(),t.onLoadRecord()})}})}),$("#dtActivityConfigSectional a.configConsultant").on("click",function(){var n=$(this).data("id");t.onConfigConsultant(n)})};t.reloadData=function(){t.dtInstanceActivityConfigSectional.reloadData()},t.onEditConfig=function(n){var i={id:n};s({method:"GET",url:"api/positiva-fgn-fgn-activity-config-sectional/get",params:i})["catch"](function(t,n){f.swal("Error","Se ha presentado un error al intentar acceder a la información.","error")}).then(function(n){c(function(){t.entity.id=n.data.result.id,t.entity.sectional=n.data.result.sectional,t.entity.regional=n.data.result.regional,t.entity.details.indicator=n.data.result.details.indicator})})},t.onConfigConsultant=function(n){t.sectionalRelationId=n,g.open({templateUrl:l.app.views.urlRoot+"modules/positiva-fgn/fgn/activity-config-sectional/config_consultant_edit.htm",placement:"right",backdrop:"static",size:"lg",controller:"PFFconfigConsultantEditCtrl",scope:t})},t.onEdit=function(){r.go("app.positiva-fgn.fgn-activity-edit",{configId:n.configId,activityId:t.entity.fgnActivityId})},t.onConfig=function(){r.go("app.positiva-fgn.fgn-activity-config",{configId:n.configId,activityId:t.entity.fgnActivityId})}}]);
"use strict";app.controller("PFFconfigConsultantEditCtrl",["$scope","$rootScope","$stateParams","$log","DTOptionsBuilder","DTColumnBuilder","$localStorage","$compile","$state","$timeout","$uibModalInstance","$http","SweetAlert","ModuleListService",function(t,i,a,n,e,o,l,s,r,c,u,d,y,g){function f(){var i=[{name:"strategy_list",value:t.sectionalRelationId},{name:"consultant_list",value:t.sectionalRelationId}];g.getDataList("/positiva-fgn-fgn-activity-config-consultant/config",i).then(function(i){t.strategyList=i.data.result.strategyList,t.consultantList=i.data.result.consultantList},function(i){t.status="Unable to load customer data: "+i.message})}t.activityList=[],t.taskList=[],t.strategyList=[],t.modalityList=[],t.consultantList=[],t.initialEntity={},t.isView=l.isView;var p=function(){t.entity={id:0,sectionalRelationId:t.sectionalRelationId,axis:null,action:null,code:null,name:null,goalCoverage:0,goalCompliance:0,assignmentCoverage:0,assignmentCompliance:0,regional:null,sectional:null,activity:null,gestposTask:null,modality:null,executionType:null,activityConfigId:0,isOccasional:!1,consultant:null,details:{indicator:[],strategy:[]}}};p(),f(),t.filterActivity=function(){t.entity.activity=null,t.entity.gestposTask=null,t.entity.modality=null,t.entity.executionType=null,t.entity.activityConfigId=0;var i=[{name:"activity_list",value:t.sectionalRelationId,strategy:t.entity.strategy.value}];g.getDataList("/positiva-fgn-fgn-activity-config-consultant/config",i).then(function(i){t.activityList=i.data.result.activityList},function(i){t.status="Unable to load customer data: "+i.message})},t.filterTask=function(){t.entity.gestposTask=null,t.entity.modality=null,t.entity.executionType=null,t.entity.activityConfigId=0;var i=[{name:"task_list",value:t.sectionalRelationId,activity:t.entity.activity.value,strategy:t.entity.strategy.value}];g.getDataList("/positiva-fgn-fgn-activity-config-consultant/config",i).then(function(i){t.taskList=i.data.result.taskList},function(i){t.status="Unable to load customer data: "+i.message})},t.filterModality=function(){var i=[{name:"modality_list",value:t.sectionalRelationId,activity:t.entity.activity.value,task:t.entity.gestposTask.value,strategy:t.entity.strategy.value}];g.getDataList("/positiva-fgn-fgn-activity-config-consultant/config",i).then(function(i){t.modalityList=i.data.result.modalityList},function(i){t.status="Unable to load customer data: "+i.message})},t.getConfig=function(){var i=[{name:"activity_config",value:t.sectionalRelationId,strategy:t.entity.strategy.value,activity:t.entity.activity.value,task:t.entity.gestposTask.value,modality:t.entity.modality.value}];g.getDataList("/positiva-fgn-fgn-activity-config-consultant/config",i).then(function(i){t.entity.executionType=i.data.result.executionType,t.entity.activityConfigId=i.data.result.activityConfigId},function(i){t.status="Unable to load customer data: "+i.message})},t.form={submit:function(i){var a=null;if(t.Form=i,i.$invalid){var n=null,a=null;for(n in i)"$"!=n[0]&&(null!==a||i[n].$valid||(a=i[n].$name),i[n].$pristine&&(i[n].$dirty=!0));return angular.element(".ng-invalid[name="+a+"]").focus(),void y.swal("El formulario contiene errores!","Por favor corrige los errores del formulario e intentalo de nuevo.","error")}v()},reset:function(){t.Form.$setPristine(!0),t.entity.id=0,t.entity.strategy=null,t.entity.activity=null,t.entity.gestposTask=null,t.entity.modality=null,t.entity.executionType=null,t.entity.activityConfigId=0,t.entity.consultant=null,t.entity.isOccasional=!1,t.entity.details=angular.copy(t.initialEntity)}};var v=function(){var i={},a=JSON.stringify(t.entity);return i.data=Base64.encode(a),d({method:"POST",url:"api/positiva-fgn-fgn-activity-config-consultant/save",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(i)}).then(function(i){y.swal("Proceso Exitoso","Se ha almacenado correctamente la información.","success"),t.entity.assignmentCompliance=i.data.result.assignmentCompliance,t.entity.assignmentCoverage=i.data.result.assignmentCoverage,t.form.reset(),t.reloadData()})["catch"](function(t){n.error(t),y.swal("Error de guardado",t.data.message,"error")})};t.onLoadRecordActivity=function(){var i={id:a.activityId};d({method:"GET",url:"api/positiva-fgn-fgn-activity/getClear",params:i})["catch"](function(t,i){y.swal("Error","Se ha presentado un error al intentar acceder a la información.","error")}).then(function(i){c(function(){t.entity.axis=i.data.result.axis,t.entity.action=i.data.result.action,t.entity.code=i.data.result.code,t.entity.name=i.data.result.name})})},t.onLoadRecordActivity(),t.onLoadRecordSectional=function(){var i={id:t.sectionalRelationId};d({method:"GET",url:"api/positiva-fgn-fgn-activity-config-sectional/getClear",params:i})["catch"](function(t,i){y.swal("Error","Se ha presentado un error al intentar acceder a la información.","error")}).then(function(i){c(function(){t.entity.regional=i.data.result.regional,t.entity.sectional=i.data.result.sectional,t.entity.details=i.data.result.details,t.entity.goalCoverage=i.data.result.goalCoverage,t.entity.goalCompliance=i.data.result.goalCompliance,t.entity.assignmentCoverage=i.data.result.assignmentCoverage,t.entity.assignmentCompliance=i.data.result.assignmentCompliance,t.initialEntity=angular.copy(i.data.result.details)})})},t.onLoadRecordSectional(),t.calculateGoal=function(t){t.goal=0,parseInt(t.jan)>0&&(t.goal+=parseInt(t.jan)),parseInt(t.feb)>0&&(t.goal+=parseInt(t.feb)),parseInt(t.mar)>0&&(t.goal+=parseInt(t.mar)),parseInt(t.apr)>0&&(t.goal+=parseInt(t.apr)),parseInt(t.may)>0&&(t.goal+=parseInt(t.may)),parseInt(t.jun)>0&&(t.goal+=parseInt(t.jun)),parseInt(t.jul)>0&&(t.goal+=parseInt(t.jul)),parseInt(t.aug)>0&&(t.goal+=parseInt(t.aug)),parseInt(t.sep)>0&&(t.goal+=parseInt(t.sep)),parseInt(t.oct)>0&&(t.goal+=parseInt(t.oct)),parseInt(t.nov)>0&&(t.goal+=parseInt(t.nov)),parseInt(t.dec)>0&&(t.goal+=parseInt(t.dec))},t.onClose=function(){u.close(1)},t.onCancel=function(){t.form.reset()};var m="configConsultantEdit-"+window.currentUser.id;t.dtInstanceActivityConfigSectional={},t.dtOptionsActivityConfigSectional=e.newOptions().withBootstrap().withOption("responsive",!0).withOption("ajax",{data:function(i){return i.sectionalRelationId=t.sectionalRelationId,JSON.stringify(i)},url:"api/positiva-fgn-fgn-activity-config-consultant",type:"POST",beforeSend:function(){},complete:function(){}}).withDataProp("data").withOption("stateSave",!0).withOption("stateSaveCallback",function(t,i){l[m]=i}).withOption("stateLoadCallback",function(){return l[m]}).withOption("order",[[0,"desc"]]).withOption("serverSide",!0).withOption("processing",!0).withOption("fnPreDrawCallback",function(){return!0}).withOption("fnDrawCallback",function(){w()}).withOption("language",{}).withPaginationType("full_numbers").withOption("createdRow",function(i,a,n){s(angular.element(i).contents())(t)}),t.dtColumnsActivityConfigSectional=[o.newColumn(null).withTitle("Acciones").withOption("width",120).notSortable().renderWith(function(t){var a="",n="";if(i.isView)var e='<a class="btn btn-primary btn-xs editRow lnk" href="#" uib-tooltip="Ver"  data-id="'+t.id+'"'+n+' >   <i class="fa fa-eye"></i></a> ';else var e='<a class="btn btn-primary btn-xs editRow lnk" href="#" uib-tooltip="Editar"  data-id="'+t.id+'"'+n+' >   <i class="fa fa-edit"></i></a> ';if(!i.isView)var o='<a class="btn btn-danger btn-xs deleteSectional lnk" href="#"  uib-tooltip="Eliminar" data-id="'+t.id+'"'+n+' >   <i class="fa fa-trash"></i></a> ';return a+=e,a+=o||""}),o.newColumn("strategy").withTitle("Estrategia").withOption("width",200).withOption("defaultContent",""),o.newColumn("activity").withTitle("Actividad").withOption("width",200).withOption("defaultContent",""),o.newColumn("task").withTitle("Tarea").withOption("width",200).withOption("defaultContent",""),o.newColumn("consultant").withTitle("Asesor").withOption("width",200).withOption("defaultContent",""),o.newColumn("consultantType").withTitle("Tipo Asesor").withOption("width",200).withOption("defaultContent",""),o.newColumn("providesCoverage").withTitle("Aporta Cob.").withOption("width",200).withOption("defaultContent",""),o.newColumn("goalCoverage").withTitle("Meta Cob.").withOption("width",200).withOption("defaultContent",""),o.newColumn("providesCompliance").withTitle("Aporta Cump.").withOption("width",200).withOption("defaultContent",""),o.newColumn("goalCompliance").withTitle("Meta Cump.").withOption("width",200).withOption("defaultContent","")];var w=function(){$("#dtActivityConfigSectionalConsultant a.editRow").on("click",function(){var i=$(this).data("id");t.onEditConfig(i)}),$("#dtActivityConfigSectionalConsultant a.deleteSectional").on("click",function(){var i=$(this).data("id");y.swal({title:"Está seguro?",text:"Eliminará el registro seleccionado.",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Si, eliminar!",cancelButtonText:"No, continuar!",closeOnConfirm:!0,closeOnCancel:!0},function(a){if(a){var n={};n.id=i,d({method:"POST",url:"api/positiva-fgn-fgn-activity-config-consultant/delete",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(n)}).then(function(i){t.entity.assignmentCompliance=i.data.result.assignmentCompliance,t.entity.assignmentCoverage=i.data.result.assignmentCoverage,y.swal("Proceso Exitoso","Se ha eliminado correctamente el registro.","success")})["catch"](function(t){y.swal("Error en la eliminación",t.data.message,"error")})["finally"](function(){t.reloadData(),t.onLoadRecord()})}})}),$("#dtActivityConfigSectional a.configUser").on("click",function(){var t=$(this).data("id");r.go("app.positiva-fgn.fgn-activity-config-sectional",{configId:a.configId,activityId:t})})};t.reloadData=function(){t.dtInstanceActivityConfigSectional.reloadData()},t.onEditConfig=function(i){var a={id:i};d({method:"GET",url:"api/positiva-fgn-fgn-activity-config-consultant/get",params:a})["catch"](function(t,i){y.swal("Error","Se ha presentado un error al intentar acceder a la información.","error")}).then(function(i){c(function(){t.entity.id=i.data.result.id,t.entity.strategy=i.data.result.strategy,t.entity.activity=i.data.result.activity,t.entity.gestposTask=i.data.result.gestposTask,t.entity.modality=i.data.result.modality,t.entity.executionType=i.data.result.executionType,t.entity.activityConfigId=i.data.result.activityConfigId,t.entity.isOccasional=i.data.result.isOccasional,t.entity.consultant=i.data.result.consultant,t.entity.details.indicator=i.data.result.details.indicator,t.refreshConfigToEdit()})})},t.refreshConfigToEdit=function(){var i=[{name:"activity_list",value:t.sectionalRelationId,strategy:t.entity.strategy.value},{name:"task_list",value:t.sectionalRelationId,activity:t.entity.activity.value,strategy:t.entity.strategy.value},{name:"modality_list",value:t.sectionalRelationId,activity:t.entity.activity.value,task:t.entity.gestposTask.value,strategy:t.entity.strategy.value},{name:"activity_config",value:t.sectionalRelationId,strategy:t.entity.strategy.value,activity:t.entity.activity.value,task:t.entity.gestposTask.value,modality:t.entity.modality.value}];g.getDataList("/positiva-fgn-fgn-activity-config-consultant/config",i).then(function(i){t.activityList=i.data.result.activityList,t.taskList=i.data.result.taskList,t.modalityList=i.data.result.modalityList,t.entity.executionType=i.data.result.executionType,t.entity.activityConfigId=i.data.result.activityConfigId},function(i){t.status="Unable to load customer data: "+i.message})}}]);
"use strict";app.controller("consultantAssignmentCtrl",["$scope","$stateParams","$log","DTOptionsBuilder","DTColumnBuilder","DTColumnDefBuilder","$localStorage","$compile","toaster","$state","$rootScope","$timeout","$http","SweetAlert","$aside","$document","ListService","$cookies",function(t,i,n,o,a,e,l,s,c,r,d,u,w,p,g,h,f,C){function m(){var i=[{name:"positiva_fgn_consultant_sectional",criteria:{regionalId:t.entity.regional?t.entity.regional.value:null}}];f.getDataList(i).then(function(i){t.regionalList=i.data.data.regionalList,t.sectionalList=i.data.data.sectionalList},function(i){t.status="Unable to load customer data: "+i.message})}t.regionalList=[],t.sectionalList=[],t.strategyList=d.parameters("positiva_fgn_consultant_strategy");var v=function(){t.entity={regional:null,sectional:null,strategy:null}};v(),m(),t.filterSectional=function(){t.entity.sectional=null,m()},t.form={submit:function(i){t.Form=i},reset:function(){t.Form.$setPristine(!0),v()}};var O="consultantAssignmentListCtrl-"+window.currentUser.id;t.dtInstancePositivaFgn={},t.dtOptionsPositivaFgn=o.newOptions().withBootstrap().withOption("responsive",!0).withOption("ajax",{data:function(i){return t.entity.regional&&(i.regionalVal=t.entity.regional.value),t.entity.sectional&&(i.sectionalVal=t.entity.sectional.value),t.entity.strategy&&(i.strategyVal=t.entity.strategy.value),JSON.stringify(i)},url:"api/positiva-fgn-fgn-management/filterAssignment",type:"POST",beforeSend:function(){},complete:function(){}}).withDataProp("data").withOption("stateSave",!0).withOption("stateSaveCallback",function(t,i){l[O]=i}).withOption("stateLoadCallback",function(){return l[O]}).withOption("order",[[1,"asc"]]).withOption("serverSide",!0).withOption("processing",!0).withOption("fnPreDrawCallback",function(){return!0}).withOption("fnDrawCallback",function(){y()}).withOption("language",{}).withPaginationType("full_numbers").withOption("createdRow",function(i,n,o){s(angular.element(i).contents())(t)}),t.dtColumnsPositivaFgn=[a.newColumn(null).notSortable().renderWith(function(t){var i="",n="",o='<a class="btn btn-info btn-xs configConsultant lnk margin-top-5 " align="center" href="#"  uib-tooltip="Configurar Asesores" data-id="'+t.id+'" data-activityid="'+t.activityId+'" '+n+' >   <i class="fa fa-user-circle"></i></a> ',a='<a class="btn btn-blue btn-xs openConfig lnk margin-top-5 " align="center" href="#"  uib-tooltip="Actividades" data-configid="'+t.configId+'"  '+n+' >   <i class="fa fa-play-circle"></i></a> ',e='<a class="btn btn-info btn-xs openConfigSectional lnk margin-top-5 " align="center" href="#"  uib-tooltip="Seccionales" data-configid="'+t.configId+'" data-activityid="'+t.activityId+'" '+n+' >   <i class="fa fa-th-list"></i></a> ';return i+=o+"</br>",i+=a+"</br>",i+=e+"</br>"}),a.newColumn("axis").withTitle("Eje").withOption("width",200).withOption("defaultContent",""),a.newColumn("action").withTitle("Acción").withOption("width",200).withOption("defaultContent",""),a.newColumn("activityCodeFgn").withTitle("Código").withOption("width",200).withOption("defaultContent",""),a.newColumn("activity").withTitle("Actividad").withOption("width",200).withOption("defaultContent",""),a.newColumn("strategy").withTitle("Estrategia").withOption("width",200).withOption("defaultContent",""),a.newColumn("activityCode").withTitle("Cod. Actividad").withOption("width",200).withOption("defaultContent",""),a.newColumn("activityGestpos").withTitle("Act. CREA").withOption("width",200).withOption("defaultContent",""),a.newColumn("task").withTitle("Tarea").withOption("width",200).withOption("defaultContent",""),a.newColumn("regional").withTitle("Regional").withOption("width",200).withOption("defaultContent",""),a.newColumn("sectional").withTitle("Seccional").withOption("width",200).withOption("defaultContent",""),a.newColumn("goalCoverage").withTitle("Meta Cobertura").withOption("width",200).withOption("defaultContent",""),a.newColumn("pendingCoverage").withTitle("Por Asignar").withOption("width",200).withOption("defaultContent",""),a.newColumn("assignedCoverage").withTitle("Asignado").withOption("width",200).withOption("defaultContent",""),a.newColumn("goalCompliance").withTitle("Meta Cumplimiento").withOption("width",200).withOption("defaultContent",""),a.newColumn("pendingCompliance").withTitle("Por Asignar").withOption("width",200).withOption("defaultContent",""),a.newColumn("assignedCompliance").withTitle("Asignado").withOption("width",200).withOption("defaultContent","")],t.reloadData=function(){t.dtInstancePositivaFgn.reloadData()},t.onFilter=function(){t.reloadData()};var y=function(){$("#dtPositivaFgn a.configConsultant").on("click",function(){var n=$(this).data("id"),o=$(this).data("activityid");i.activityId=o,t.onConfigConsultant(n)}),$("#dtPositivaFgn a.openConfig").on("click",function(){var t=$(this).data("configid"),i=r.href("app.positiva-fgn.fgn-activity-list",{configId:t});window.open(i,"_blank")}),$("#dtPositivaFgn a.openConfigSectional").on("click",function(){var t=$(this).data("configid"),i=$(this).data("activityid"),n=r.href("app.positiva-fgn.fgn-activity-config-sectional",{configId:t,activityId:i});window.open(n,"_blank")})};t.onConfigConsultant=function(i){t.sectionalRelationId=i,g.open({templateUrl:d.app.views.urlRoot+"modules/positiva-fgn/fgn/activity-config-sectional/config_consultant_edit.htm",placement:"right",backdrop:"static",size:"lg",controller:"PFFconfigConsultantEditCtrl",scope:t})}}]);
"use strict";app.controller("PFManagement",["$scope","$stateParams","$log","$compile","$rootScope","$timeout",function(e,t,n,o,c,a){e.pf_management_section="all",e.currentId=0,e.editMode="create",e.navToSection=function(t,n,o){a(function(){e.pf_management_section=t,e.editMode=n,e.currentId=o})}}]);
app.controller("PFManagementTabsCtrl",["$scope","$state",function(a,n){a.activeTab=n.is("app.positiva-fgn.fgn-management-axis-programming")?1:2,a.switchTab=function(i){a.activeTab=i,1==i?n.go("app.positiva-fgn.fgn-management-axis-programming"):n.go("app.positiva-fgn.fgn-management-axis-execution")}}]);
app.controller("positivafgnManagementFormCtrl",["$scope","$stateParams","$log","$state","$rootScope","$timeout","$http","SweetAlert","ListService","ModuleListService","PFManagementService","$cookies",function(i,t,a,n,e,o,s,c,r,u,l,f){function d(){var t=[{name:"positiva_fgn_consultant_all_sectional",criteria:{userId:window.currentUser.id}}];r.getDataList(t).then(function(t){i.sectionalList=t.data.data.sectionalList},function(t){i.status="Unable to load customer data: "+t.message})}function g(){var t=[{name:"positiva_fgn_period",value:null},{name:"info_basic",value:window.currentUser.id}];u.getDataList("/positiva-fgn-fgn-management/config",t).then(function(t){o(function(){i.periodoList=t.data.result.positivaFgnPeriod,i.infoBasic=t.data.result.infoBasic;var a=f.getObject("pfManagementForm-"+i.action+window.currentUser.id);a&&a.id===i.infoBasic.id&&(i.infoBasic=a,i.getAxis())})},function(t){i.status="Unable to load activity data: "+t.message})}i.documentTypeList=e.parameters("employee_document_type"),i.genderList=e.parameters("gender"),i.action=n.is("app.positiva-fgn.fgn-management-axis-programming")?"programming":"execution",l.setAction(i.action),i.sectionalList=[],i.periodoList=[],i.axisList=[],i.axisStats={currentHours:0,pendingHours:0,hourPercentage:0,currentActivitiesCom:0,pendingActivitiesCom:0,activityPercentageCom:0,currentActivitiesCov:0,pendingActivitiesCov:0,activityPercentageCov:0},i.infoBasic={documentNumber:null,documentType:null,fullName:null,gender:null,id:null,sectional:null,period:null,axis:null},i.options={unit:"%",readOnly:!0,displayPrevious:!0,barCap:25,trackWidth:20,barWidth:20,trackColor:"rgba(92,184,92,.1)",barColor:"#5BC01E",textColor:"#000"},d(),g(),i.getAxis=function(){if(i.infoBasic.id&&i.infoBasic.period){var t=[{name:"axis_list",value:i.infoBasic.id,config:i.infoBasic.period.config,sectionalId:i.infoBasic.sectional.value},{name:"axis_stats",consultantId:i.infoBasic.id,sectionalId:i.infoBasic.sectional.value,period:i.infoBasic.period.value,config:i.infoBasic.period.config,action:i.action}];f.putObject("pfManagementForm-"+i.action+window.currentUser.id,i.infoBasic),u.getDataList("/positiva-fgn-fgn-management/config",t).then(function(t){o(function(){i.axisList=t.data.result.axisList,i.axisStats=t.data.result.axisStats})},function(t){i.status="Unable to load activity data: "+t.message})}},i.openAxis=function(t){i.infoBasic.axis=t,l.setInfoBasic(i.infoBasic),n.go("app.positiva-fgn.fgn-management-activity")},i.onContinue=function(){i.infoBasic.axis=i.axisList[0],l.setInfoBasic(i.infoBasic),n.go("app.positiva-fgn.fgn-management-activity")}}]);
app.controller("PFManagementListCtrl",["$scope","$stateParams","$log","DTOptionsBuilder","DTColumnBuilder","DTColumnDefBuilder","$localStorage","$compile","$aside","$state","$rootScope","PFManagementService",function(t,i,n,e,o,a,l,r,w,c,p,d){d.getInfoBasic()||c.go("app.positiva-fgn.fgn-management-axis-programming"),t.documentTypeList=p.parameters("employee_document_type"),t.genderList=p.parameters("gender"),t.entity=d.getInfoBasic(),t.action=d.getAction();var u="managementListCtrl-"+window.currentUser.id;t.dtInstancePositivaFgn={},t.dtOptionsPositivaFgn=e.newOptions().withBootstrap().withOption("responsive",!0).withOption("ajax",{data:function(i){return t.entity.axis.axis&&(i.axisVal=t.entity.axis.axis),t.entity.period.value&&(i.periodVal=t.entity.period.value),t.entity.period.config&&(i.configVal=t.entity.period.config),t.entity.sectional.value&&(i.sectionalVal=t.entity.sectional.value),t.entity.id&&(i.consultantVal=t.entity.id),i.action=t.action,JSON.stringify(i)},url:"api/positiva-fgn-fgn-management/activitiesProgrammingExecution",type:"POST",beforeSend:function(){},complete:function(){}}).withDataProp("data").withOption("stateSave",!0).withOption("stateSaveCallback",function(t,i){l[u]=i}).withOption("stateLoadCallback",function(){return l[u]}).withOption("order",[[0,"desc"]]).withOption("serverSide",!0).withOption("processing",!0).withOption("fnPreDrawCallback",function(){return!0}).withOption("fnDrawCallback",function(){h()}).withOption("language",{}).withPaginationType("full_numbers").withOption("createdRow",function(i){r(angular.element(i).contents())(t)}),t.dtInstancePositivaFgnCallback=function(i){t.dtInstancePositivaFgn=i},t.dtColumnsPositivaFgn=[o.newColumn(null).withTitle("Acciones").withOption("width",120).notSortable().renderWith(function(t){var i="",n="",e='<a class="btn btn-blue btn-xs configRow lnk" href="#"  uib-tooltip="Configurar" data-id="'+t.id+'"'+n+' >   <i class="fa fa-cog"></i></a> ';return i+=e}),o.newColumn("action").withTitle("Acción").withOption("width",200).withOption("defaultContent",""),o.newColumn("activity").withTitle("Actividad").withOption("width",200).withOption("defaultContent",""),o.newColumn("strategy").withTitle("Estrategia").withOption("width",200).withOption("defaultContent",""),o.newColumn("modality").withTitle("Modalidad").withOption("width",200).withOption("defaultContent",""),o.newColumn("activityCode").withTitle("Cod Act").withOption("width",200).withOption("defaultContent",""),o.newColumn("activityGestpos").withTitle("Actividad CREA").withOption("width",200).withOption("defaultContent",""),o.newColumn("task").withTitle("Tarea").withOption("width",200).withOption("defaultContent",""),o.newColumn("goalCompliance").withTitle("Meta Cumplimiento").withOption("width",200).withOption("defaultContent",""),o.newColumn("programCompliance").withTitle("Programado").withOption("width",200).withOption("defaultContent",""),o.newColumn("programPercentCompliance").withTitle("% Programación").withOption("width",200).withOption("defaultContent",""),o.newColumn("goalCoverage").withTitle("Meta Cobertura").withOption("width",200).withOption("defaultContent",""),o.newColumn("programCoverage").withTitle("Programado").withOption("width",200).withOption("defaultContent",""),o.newColumn("programPercentCoverage").withTitle("% Programación").withOption("width",200).withOption("defaultContent","")],"execution"==t.action&&(t.dtColumnsPositivaFgn[9]=o.newColumn("executedCompliance").withTitle("Ejecutado").withOption("width",200).withOption("defaultContent",""),t.dtColumnsPositivaFgn[10]=o.newColumn("executedPercentCompliance").withTitle("% Ejecución").withOption("width",200).withOption("defaultContent",""),t.dtColumnsPositivaFgn[12]=o.newColumn("executedCoverage").withTitle("Ejecutado").withOption("width",200).withOption("defaultContent",""),t.dtColumnsPositivaFgn[13]=o.newColumn("executedPercentCoverage").withTitle("% Ejecución").withOption("width",200).withOption("defaultContent","")),t.reloadData=function(){t.dtInstancePositivaFgn.reloadData()};var h=function(){$("#dtPositivaFgn a.configRow").on("click",function(){var i=$(this).data("id");t.onConfig(i)})};t.onBack=function(){"programming"==t.action?c.go("app.positiva-fgn.fgn-management-axis-programming"):c.go("app.positiva-fgn.fgn-management-axis-execution")},t.onConfig=function(i){t.modalId=i;var n=w.open({templateUrl:p.app.views.urlRoot+"modules/positiva-fgn/management/management_modal.htm",placement:"right",windowTopClass:"top-modal",size:"lg",backdrop:"static",controller:"PFmanagementModalCtrl",scope:t});n.result.then(function(){t.reloadData()})},t.onExec=function(){d.setAction("execution"),c.reload()},t.onProgram=function(){d.setAction("programming"),c.reload()}}]);
"use strict";app.factory("PFManagementService",function(){var n={},t=null,c=null;return n.setInfoBasic=function(n){t=n},n.getInfoBasic=function(){return t},n.setAction=function(n){c=n},n.getAction=function(){return c},n});
app.controller("PFmanagementModalCtrl",["$scope","$stateParams","$log","$uibModalInstance","DTOptionsBuilder","DTColumnBuilder","DTColumnDefBuilder","$compile","toaster","$state","$rootScope","$timeout","$http","SweetAlert","$aside","$document","PFManagementService","$q",function(t,a,e,n,o,i,r,l,c,s,d,u,p,m,g,f,v,y){t.infoBasic=v.getInfoBasic(),t.action=v.getAction(),t.adviceTypeList=d.parameters("positiva_fgn_gestpos_advice_type"),t.participationPercentage=0,t.totalValues=0,t.totalCompliance=0,t.totalComplianceExec=0,t.taskInfo={},d.dirty=!1;var h=function(){t.entity={id:t.modalId,managementType:null,regional:null,sectional:null,axis:null,action:null,fgnCode:null,activity:null,period:null,goal:null,type:null,strategy:null,modality:null,executionType:null,gestposCode:null,activityGestpos:null,goalCoverage:null,goalCompliance:null,providesCoverage:null,providesCompliance:null,task:null,consultant:null,adviceType:null,oldAdviceType:null,indicators:{coverage:[],compliance:[]},indicatorRelationId:null,sectionalConsultantRelationId:null}};h(),t.form={submit:function(a){if(console.log("call to save request"),console.log(a),t.Form=a,a.$invalid){var e=null,n=null;for(e in a)"$"!=e[0]&&(null!==n||a[e].$valid||(n=a[e].$name),a[e].$pristine&&(a[e].$dirty=!0));return console.log(n),angular.element(".ng-invalid[name="+n+"]").focus(),void m.swal("El formulario contiene errores!","Por favor corrige los errores del formulario e intentalo de nuevo.","error")}w()},reset:function(){t.Form.$setPristine(!0),h()}};var w=function(){var a={},n=JSON.stringify(t.entity);return a.data=Base64.encode(n),p({method:"POST",url:"api/positiva-fgn-fgn-management/save",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(a)}).then(function(a){m.swal("Proceso Exitoso","Se ha almacenado correctamente la información.","success"),t.entity=a.data.result})["catch"](function(t){e.error(t),m.swal("Error de guardado",t.data.message,"error")})};t.onLoadRecord=function(){if(t.entity.id){var a={id:t.entity.id,period:t.infoBasic.period.value};p({method:"GET",url:"api/positiva-fgn-fgn-management/get",params:a})["catch"](function(t,a){m.swal("Error","Se ha presentado un error al intentar acceder a la información.","error")}).then(function(a){u(function(){t.entity=a.data.result,t.entity.goalCompliance=parseInt(t.entity.goalCompliance),t.entity.goalCoverage=parseInt(t.entity.goalCoverage),t.entity.managementType=t.action,t.calculeInfoCoverage(),t.calculeInfoCompliance()})})}},t.onLoadRecord(),t.onFinish=function(){!t.Form.$dirty&&!d.dirty||t.Form.$submitted?n.close(1):t.saveBeforeClose().then(function(t){t&&n.close(1)})},t.showCompliance=function(){return!0},t.showCoverage=function(){return!0},t.valideGoalPrograming=function(a){parseInt(a.programmed)>0&&parseInt(a.programmed)>parseInt(t.entity.goalCompliance)&&(a.programmed=0)},t.valideGoalExecution=function(a){parseInt(a.hourExecuted)>0&&parseInt(a.hourExecuted)>parseInt(t.entity.goalCompliance)&&(a.hourExecuted=0)},t.calculeInfoCoverage=function(){t.totalValues=0,t.participationPercentage=0,t.entity.indicators.coverage&&(t.entity.indicators.coverage.map(function(a){"programming"==t.action?t.totalValues+=parseInt(a.call)>0?parseInt(a.call):0:(t.totalValues+=parseInt(a.assistants)>0?parseInt(a.assistants):0,t.participationPercentage+=parseInt(a.call)>0?parseInt(a.call):0)}),"execution"==t.action&&(t.participationPercentage=parseFloat(parseInt(t.totalValues)/parseInt(t.participationPercentage)*100).toFixed(0)))},t.openCall=function(a){t.taskInfo=a;var e=g.open({templateUrl:d.app.views.urlRoot+"modules/positiva-fgn/management/poblation_modal.htm",placement:"right",windowTopClass:"top-modal",size:"lg",backdrop:"static",controller:"PFmanagementPoblationModalCtrl",scope:t,resolve:{dataSource:{goalCoverage:t.entity.goalCoverage}}});e.result.then(function(e){a.poblation=e,"execution"===t.action?(a.call=e.call,a.assistants=e.assistants):(a.call=0,a.assistants=0,e.map(function(t){a.call+=parseInt(t.call),a.assistants+=parseInt(t.assistants)})),t.calculeInfoCoverage()})},t.calculeInfoCompliance=function(){t.totalCompliance=0,t.totalComplianceExec=0,t.entity.indicators.compliance&&t.entity.indicators.compliance.map(function(a){t.totalCompliance+=parseInt(a.programmed)>0?parseInt(a.programmed):0,"execution"==t.action&&(t.totalComplianceExec+=parseInt(a.executed)>0?parseInt(a.executed):0)})},t.isActiveAdviceType=function(a){return t.entity.adviceType==a},t.onAddComplianceLog=function(a){var e=g.open({templateUrl:d.app.views.urlRoot+"modules/positiva-fgn/management/indicator-logs/compliance_modal.htm",placement:"right",windowTopClass:"top-modal",size:"lg",backdrop:!0,controller:"positivafgnManagemenIndicatorLogstCtrlModalInstanceSide",scope:t,resolve:{dataSource:{action:t.action,task:a,period:t.entity.period}}});e.result.then(function(t){a.executed=t.totalExecuted,a.hourExecuted=t.totalHourExecuted})},t.saveBeforeClose=function(){return y(function(t){setTimeout(function(){m.swal({title:"¿Deseas salir sin guardar?",text:"Tienes cambios realizados sin guardar.",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Salir sin guardar",cancelButtonText:"Cancelar",closeOnConfirm:!0,closeOnCancel:!0},function(a){t(a)})},200)})}}]),app.controller("PFmanagementPoblationModalCtrl",["$scope","$stateParams","$log","$uibModalInstance","DTOptionsBuilder","DTColumnBuilder","DTColumnDefBuilder","$state","$rootScope","$timeout","$http","SweetAlert","$aside","PFManagementService","$localStorage","$compile","dataSource",function(t,a,e,n,o,i,r,l,c,s,d,u,p,m,g,f,v){function y(){var a=t.entity.period.toString(),e=a.substring(0,4),n=a.substring(4);t.datePickerConfig={culture:"es-CO",format:"dd/MM/yyyy",min:new Date(e,n-1,1),max:new Date(e,n,0)}}function h(){var a=JSON.stringify({id:t.entity.indicatorId}),e={data:Base64.encode(a)};d({method:"POST",url:"api/positiva-fgn-fgn-management/getPoblationBase/totals",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(e)}).then(function(a){var e=a.data.result;t.entity.coverages.call=e.totalCalls,t.entity.coverages.assistants=e.totalAssistants,n.close(t.entity.coverages)})["catch"](function(t){u.swal("Error","Se ha presentado un error al cargar la información","error")})}t.activityStateList=c.parameters("positiva_fgn_gestpos_activity_states"),t.action=m.getAction(),t.totalValues=0,t.programmed=[],y(),t.onClose=function(){"execution"===t.action?h():(c.dirty=t.Form.$dirty,n.close(t.entity.coverages))},t.initialize=function(){t.entity={id:null,managementType:t.action,indicatorId:t.taskInfo.id,goalCoverage:v.goalCoverage,identityGroup:null,date:null,activityState:null,coverages:[]}},t.initialize(),t.form={submit:function(a){if(t.Form=a,a.$valid)return void w();var e=null,n=null;for(e in a)"$"!=e[0]&&(null!==n||a[e].$valid||(n=a[e].$name),a[e].$pristine&&(a[e].$dirty=!0));angular.element(".ng-invalid[name="+n+"]").focus(),u.swal("El formulario contiene errores!","Por favor corrige los errores del formulario e intentalo de nuevo.","error")},reset:function(){t.entity.id=null,t.entity.date="",t.entity.activityState=null,t.entity.coverages=angular.copy(t.programmed),t.Form.$setPristine(!0)}};var w=function(){var a=JSON.stringify(t.entity),n={data:Base64.encode(a)};return d({method:"POST",url:"api/positiva-fgn-fgn-management/population/save",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(n)}).then(function(a){t.form.reset(),t.reloadData();var e=a.data.result;t.entity.coverages=angular.copy(e),t.programmed=angular.copy(e),u.swal("Proceso Exitoso","Se ha almacenado correctamente la información.","success"),c.dirty=!0})["catch"](function(t){e.error(t),u.swal("Error de guardado",t.data.message,"error")})};t.onLoadRecord=function(a){if(a&&t.taskInfo.poblation)return t.entity.coverages=t.taskInfo.poblation,void(t.programmed=angular.copy(t.taskInfo.poblation));var e={indicatorId:t.entity.indicatorId,date:t.entity.date,action:t.action},n=a?"api/positiva-fgn-fgn-management/getPoblationBase":"api/positiva-fgn-fgn-management/getPoblation";d({method:"GET",url:n,params:e})["catch"](function(t,a){u.swal("Error","Se ha presentado un error al intentar acceder a la información.","error")}).then(function(e){var n=e.data.result;a?(t.entity.coverages=angular.copy(n),t.programmed=angular.copy(n)):(t.entity.activityState=n.activityState,t.entity.coverages=n.coverages,t.entity.date=n.date)})},t.onLoadRecord(!0),t.onFinish=function(){n.dismiss("cancel")},t.dtInstanceIndicatorPopulationCallback=function(a){t.dtInstanceIndicatorPopulation=a},t.dtInstanceIndicatorPopulation={},t.dtOptionsIndicatorPopulation=o.newOptions().withBootstrap().withOption("responsive",!0).withOption("ajax",{data:function(a){return a.indicatorId=t.entity.indicatorId,JSON.stringify(a)},url:"api/positiva-fgn-fgn-management/population",type:"POST",beforeSend:function(){},complete:function(){}}).withDataProp("data").withOption("order",[[0,"desc"]]).withOption("serverSide",!0).withOption("processing",!0).withOption("fnPreDrawCallback",function(){return!0}).withOption("fnDrawCallback",function(){C()}).withOption("language",{}).withPaginationType("full_numbers").withOption("createdRow",function(a,e,n){f(angular.element(a).contents())(t)}),t.dtColumnsIndicatorPopulation=[i.newColumn(null).withTitle("Acciones").withOption("width",120).notSortable().renderWith(function(t){var a="",e="",n='<a class="btn btn-primary btn-xs editRow lnk" href="#" uib-tooltip="Editar"  data-id="'+t.indicatorId+'" data-date="'+t.date+'" "> <i class="fa fa-edit"></i></a> ',o='<a class="btn btn-danger btn-xs delRow lnk" href="#" uib-tooltip="Eliminar" data-id="'+t.indicatorId+'" data-date="'+t.date+'" '+e+' >   <i class="fa fa-trash"></i></a> ';return a+=n,a+=o}),i.newColumn("date").withTitle("Fecha").withOption("width",200).withOption("defaultContent",""),i.newColumn("activityState").withTitle("Estado").withOption("width",200).withOption("defaultContent","")];var C=function(){$("#dtIndicatorPopulation a.editRow").on("click",function(){t.entity.indicatorId=$(this).data("id"),t.entity.date=$(this).data("date"),t.onLoadRecord(!1)}),$("#dtIndicatorPopulation a.delRow").on("click",function(){t.entity.indicatorId=$(this).data("id"),t.entity.date=$(this).data("date"),I()})};t.reloadData=function(){t.dtInstanceIndicatorPopulation.reloadData()};var I=function(){u.swal({title:"Está seguro?",text:"Eliminará el registro seleccionado.",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Si, eliminar!",cancelButtonText:"No, continuar!",closeOnConfirm:!0,closeOnCancel:!0},function(a){if(a){var e={indicatorId:t.entity.indicatorId,date:t.entity.date};d({method:"POST",url:"api/positiva-fgn-fgn-management/population/delete",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(e)}).then(function(a){u.swal("Proceso Exitoso","Se ha eliminado correctamente el registro.","success"),t.onLoadRecord(!0),c.dirty=!0})["catch"](function(t){u.swal("Error en la eliminación","Se ha presentado un error durante la eliminación del registro por favor intentelo de nuevo","error")})["finally"](function(){t.reloadData()})}})}}]);
"use strict";app.controller("positivafgnManagemenIndicatorLogstCtrlModalInstanceSide",["$rootScope","$stateParams","$scope","$uibModalInstance","DTOptionsBuilder","DTColumnBuilder","DTColumnDefBuilder","$localStorage","$log","$timeout","SweetAlert","$http","$compile","dataSource",function(t,n,a,e,i,o,r,l,c,d,s,u,f,m){function p(){var t=m.period.toString(),n=t.substring(0,4),e=t.substring(4);a.datePickerConfig={culture:"es-CO",format:"dd/MM/yyyy",min:new Date(n,e-1,1),max:new Date(n,e,0)}}function w(t){var n=JSON.stringify({id:t}),e={data:Base64.encode(n)};u({method:"POST",url:"api/positiva-fgn-fgn-management/compliance-logs/show",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(e)}).then(function(t){var n=t.data.result;a.entity.id=n.id,a.entity.date=n.date,a.entity.activityState=n.activityState,a.entity.executed=n.executed,a.entity.hourExecuted=n.hourExecuted,a.entity.observation=n.observation,a.entity.satisfactionIndicator45=n.satisfactionIndicator45,a.entity.satisfactionIndicator123=n.satisfactionIndicator123})["catch"](function(){s.swal("Error en la eliminación","Se ha presentado un error al cargar la información","error")})}function h(){var t=JSON.stringify({id:a.entity.indicatorId}),n={data:Base64.encode(t)};u({method:"POST",url:"api/positiva-fgn-fgn-management/compliance-logs/totals",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(n)}).then(function(t){var n=t.data.result;e.close({totalExecuted:n.totalExecuted,totalHourExecuted:n.totalHourExecuted})})["catch"](function(){s.swal("Error en la eliminación","Se ha presentado un error al cargar la información","error")})}a.activityStateList=t.parameters("positiva_fgn_gestpos_activity_states");var g=function(){a.entity={id:null,indicatorId:m.task.id,code:m.task.code,name:m.task.name,type:m.task.type,date:null,activityState:null,programmed:m.task.programmed,executed:0,hourProgrammed:m.task.hourProgrammed,hourExecuted:0,totalExecuted:0,totalProgrammed:0,satisfactionIndicator45:null,satisfactionIndicator123:null,observation:null}};g(),a.onClose=function(){h()},a.onFinish=function(){e.dismiss("cancel")},p(),a.form={submit:function(t){if(a.Form=t,t.$valid)return void v();var n=null,e=null;for(n in t)"$"!=n[0]&&(null!==e||t[n].$valid||(e=t[n].$name),t[n].$pristine&&(t[n].$dirty=!0));angular.element(".ng-invalid[name="+e+"]").focus(),s.swal("El formulario contiene errores!","Por favor corrige los errores del formulario e intentalo de nuevo.","error")},reset:function(){a.Form.$setPristine(!0),g()}};var v=function(){var n=JSON.stringify(a.entity),e={data:Base64.encode(n)};return u({method:"POST",url:"api/positiva-fgn-fgn-management/compliance-logs/store",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(e)}).then(function(n){a.form.reset(),a.reloadData(),s.swal("Proceso Exitoso","Se ha almacenado correctamente la información.","success"),t.dirty=!0})["catch"](function(t){c.error(t),s.swal("Error de guardado",t.data.message,"error")})};a.dtInstanceIndicatorLogsComplianceModal={},a.dtOptionsIndicatorLogsComplianceModal=i.newOptions().withBootstrap().withOption("responsive",!0).withOption("ajax",{data:function(t){return t.indicatorId=a.entity.indicatorId,JSON.stringify(t)},url:"api/positiva-fgn-fgn-management/compliance-logs",type:"POST",beforeSend:function(){},complete:function(){}}).withDataProp("data").withOption("order",[[0,"desc"]]).withOption("serverSide",!0).withOption("processing",!0).withOption("fnPreDrawCallback",function(){return!0}).withOption("fnDrawCallback",function(){y()}).withOption("language",{}).withPaginationType("full_numbers").withOption("createdRow",function(t){f(angular.element(t).contents())(a)}),a.dtColumnsIndicatorLogsModal=[o.newColumn(null).withTitle("Acciones").withOption("width",120).notSortable().renderWith(function(t){var n="",a="",e='<a class="btn btn-primary btn-xs editRow lnk" href="#" uib-tooltip="Editar" data-id="'+t.id+'" > <i class="fa fa-edit"></i></a> ',i='<a class="btn btn-danger btn-xs delRow lnk" href="#" uib-tooltip="Eliminar"  data-id="'+t.id+'"'+a+' >   <i class="fa fa-trash"></i></a> ';return n+=e,n+=i}),o.newColumn("date").withTitle("Fecha").withOption("width",200).withOption("defaultContent",""),o.newColumn("activityState").withTitle("Estado").withOption("width",200).withOption("defaultContent",""),o.newColumn("executed").withTitle("Ejecutado").withOption("width",200).withOption("defaultContent",""),o.newColumn("hour_executed").withTitle("Horas Ejecutadas").withOption("width",200).withOption("defaultContent",""),o.newColumn("satisfactionIndicator45").withTitle("Calif. 4 y 5").withOption("width",200).withOption("defaultContent",""),o.newColumn("satisfactionIndicator123").withTitle("Calif. 1,2 y 3").withOption("width",200).withOption("defaultContent",""),o.newColumn("observation").withTitle("Observación").withOption("width",200).withOption("defaultContent","")];var y=function(){$("#dtIndicatorLogsModal a.editRow").on("click",function(){var t=$(this).data("id");w(t)}),$("#dtIndicatorLogsModal a.delRow").on("click",function(){var t=$(this).data("id");O(t)})};a.reloadData=function(){a.dtInstanceIndicatorLogsComplianceModal.reloadData()};var O=function(n){s.swal({title:"Está seguro?",text:"Eliminará el registro seleccionado.",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Si, eliminar!",cancelButtonText:"No, continuar!",closeOnConfirm:!0,closeOnCancel:!0},function(e){if(e){var i={};i.id=n,u({method:"POST",url:"api/positiva-fgn-fgn-management/compliance-logs/delete",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(i)}).then(function(){s.swal("Proceso Exitoso","Se ha eliminado correctamente el registro.","success"),t.dirty=!0})["catch"](function(){s.swal("Error en la eliminación","Se ha presentado un error durante la eliminación del registro por favor intentelo de nuevo","error")})["finally"](function(){a.reloadData()})}})}}]);
"use strict";app.controller("indicatorsPFgnListCtrl",["$scope","DTOptionsBuilder","DTColumnBuilder","$localStorage","$compile","$state",function(t,i,n,o,a,e){var r="indicatorsPFgnListCtrl-"+window.currentUser.id;t.dtInstancePositivaFgnIndicators={},t.dtOptionsPositivaFgnIndicators=i.newOptions().withBootstrap().withOption("responsive",!0).withOption("ajax",{data:function(t){return JSON.stringify(t)},url:"api/positiva-fgn-fgn-indicator",type:"POST",beforeSend:function(){},complete:function(){}}).withDataProp("data").withOption("stateSave",!0).withOption("stateSaveCallback",function(t,i){o[r]=i}).withOption("stateLoadCallback",function(){return o[r]}).withOption("order",[[0,"asc"]]).withOption("serverSide",!0).withOption("processing",!0).withOption("fnPreDrawCallback",function(){return!0}).withOption("fnDrawCallback",function(){l()}).withOption("language",{}).withPaginationType("full_numbers").withOption("createdRow",function(i,n,o){a(angular.element(i).contents())(t)}),t.dtColumnsPositivaFgnIndicators=[n.newColumn(null).withTitle("Acciones").withOption("width",90).notSortable().renderWith(function(t){var i="",n='<a class="btn btn-blue btn-xs playRow lnk" href="#" uib-tooltip="Ir a reporte"  data-id="'+t.id+'" data-code="'+t.code+'" data-title="'+t.title+'" data-description="'+t.description+'"><i class="fa fa-play-circle"></i></a>';return i+=n}),n.newColumn("title").withTitle("Indicador").withOption("width",200).withOption("defaultContent",""),n.newColumn("description").withTitle("Descripción").withOption("width",200).withOption("defaultContent",""),n.newColumn(null).withTitle("Estado").withOption("width",200).renderWith(function(t){var i="label label-danger",n="Inactivo";return null==t&&void 0==t||1==t.isActive&&(i="label label-success",n="Activo"),'<span class="'+i+'">'+n+"</span>"})];var l=function(){$("#dtPositivaFgnIndicators a.playRow").on("click",function(){var t=$(this).data("code"),i=$(this).data("title"),n=$(this).data("description");o["pfgnInficatorActive"+t]={title:i,description:n},e.go("app.positiva-fgn.fgn-indicators-report",{id:t})})}}]);
app.controller("reportsPFgnTabsCtrl",["$scope","$stateParams","$localStorage",function(t,a,r){var o=a.id;t.idReport=o,t.dataReport=r["pfgnInficatorActive"+o]}]);
"use strict";app.controller("positivaFgnIndicatorsGeneralCtrl",["$scope","$stateParams","$log","DTOptionsBuilder","DTColumnBuilder","DTColumnDefBuilder","$compile","toaster","$state","$rootScope","$timeout","$http","SweetAlert","$document","$filter","$aside","ChartService","ListService","ModuleListService",function(t,a,n,e,i,o,r,l,s,c,u,d,p,f,m,g,v,h,y){function L(){null!=t.entity.period&&null!=t.entity.sectional&&null!=t.entity.axis&&(x(),w())}function x(){var a={period:t.entity.period.value,sectional:t.entity.sectional.value,axis:t.entity.axis.value,userId:c.$id},n=[{name:"positiva_fng_indicators_charts",criteria:a},{name:"chart_bar_options"},{name:"chart_doughnut_options"}];v.getDataChart(n).then(function(a){t.chart.genre=a.data.data.genre,t.chart.genreTotal=a.data.data.genreTotal,t.chart.bar.options=a.data.data.chartBarOptions,t.doughnut=a.data.data.chartDoughnutOptions,t.chart.complianceBySectional=a.data.data.complianceBySectional},function(a){t.status="Unable to load customer data: "+a.message})}function _(){var a=[{name:"positiva_fgn_all_regional_sectional",criteria:{userId:c.$id}}];h.getDataList(a).then(function(a){t.sectionalList=a.data.data.sectionalList},function(a){t.status="Unable to load customer data: "+a.message})}function C(){var a=[{name:"positiva_fgn_period",value:null},{name:"axisByUserIdConsultantList",value:c.$id}];y.getDataList("/positiva-fgn-fgn-management/config",a).then(function(a){t.periodList=a.data.result.positivaFgnPeriod,t.axisList=a.data.result.axisByUserIdConsultantList},function(a){t.status="Unable to load activity data: "+a.message})}function w(){var a={period:t.entity.period.value,sectional:t.entity.sectional.value,axis:t.entity.axis.value,userId:c.$id},n={data:Base64.encode(JSON.stringify(a))};d({method:"POST",url:"api/positiva-fgn-fgn-indicator/indicators",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(n)}).then(function(a){t.actionList=a.data.result,u(function(){angular.element("li.parentTab0 > a.nav-link").triggerHandler("click")})})["catch"](function(t){p.swal("Error","Ocurrió un problema cargar la información.","error")})}t.entity={userId:c.$id,selectedYear:null,periodChart:null};var T=function(){t.entity={period:null,sectional:null,axis:null}};T(),_(),C(),t.activeTabIndex=0,t.periodList=[],t.sectionalList=[],t.axisList=[],t.actionList=[],t.experienceOptionsList=[],t.sceneOptionsList=[],t.sceneList=[],t.chart={bar:{options:null},doughnut:{options:null},genre:null,genreTotal:null,complianceBySectional:null},t.form={submit:function(a){if(t.Form=a,a.$invalid){var n=null,e=null;for(n in a)"$"!=n[0]&&(null!==e||a[n].$valid||(e=a[n].$name),a[n].$pristine&&(a[n].$dirty=!0));return angular.element(".ng-invalid[name="+e+"]").focus(),void p.swal("El formulario contiene errores!","Por favor corrige los errores del formulario e intentalo de nuevo.","error")}L()},reset:function(){t.Form&&t.Form.$setPristine(!0),T()}},t.onConsolidate=function(){d({method:"POST",url:"api/positiva-fgn-fgn-indicator/consolidated",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){})["catch"](function(){p.swal("Error","Ocurrió un problema cargar la información.","error")})},t.validateConsolidated=function(){return!(t.entity.period&&t.entity.period.value&&t.entity.sectional&&t.entity.sectional.value&&t.entity.axis&&t.entity.axis.value)},t.onFilter=function(){var a=g.open({templateUrl:c.app.views.urlRoot+"modules/positiva-fgn/indicators/reports/filters/reports_filter_modal.htm",placement:"right",windowTopClass:"top-modal",size:"md",backdrop:!0,controller:"positivaFgnIndicatorsFiltersCtrlModalInstanceSide",scope:t});a.result.then(function(){})},t.onBack=function(){s.go("app.positiva-fgn.fgn-indicators")}}]);
"use strict";app.controller("positivaFgnIndicatorsActivitysPTACtrl",["$scope","DTOptionsBuilder","DTColumnBuilder","$compile","$state","$rootScope","$http","SweetAlert","$aside","PositivaFGNIndicatorFilterService",function(t,i,n,o,a,e,r,s,c,l){function p(i){i||(i={});var n={data:Base64.encode(JSON.stringify(i))};r({method:"POST",url:"api/positiva-fgn-fgn-indicator/indicators/reports/activities-pta-compliance-axis",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(n)}).then(function(i){t.axisList=i.data.result})["catch"](function(t){s.swal("Error","Ocurrió un problema cargar la información.","error")})}function d(){return{regionals:l.filteredRegionals(),sectionals:l.filteredSectionals(),periods:l.getPeriods(),groups:l.filteredGroups(),axis:l.filteredAxis()}}function u(){var t=angular.element("li.uib-tab.nav-item.ng-scope.ng-isolate-scope.active").attr("index");return 1===t?"compliance":"coverage"}var w=function(){t.entity={userId:e.$id,period:null,sectional:null,axis:null}};w(),p(),t.periodList=[],t.axisList=[],t.options={readOnly:!0,displayPrevious:!0,barCap:25,trackWidth:20,barWidth:20,trackColor:"rgba(92,184,92,.1)",barColor:"#5BC01E",textColor:"#000"},t.dtInstanceActivitysPTACallback=function(i){t.dtInstanceActivitysPTACallback=i},t.dtInstanceActivitysPTACallback={},t.dtOptionsActivitysPTA=i.newOptions().withBootstrap().withOption("responsive",!0).withOption("searching",!1).withOption("ordering",!1).withOption("ajax",{data:function(t){return t.customFilter=d(),JSON.stringify(t)},url:"api/positiva-fgn-fgn-indicator/indicators/reports/activities-pta-compliance",type:"POST",beforeSend:function(){},complete:function(){}}).withDataProp("data").withOption("stateSave",!0).withOption("serverSide",!0).withOption("processing",!0).withOption("fnPreDrawCallback",function(){return!0}).withOption("fnDrawCallback",function(){f()}).withOption("language",{}).withPaginationType("full_numbers").withOption("createdRow",function(i,n,a){o(angular.element(i).contents())(t)}),t.dtColumnsActivitysPTA=[n.newColumn(null).withTitle("Acciones").withOption("width",120).notSortable().renderWith(function(t){var i="",n='<a class="btn btn-success btn-xs viewIndicator lnk" href="#" uib-tooltip="Continuar" data-id="'+t.id+'"><i class="fa fa-play-circle"></i></a>';return i+=n}),n.newColumn("axis").withTitle("Eje").withOption("width",200),n.newColumn("goalCompliance").withTitle("Meta Cump.").withOption("width",200),n.newColumn("countActivities").withTitle("N° Actividades").withOption("width",200),n.newColumn("percentCompliance").withTitle("Indicador Cumplimiento").withOption("width",120).notSortable().renderWith(function(t){var i;return i=t<75?"danger":t>=75&&t<90?"warning":t>=90&&t<=100?"success":"info",'<uib-progressbar class="border-progress-'+i+'" value="'+t+'" max="100" type="'+i+'" title="'+t+'"><span style="color: black !important;">'+t+"%</span></uib-progressbar>"}),n.newColumn("goalCoverage").withTitle("Meta Cob.").withOption("width",200),n.newColumn("countPopulation").withTitle("N° Población").withOption("width",200),n.newColumn("percentCoverage").withTitle("Indicador Cobertura").withOption("width",120).notSortable().renderWith(function(t){var i;return i=t<75?"danger":t>=75&&t<90?"warning":t>=90&&t<=100?"success":"info",'<uib-progressbar class="border-progress-'+i+'" value="'+t+'" max="100" type="'+i+'" title="'+t+'"><span style="color: black !important;">'+t+"%</span></uib-progressbar>"})];var f=function(){$("#dtActivityPTA a.viewIndicator").on("click",function(){var i=$(this).data("id");t.showDetail(i)})};t.reloadDataActivitysPTA=function(){t.dtInstanceActivitysPTACallback.reloadData()},t.onExportExcel=function(){var t={indicator:u(),filters:d()};jQuery("#downloadDocument")[0].src="api/positiva-fgn-fgn-indicator/indicators/reports/activities-pta-compliance-export?data="+Base64.encode(JSON.stringify(t))},t.onConsolidate=function(){r({method:"POST",url:"api/positiva-fgn-fgn-indicator/consolidated",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){})["catch"](function(){s.swal("Error","Ocurrió un problema cargar la información.","error")})},t.onFilter=function(){var i=c.open({templateUrl:e.app.views.urlRoot+"modules/positiva-fgn/indicators/reports/filters/reports_filter_modal.htm",placement:"right",windowTopClass:"top-modal",size:"md",backdrop:!0,controller:"positivaFgnIndicatorsFiltersCtrlModalInstanceSide",scope:t,resolve:{dataSource:{filters:{division:!0,periods:!0,groups:!0,axis:!0}}}});i.result.then(function(i){var n=d();p(n),t.reloadDataActivitysPTA()})},t.onBack=function(){a.go("app.positiva-fgn.fgn-indicators")},t.showDetail=function(i){var n=u(),o=c.open({templateUrl:e.app.views.urlRoot+"modules/positiva-fgn/indicators/reports/indicators-activitys-pta/details_modal.htm",placement:"right",windowTopClass:"top-modal",size:"lg",backdrop:!0,controller:"positivaFgnIndicatorsActivityPTADetailsCtrlModalInstanceSide",scope:t,resolve:{dataSource:function(){return{axis:i,filters:d(),indicator:n}}}});o.result.then()}}]);
app.controller("positivaFgnIndicatorsActivityPTADetailsCtrlModalInstanceSide",["$rootScope","$stateParams","$scope","$uibModalInstance","$log","$timeout","SweetAlert","$http","toaster","$filter","FileUploader","DTColumnBuilder","DTOptionsBuilder","$compile","dataSource","PositivaFGNIndicatorFilterService",function(t,i,n,e,o,a,l,p,r,w,c,s,d,h,u,O){var C=function(){n.entity={}};C(),n.onCancel=function(){e.dismiss("cancel")},n.dtInstancePositivaFngIndicatorsReportsActivitiesPTADetail={},n.dtOptionsPositivaFngIndicatorsReportsActivitiesPTADetail=d.newOptions().withBootstrap().withOption("responsive",!0).withOption("searching",!1).withOption("ordering",!1).withOption("ajax",{data:function(t){return t.customFilter=u.filters,t.axis=u.axis,JSON.stringify(t)},url:"api/positiva-fgn-fgn-indicator/indicators/reports/activities-pta-compliance-details",type:"POST",beforeSend:function(){},complete:function(){}}).withDataProp("data").withOption("order",[]).withOption("serverSide",!0).withOption("processing",!0).withOption("fnPreDrawCallback",function(){return!0}).withOption("language",{}).withPaginationType("full_numbers").withOption("createdRow",function(t){h(angular.element(t).contents())(n)}),n.dtColumnsPositivaFngIndicatorsReportsActivitiesPTADetail=[s.newColumn("activity").withTitle("Actividad").withOption("width",200).withOption("defaultContent",""),s.newColumn("goalCompliance").withTitle("Meta Cump.").withOption("width",200).withOption("defaultContent",""),s.newColumn("countActivities").withTitle("# actividades").withOption("width",200).withOption("defaultContent",""),s.newColumn("percentCompliance").withTitle("% Cumplimiento").withOption("width",200).withOption("defaultContent",""),s.newColumn("goalCoverage").withTitle("Meta Cob.").withOption("width",200).withOption("defaultContent",""),s.newColumn("population").withTitle("Población").withOption("width",200).withOption("defaultContent",""),s.newColumn("percentCoverage").withTitle("% Cobertura").withOption("width",200).withOption("defaultContent","")]}]);
"use strict";app.controller("positivaFgnIndicatorsFailedActivitiesCtrl",["$scope","DTOptionsBuilder","DTColumnBuilder","$compile","$localStorage","$state","$rootScope","$http","SweetAlert","$aside","PositivaFGNIndicatorFilterService",function(i,t,n,e,o,a,r,l,s,c,d){function p(){return{regionals:d.filteredRegionals(),sectionals:d.filteredSectionals(),periods:d.getPeriods(),groups:d.filteredGroups(),axis:d.filteredAxis()}}i.entity={userId:r.$id,selectedYear:null,periodChart:null};var w=function(){i.entity={period:null,sectional:null,axis:null}};w();var u="positivaFgnIndicatorsActivityFailed-"+window.currentUser.id;i.dtInstanceComplianceActivitysFailedCallback=function(t){i.dtInstancePositivaFgnActivitysFailed=t},i.dtOptionsPositivaFgnIndicatorsActivitysFailed=t.newOptions().withOption("searching",!1).withOption("ordering",!1).withBootstrap().withOption("responsive",!0).withOption("ajax",{data:function(i){return i.customFilter=p(),JSON.stringify(i)},url:"api/positiva-fgn-fgn-indicator/indicators/reports/activities-failed-compliance",type:"POST",beforeSend:function(){},complete:function(){}}).withDataProp("data").withOption("stateSave",!0).withOption("stateSaveCallback",function(i,t){o[u]=t}).withOption("stateLoadCallback",function(){return o[u]}).withOption("order",[]).withOption("serverSide",!0).withOption("processing",!0).withOption("fnPreDrawCallback",function(){return!0}).withOption("language",{}).withPaginationType("full_numbers").withOption("createdRow",function(t){e(angular.element(t).contents())(i)}),i.dtColumnsPositivaFgnIndicatorsActivitysFailed=[n.newColumn("activity").withTitle("Actividad FGN").withOption("width",200),n.newColumn("strategy").withTitle("Estrategia").withOption("width",200),n.newColumn("activityGestpos").withTitle("Actividad Gestpos").withOption("width",200),n.newColumn("task").withTitle("Tarea").withOption("width",200),n.newColumn("asesor").withTitle("Asesor").withOption("width",200),n.newColumn("regional").withTitle("Regional").withOption("width",200),n.newColumn("sectional").withTitle("Seccional").withOption("width",200),n.newColumn("date").withTitle("Fecha").withOption("width",200),n.newColumn("observation").withTitle("Observación").withOption("width",200)],i.reloadData=function(){i.dtInstancePositivaFgnActivitysFailed.reloadData()},i.onExportExcel=function(){var i={filters:p()};jQuery("#downloadDocument")[0].src="api/positiva-fgn-fgn-indicator/indicators/reports/activities-failed-compliance-export?data="+Base64.encode(JSON.stringify(i))},i.onConsolidate=function(){l({method:"POST",url:"api/positiva-fgn-fgn-indicator/consolidated",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(i){})["catch"](function(){s.swal("Error","Ocurrió un problema cargar la información.","error")})},i.onFilter=function(){var t=c.open({templateUrl:r.app.views.urlRoot+"modules/positiva-fgn/indicators/reports/filters/reports_filter_modal.htm",placement:"right",windowTopClass:"top-modal",size:"md",backdrop:!0,controller:"positivaFgnIndicatorsFiltersCtrlModalInstanceSide",scope:i,resolve:{dataSource:{filters:{division:!0,periods:!0,groups:!0,axis:!0}}}});t.result.then(function(){i.reloadData()})},i.onBack=function(){a.go("app.positiva-fgn.fgn-indicators")}}]);
"use strict";app.controller("positivaFgnIndicatorsConsolidatedCtrl",["$scope","DTOptionsBuilder","DTColumnBuilder","$compile","$localStorage","$state","$rootScope","$timeout","$http","SweetAlert","$aside","ChartService","ListService","ModuleListService","PositivaFGNIndicatorFilterService",function(t,i,o,n,e,a,r,s,l,c,d,p,u,w,h){function v(){return{regionals:h.filteredRegionals(),sectionals:h.filteredSectionals(),periods:h.getPeriods(),groups:h.filteredGroups(),axis:h.filteredAxis(),typeIndicator:h.filteredIndicator()}}t.entity={userId:r.$id,selectedYear:null,periodChart:null},t.options={readOnly:!0,displayPrevious:!0,barCap:25,trackWidth:20,barWidth:20,trackColor:"rgba(92,184,92,.1)",barColor:"#5BC01E",textColor:"#000"};var g=function(){t.entity={period:null,sectional:null,axis:null,hide:"compliance"}};g();var C="positivaFgnIndicatorsActivityConsolidatedCompl-"+window.currentUser.id;t.dtInstancePositivaFgnConsolidatedComplianceCallback=function(i){t.dtInstancePositivaFgnConsolidatedCompli=i},t.dtOptionsPositivaFgnConsolidatedCompli=i.newOptions().withOption("searching",!1).withOption("ordering",!1).withBootstrap().withOption("responsive",!0).withOption("ajax",{data:function(t){return t.customFilter=v(),JSON.stringify(t)},url:"api/positiva-fgn-fgn-indicator/indicators/reports/activities-consolidated-compliance",type:"POST",beforeSend:function(){},complete:function(){}}).withDataProp("data").withOption("stateSave",!0).withOption("stateSaveCallback",function(t,i){e[C]=i}).withOption("stateLoadCallback",function(){return e[C]}).withOption("order",[]).withOption("serverSide",!0).withOption("processing",!0).withOption("fnPreDrawCallback",function(){return!0}).withOption("language",{}).withPaginationType("full_numbers").withOption("createdRow",function(i){n(angular.element(i).contents())(t)}),t.dtColumnsPositivaFgnConsolidatedCompli=[o.newColumn("activity").withTitle("Actividad").withOption("width",200),o.newColumn("meta_compliance").withTitle("Meta cumplimiento").withOption("width",200),o.newColumn("executed").withTitle("N° Actividades ejecutadas").withOption("width",200),o.newColumn("percentCompliance").withTitle("Indicador Cumplimiento").withOption("width",120).renderWith(function(t){var i;return i=t<75?"danger":t>=75&&t<90?"warning":t>=90&&t<=100?"success":"info",'<uib-progressbar class="border-progress-'+i+'" value="'+t+'" max="100" type="'+i+'" title="'+t+'"><span style="color: black !important;">'+t+"%</span></uib-progressbar>"})],t.reloadDataCompli=function(){t.dtInstancePositivaFgnConsolidatedCompli.reloadData()};var f="positivaFgnIndicatorsActivityConsolidatedCove-"+window.currentUser.id;t.dtInstancePositivaFgnConsolidatedCoverageCallback=function(i){t.dtInstancePositivaFgnConsolidatedCovera=i},t.dtOptionsPositivaFgnConsolidatedCovera=i.newOptions().withOption("searching",!1).withOption("ordering",!1).withBootstrap().withOption("responsive",!0).withOption("ajax",{data:function(t){return t.customFilter=v(),JSON.stringify(t)},url:"api/positiva-fgn-fgn-indicator/indicators/reports/activities-consolidated-compliance",type:"POST",beforeSend:function(){},complete:function(){}}).withDataProp("data").withOption("stateSave",!0).withOption("stateSaveCallback",function(t,i){e[f]=i}).withOption("stateLoadCallback",function(){return e[f]}).withOption("order",[]).withOption("serverSide",!0).withOption("processing",!0).withOption("fnPreDrawCallback",function(){return!0}).withOption("language",{}).withPaginationType("full_numbers").withOption("createdRow",function(i){n(angular.element(i).contents())(t)}),t.dtColumnsPositivaFgnConsolidatedCovera=[o.newColumn("activity").withTitle("Actividad").withOption("width",200),o.newColumn("meta_coverage").withTitle("Meta cobertura").withOption("width",200),o.newColumn("countPopulation").withTitle("N° Participantes").withOption("width",200),o.newColumn("percentCoverage").withTitle("Indicador Cobertura").withOption("width",120).renderWith(function(t){var i;return i=t<75?"danger":t>=75&&t<90?"warning":t>=90&&t<=100?"success":"info",'<uib-progressbar class="border-progress-'+i+'" value="'+t+'" max="100" type="'+i+'" title="'+t+'"><span>'+t+"%</span></uib-progressbar>"})],t.reloadDataCovera=function(){t.dtInstancePositivaFgnConsolidatedCovera.reloadData()},t.onExportExcel=function(){var t={filters:v()};jQuery("#downloadDocument")[0].src="api/positiva-fgn-fgn-indicator/indicators/reports/activities-consolidated-compliance-export?data="+Base64.encode(JSON.stringify(t))},t.onConsolidate=function(){l({method:"POST",url:"api/positiva-fgn-fgn-indicator/consolidated",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){})["catch"](function(){c.swal("Error","Ocurrió un problema cargar la información.","error")})},t.onFilter=function(){var i=d.open({templateUrl:r.app.views.urlRoot+"modules/positiva-fgn/indicators/reports/filters/reports_filter_modal.htm",placement:"right",windowTopClass:"top-modal",size:"md",backdrop:!0,controller:"positivaFgnIndicatorsFiltersCtrlModalInstanceSide",scope:t,resolve:{dataSource:{filters:{division:!0,periods:!0,groups:!0,axis:!0,indicator:!0}}}});i.result.then(function(){"compliance"===v().typeIndicator?t.reloadDataCompli():t.reloadDataCovera(),t.entity.hide=v().typeIndicator})},t.onBack=function(){a.go("app.positiva-fgn.fgn-indicators")}}]);
"use strict";app.controller("positivaFgnIndicatorsActivitySectionaCtrl",["$scope","$state","$rootScope","$http","SweetAlert","ListService","ModuleListService","ngNotify",function(t,e,i,n,a,o,r,s){function u(){var e=[{name:"positiva_fgn_activity_group",value:null},{name:"export_url",value:null}];o.getDataList(e).then(function(e){t.axis=i.parameters("positiva_fgn_activity_axis"),t.groupList=e.data.data.groupList,t.exportUrl=e.data.data.exportUrl.item},function(e){t.status="Unable to load customer data: "+e.message})}function c(){var e=[{name:"positiva_fgn_period_all",value:null}];r.getDataList("/positiva-fgn-fgn-management/config",e).then(function(e){t.yearList=e.data.result.positivaFgnPeriod},function(e){t.status="Unable to load activity data: "+e.message})}function l(){return{tipIndicator:t.entity.indicator,axis:d.filteredAxis(),periods:d.getPeriods(),groups:d.filteredGroups(),userId:t.entity.userId}}t.exportUrl="";var p=function(){t.entity={userId:i.$id,indicator:"compliance"}};p(),t.tipIndicatorList=[{name:"Cumplimiento",value:"compliance"},{name:"Cobertura",value:"coverage"}],t.monthList=[{item:"Enero",value:"01"},{item:"Febrero",value:"02"},{item:"Marzo",value:"03"},{item:"Abril",value:"04"},{item:"Mayo",value:"05"},{item:"Junio",value:"06"},{item:"Julio",value:"07"},{item:"Agosto",value:"08"},{item:"Septiembre",value:"09"},{item:"Octubre",value:"10"},{item:"Noviembre",value:"11"},{item:"Diciembre",value:"12"}],u(),c(),t.allAxis=function(){t.axis.map(function(t){t.isActive=!0})},t.clearAxis=function(){t.axis.map(function(t){t.isActive=!1})},t.allGroups=function(){t.groupList.map(function(t){t.isActive=!0})},t.clearGroups=function(){t.groupList.map(function(t){t.isActive=!1})},t.clearMonths=function(){t.monthList.map(function(t){t.isActive=!1})},t.onAllMonths=function(){t.monthList.map(function(t){t.isActive=!0})};var d={};d.filteredTipIndicator=function(){var e=[];return t.tipIndicatorList.map(function(t){t.isActive&&e.push(t.value)}),e},d.filteredAxis=function(){var e=[];return t.axis.map(function(t){t.isActive&&e.push(t.value)}),e},d.getPeriods=function(){var e=t.yearList.find(function(t){return t.isActive===t.period}),i=t.monthList.filter(function(t){return t.isActive===!0});if(!e||!i)return[];var n=[];return i.forEach(function(t){n.push(e.period.toString()+t.value)}),n},d.filteredGroups=function(){var e=[];return t.groupList.map(function(t){t.isActive&&e.push(t.value)}),e},t.existsFilterByYear=function(){return t.yearList.some(function(t){return t.isActive===t.period})},t.onCheckMonth=function(e){t.existsFilterByYear()||(e.isActive=!1)},t.onExportExcel=function(){s.set('<div class="row"><div class="col-sm-5"><div class="loader-spinner pull-right"></div> </div> <div class="col-sm-6 text-left">El reporte se está generando. Por favor espere!</div> </div>',{position:"bottom",sticky:!0,button:!1,html:!0});var e={userId:i.currentUser().id,customFilter:l()},a={data:Base64.encode(JSON.stringify(e))};return n({method:"POST",url:t.exportUrl+"api/v1/positiva-fgn/indicator-activity-sectional-export",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(a)}).then(function(e){var i=t.exportUrl+"storage/"+e.data.filename,n='<a class="btn btn-wide btn-default" href="'+i+'" target="_self"><i class="glyphicon glyphicon-download"></i> Descargar el reporte</a>';e.data.isQueue&&(i="app/user/messages",n=e.data.message+' <a  class="btn btn-wide btn-default" href="'+i+'" translate="Ver mensajes"> Ver mensajes </a>'),s.set(n,{position:"bottom",sticky:!0,type:e.data.isQueue?"info":"success",button:!0,html:!0})})["catch"](function(t){null!=t.data&&void 0!==t.data.message?s.set(t.data.message,{position:"bottom",sticky:!0,type:"error",button:!0,html:!0}):s.set("Lo sentimos, ha ocurrido un error en la generación del reporte",{position:"bottom",sticky:!0,type:"error",button:!0,html:!0})})},t.onConsolidate=function(){n({method:"POST",url:"api/positiva-fgn-fgn-indicator/consolidated",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){})["catch"](function(){a.swal("Error","Ocurrió un problema cargar la información.","error")})},t.onBack=function(){e.go("app.positiva-fgn.fgn-indicators")}}]);
"use strict";app.controller("positivaFgnIndicatorsActivitysStrategyCtrl",["$scope","$state","$rootScope","$http","SweetAlert","ListService","ModuleListService","ngNotify",function(t,e,i,n,a,o,r,s){function c(){var e=[{name:"positiva_fgn_consultant_sectional",criteria:{regionalId:null}},{name:"positiva_fgn_all_regional_sectional",criteria:{}},{name:"positiva_fgn_activity_group",value:null},{name:"export_url",value:null}];o.getDataList(e).then(function(e){t.regionals=e.data.data.regionalList,t.sectionals=e.data.data.sectionalList,t.groupList=e.data.data.groupList,t.exportUrl=e.data.data.exportUrl.item},function(e){t.status="Unable to load customer data: "+e.message})}function l(){var e=[{name:"positiva_fgn_period_all",value:null}];r.getDataList("/positiva-fgn-fgn-management/config",e).then(function(e){t.yearList=e.data.result.positivaFgnPeriod},function(e){t.status="Unable to load activity data: "+e.message})}function u(){t.sectionals.map(function(t){t.isActive=!1})}function f(){t.regionals.map(function(t){t.isActive=!1})}function p(){t.regionals.map(function(t){t.isActive=!0})}function v(){t.sectionals.map(function(t){t.isActive=!0})}function d(){return{regionals:m.filteredRegionals(),sectionals:m.filteredSectionals(),estrategys:m.filteredEstrategys(),periods:m.getPeriods(),groups:m.filteredGroups()}}t.exportUrl="";var g=function(){t.entity={userId:i.$id,divion:null}};g(),t.estrategys=i.parameters("positiva_fgn_consultant_strategy"),t.monthList=[{item:"Enero",value:"01"},{item:"Febrero",value:"02"},{item:"Marzo",value:"03"},{item:"Abril",value:"04"},{item:"Mayo",value:"05"},{item:"Junio",value:"06"},{item:"Julio",value:"07"},{item:"Agosto",value:"08"},{item:"Septiembre",value:"09"},{item:"Octubre",value:"10"},{item:"Noviembre",value:"11"},{item:"Diciembre",value:"12"}],c(),l(),t.onChangeDivisionRegional=function(){u()},t.onChangeDivisionSectional=function(){f()},t.onChangeDivisionNational=function(){u(),f()},t.allEstrategys=function(){t.estrategys.map(function(t){t.isActive=!0})},t.clearEstrategys=function(){t.estrategys.map(function(t){t.isActive=!1})},t.allGroups=function(){t.groupList.map(function(t){t.isActive=!0})},t.clearGroups=function(){t.groupList.map(function(t){t.isActive=!1})},t.allCurrentDivision=function(){"regional"===t.entity.division&&p(),"sectional"===t.entity.division&&v()},t.onClearDivisionSectional=function(){u(),f()},t.clearMonths=function(){t.monthList.map(function(t){t.isActive=!1})},t.onAllMonths=function(){t.monthList.map(function(t){t.isActive=!0})};var m={};m.filteredRegionals=function(){var e=[];return t.regionals.map(function(t){t.isActive&&e.push(t.value)}),e},m.filteredSectionals=function(){var e=[];return t.sectionals.map(function(t){t.isActive&&e.push(t.value)}),e},m.filteredEstrategys=function(){var e=[];return t.estrategys.map(function(t){t.isActive&&e.push(t.value)}),e},m.getPeriods=function(){var e=t.yearList.find(function(t){return t.isActive===t.period}),i=t.monthList.filter(function(t){return t.isActive===!0});if(!e||!i)return[];var n=[];return i.forEach(function(t){n.push(e.period.toString()+t.value)}),n},m.filteredGroups=function(){var e=[];return t.groupList.map(function(t){t.isActive&&e.push(t.value)}),e},t.onExportExcel=function(){s.set('<div class="row"><div class="col-sm-5"><div class="loader-spinner pull-right"></div> </div> <div class="col-sm-6 text-left">El reporte se está generando. Por favor espere!</div> </div>',{position:"bottom",sticky:!0,button:!1,html:!0});var e={userId:i.currentUser().id,customFilter:d()},a={data:Base64.encode(JSON.stringify(e))},o=t.exportUrl+"api/v1/positiva-fgn/indicator-estrategy-export";return n({method:"POST",url:o,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(a)}).then(function(e){console.log(e);var i=t.exportUrl+"storage/"+e.data.filename,n='<a class="btn btn-wide btn-default" href="'+i+'" target="_self"><i class="glyphicon glyphicon-download"></i> Descargar el reporte</a>';e.data.isQueue&&(i="app/user/messages",n=e.data.message+' <a  class="btn btn-wide btn-default" href="'+i+'" translate="Ver mensajes"> Ver mensajes </a>'),s.set(n,{position:"bottom",sticky:!0,type:e.data.isQueue?"info":"success",button:!0,html:!0})})["catch"](function(t){null!=t.data&&void 0!==t.data.message?s.set(t.data.message,{position:"bottom",sticky:!0,type:"error",button:!0,html:!0}):s.set("Lo sentimos, ha ocurrido un error en la generación del reporte",{position:"bottom",sticky:!0,type:"error",button:!0,html:!0})})},t.onConsolidate=function(){n({method:"POST",url:"api/positiva-fgn-fgn-indicator/consolidated",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){})["catch"](function(){a.swal("Error","Ocurrió un problema cargar la información.","error")})},t.onBack=function(){e.go("app.positiva-fgn.fgn-indicators")},t.existsFilterByYear=function(){return t.yearList.some(function(t){return t.isActive===t.period})},t.onCheckMonth=function(e){t.existsFilterByYear()||(e.isActive=!1)}}]);
"use strict";app.controller("positivaFgnIndicatorsActivitysConsultantCtrl",["$scope","$state","$rootScope","$http","SweetAlert","ListService","ModuleListService","ngNotify",function(t,e,n,i,a,o,s,r){function l(){var e=[{name:"positiva_fgn_consultant_sectional",criteria:{regionalId:null}},{name:"positiva_fgn_all_regional_sectional",criteria:{}},{name:"export_url",value:null}];o.getDataList(e).then(function(e){t.regionals=e.data.data.regionalList,t.exportUrl=e.data.data.exportUrl.item},function(e){t.status="Unable to load customer data: "+e.message})}function c(){var e=[{name:"positiva_fgn_period_all",value:null}];s.getDataList("/positiva-fgn-fgn-management/config",e).then(function(e){t.yearList=e.data.result.positivaFgnPeriod},function(e){t.status="Unable to load activity data: "+e.message})}function u(){return{regionals:d.filteredRegionals(),sectionals:[],consultants:d.filteredConsultants(),periods:d.getPeriods()}}function f(){var e=[{name:"all_consultant_list",regionalId:d.filteredRegionals()}];s.getDataList("/positiva-fgn-fgn-management/config",e).then(function(e){t.consultantList=e.data.result.allConsultantList},function(e){t.status="Unable to load activity data: "+e.message})}t.exportUrl="";var d={};t.regionals=[];var p=function(){t.entity={userId:n.$id}};p(),t.monthList=[{item:"Enero",value:"01"},{item:"Febrero",value:"02"},{item:"Marzo",value:"03"},{item:"Abril",value:"04"},{item:"Mayo",value:"05"},{item:"Junio",value:"06"},{item:"Julio",value:"07"},{item:"Agosto",value:"08"},{item:"Septiembre",value:"09"},{item:"Octubre",value:"10"},{item:"Noviembre",value:"11"},{item:"Diciembre",value:"12"}],l(),t.clearAllRegional=function(){t.regionals.map(function(t){t.isActive=!1}),t.consultantList=[]},t.selectAllRegionals=function(){t.regionals.map(function(t){t.isActive=!0}),f()},t.clearMonths=function(){t.monthList.map(function(t){t.isActive=!1})},t.onAllMonths=function(){t.monthList.map(function(t){t.isActive=!0})},t.clearConsultants=function(){t.consultantList.map(function(t){t.isActive=!1})},t.onAllConsultants=function(){t.consultantList.map(function(t){t.isActive=!0})},d.filteredRegionals=function(){var e=[];return t.regionals.map(function(t){t.isActive&&e.push(t.value)}),e},d.getPeriods=function(){var e=t.yearList.find(function(t){return t.isActive===t.period}),n=t.monthList.filter(function(t){return t.isActive===!0});if(!e||!n)return[];var i=[];return n.forEach(function(t){i.push(e.period.toString()+t.value)}),i},d.filteredConsultants=function(){var e=[];return t.consultantList.map(function(t){t.isActive&&e.push(t.value)}),e},t.onExportExcel=function(){r.set('<div class="row"><div class="col-sm-5"><div class="loader-spinner pull-right"></div> </div> <div class="col-sm-6 text-left">El reporte se está generando. Por favor espere!</div> </div>',{position:"bottom",sticky:!0,button:!1,html:!0});var e={userId:n.currentUser().id,customFilter:u()},a={data:Base64.encode(JSON.stringify(e))},o=t.exportUrl+"api/v1/positiva-fgn/indicator-consultant-export";return i({method:"POST",url:o,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(a)}).then(function(e){var n=t.exportUrl+"storage/"+e.data.filename,i='<a class="btn btn-wide btn-default" href="'+n+'" target="_self"><i class="glyphicon glyphicon-download"></i> Descargar el reporte</a>';e.data.isQueue&&(n="app/user/messages",i=e.data.message+' <a  class="btn btn-wide btn-default" href="'+n+'" translate="Ver mensajes"> Ver mensajes </a>'),r.set(i,{position:"bottom",sticky:!0,type:e.data.isQueue?"info":"success",button:!0,html:!0})})["catch"](function(t){null!=t.data&&void 0!==t.data.message?r.set(t.data.message,{position:"bottom",sticky:!0,type:"error",button:!0,html:!0}):r.set("Lo sentimos, ha ocurrido un error en la generación del reporte",{position:"bottom",sticky:!0,type:"error",button:!0,html:!0})})},t.onConsolidate=function(){i({method:"POST",url:"api/positiva-fgn-fgn-indicator/consolidated",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){})["catch"](function(){a.swal("Error","Ocurrió un problema cargar la información.","error")})},t.onBack=function(){e.go("app.positiva-fgn.fgn-indicators")},c(),t.onChangeRegional=function(){f()},t.existsFilterByYear=function(){return t.yearList.some(function(t){return t.isActive===t.period})},t.onCheckMonth=function(e){t.existsFilterByYear()||(e.isActive=!1)}}]);
"use strict";app.controller("positivaFgnIndicatorComplianceAxisCtrl",["$scope","DTOptionsBuilder","DTColumnBuilder","$compile","$localStorage","$state","$rootScope","$http","SweetAlert","$aside","PositivaFGNIndicatorFilterService",function(i,t,n,o,e,a,r,l,s,c,p){function d(){return{regionals:p.filteredRegionals(),sectionals:p.filteredSectionals(),periods:p.getPeriods(),groups:p.filteredGroups(),axis:p.filteredAxis(),typeIndicator:"compliance",goalAnnual:"1",provideCompliance:!0}}i.entity={userId:r.$id,selectedYear:null,periodChart:null};var u=function(){i.entity={period:null,sectional:null,axis:null}};u();var w="positivaFgnIndicatorsComplianceAxis-"+window.currentUser.id;i.dtInstanceIndicatorsComplianceAxisCallback=function(t){i.dtInstanceIndicatorsComplianceAxis=t},i.dtOptionsIndicatorsComplianceAxis=t.newOptions().withOption("searching",!1).withOption("ordering",!1).withBootstrap().withOption("responsive",!0).withOption("ajax",{data:function(i){return i.customFilter=d(),JSON.stringify(i)},url:"api/positiva-fgn-fgn-indicator/indicators/reports/activities-consolidated-compliance",type:"POST",beforeSend:function(){},complete:function(){}}).withDataProp("data").withOption("stateSave",!0).withOption("stateSaveCallback",function(i,t){e[w]=t}).withOption("stateLoadCallback",function(){return e[w]}).withOption("order",[]).withOption("serverSide",!0).withOption("processing",!0).withOption("fnPreDrawCallback",function(){return!0}).withOption("language",{}).withPaginationType("full_numbers").withOption("createdRow",function(t,n,e){o(angular.element(t).contents())(i)}),i.dtColumnsIndicatorsComplianceAxis=[n.newColumn("activity").withTitle("Actividad").withOption("width",200),n.newColumn("axis").withTitle("Eje").withOption("width",200),n.newColumn("meta_compliance").withTitle("Meta").withOption("width",200),n.newColumn("executed").withTitle("Ejecución").withOption("width",200),n.newColumn("percentCompliance").withTitle("Indicador Cumplimiento").withOption("width",120).notSortable().renderWith(function(i){var t;return t=i<75?"danger":i>=75&&i<90?"warning":i>=90&&i<=100?"success":"info",'<uib-progressbar class="border-progress-'+t+'" value="'+i+'" max="100" type="'+t+'" title="'+i+'"><span style="color: black !important;">'+i+"%</span></uib-progressbar>"})],i.reloadData=function(){i.dtInstanceIndicatorsComplianceAxis.reloadData()},i.onExportExcel=function(){var i={filters:d()};jQuery("#downloadDocument")[0].src="api/positiva-fgn-fgn-indicator/indicators/reports/activities-failed-compliance-axis-export?data="+Base64.encode(JSON.stringify(i))},i.onConsolidate=function(){l({method:"POST",url:"api/positiva-fgn-fgn-indicator/consolidated",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(i){})["catch"](function(){s.swal("Error","Ocurrió un problema cargar la información.","error")})},i.onFilter=function(){var t=c.open({templateUrl:r.app.views.urlRoot+"modules/positiva-fgn/indicators/reports/filters/reports_filter_modal.htm",placement:"right",windowTopClass:"top-modal",size:"md",backdrop:!0,controller:"positivaFgnIndicatorsFiltersCtrlModalInstanceSide",scope:i,resolve:{dataSource:{filters:{division:!0,periods:!0,groups:!0,axis:!0,indicator:!1}}}});t.result.then(function(t){i.reloadData()})},i.onBack=function(){a.go("app.positiva-fgn.fgn-indicators")}}]);
"use strict";app.controller("positivaFgnIndicatorCoverageAxisCtrl",["$scope","DTOptionsBuilder","DTColumnBuilder","$compile","$localStorage","$state","$rootScope","$http","SweetAlert","$aside","PositivaFGNIndicatorFilterService",function(t,i,e,o,n,r,a,s,l,c,d){function p(){return{regionals:d.filteredRegionals(),sectionals:d.filteredSectionals(),periods:d.getPeriods(),groups:d.filteredGroups(),axis:d.filteredAxis(),typeIndicator:"coverage",goalAnnual:"1",provideCoverage:!0}}t.entity={userId:a.$id,selectedYear:null,periodChart:null};var u=function(){t.entity={period:null,sectional:null,axis:null}};u();var w="positivaFgnIndicatorsCoverageAxis-"+window.currentUser.id;t.dtInstanceIndicatorsCoverageAxisCallback=function(i){t.dtInstanceIndicatorsCoverageAxis=i},t.dtOptionsIndicatorsCoverageAxis=i.newOptions().withOption("searching",!1).withOption("ordering",!1).withBootstrap().withOption("responsive",!0).withOption("ajax",{data:function(t){return t.customFilter=p(),JSON.stringify(t)},url:"api/positiva-fgn-fgn-indicator/indicators/reports/activities-consolidated-compliance",type:"POST",beforeSend:function(){},complete:function(){}}).withDataProp("data").withOption("stateSave",!0).withOption("stateSaveCallback",function(t,i){n[w]=i}).withOption("stateLoadCallback",function(){return n[w]}).withOption("order",[]).withOption("serverSide",!0).withOption("processing",!0).withOption("fnPreDrawCallback",function(){return!0}).withOption("language",{}).withPaginationType("full_numbers").withOption("createdRow",function(i){o(angular.element(i).contents())(t)}),t.dtColumnsIndicatorsCoverageAxis=[e.newColumn("activity").withTitle("Actividad").withOption("width",200),e.newColumn("axis").withTitle("Eje").withOption("width",200),e.newColumn("meta_coverage").withTitle("Meta").withOption("width",200),e.newColumn("countPopulation").withTitle("N° Participantes").withOption("width",200),e.newColumn("percentCoverage").withTitle("Indicador Cobertura").withOption("width",120).renderWith(function(t){var i;return i=t<75?"danger":t>=75&&t<90?"warning":t>=90&&t<=100?"success":"info",'<uib-progressbar class="border-progress-'+i+'" value="'+t+'" max="100" type="'+i+'" title="'+t+'"><span style="color: black !important;">'+t+"%</span></uib-progressbar>"})],t.reloadData=function(){t.dtInstanceIndicatorsCoverageAxis.reloadData()},t.onExportExcel=function(){var t={filters:p()};jQuery("#downloadDocument")[0].src="api/positiva-fgn-fgn-indicator/indicators/reports/activities-failed-coverage-axis-export?data="+Base64.encode(JSON.stringify(t))},t.onConsolidate=function(){s({method:"POST",url:"api/positiva-fgn-fgn-indicator/consolidated",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){})["catch"](function(){l.swal("Error","Ocurrió un problema cargar la información.","error")})},t.onFilter=function(){var i=c.open({templateUrl:a.app.views.urlRoot+"modules/positiva-fgn/indicators/reports/filters/reports_filter_modal.htm",placement:"right",windowTopClass:"top-modal",size:"md",backdrop:!0,controller:"positivaFgnIndicatorsFiltersCtrlModalInstanceSide",scope:t,resolve:{dataSource:{filters:{division:!0,periods:!0,groups:!0,axis:!0}}}});i.result.then(function(){t.reloadData()})},t.onBack=function(){r.go("app.positiva-fgn.fgn-indicators")}}]);
app.controller("positivaFgnIndicatorsFiltersCtrlModalInstanceSide",["$scope","$uibModalInstance","dataSource","PositivaFGNIndicatorFilterService",function(i,n,t,o){function e(){i.sectionalList.map(function(i){i.isActive=!1})}function s(){i.regionalList.map(function(i){i.isActive=!1})}function c(){i.regionalList.map(function(i){i.isActive=!0})}function a(){i.sectionalList.map(function(i){i.isActive=!0})}i.regionalList=o.getRegionals(),i.sectionalList=o.getSectionals(),i.groupList=o.getGroups(),i.axisList=o.getAxis(),i.indicators=o.getAllIndicators(),i.monthList=o.getMonths(),i.yearList=o.getYears(),i.filters=t.filters,i.existsFilterByYear=function(){return i.yearList.some(function(i){return i.isActive===i.period})};var r=i.groupList.some(function(i){return i.isActive===!0}),l=i.axisList.some(function(i){return i.isActive===!0});i.status={openDivision:!0,openPeriods:i.existsFilterByYear(),openGroups:r,openAxis:l,openTipIndicator:!0};var u=function(){i.entity={division:o.getDivision(),regional:null,sectional:null,periods:null,year:null,indicator:o.filteredIndicator()}};u(),i.onCancel=function(){n.dismiss("cancel")},i.onFilter=function(){o.setDivision(i.entity.division),o.setIndicator(i.entity.indicator),n.close(1)},i.onChangeDivisionRegional=function(){e()},i.onChangeDivisionSectional=function(){s()},i.onChangeDivisionNational=function(){e(),s()},i.allGroups=function(){i.groupList.map(function(i){i.isActive=!0})},i.clearGroups=function(){i.groupList.map(function(i){i.isActive=!1})},i.allAxis=function(){i.axisList.map(function(i){i.isActive=!0})},i.clearAxis=function(){i.axisList.map(function(i){i.isActive=!1})},i.allCurrentDivision=function(){"regional"===i.entity.division&&c(),"sectional"===i.entity.division&&a()},i.onClearDivisionSectional=function(){e(),s()},i.clearMonths=function(){i.monthList.map(function(i){i.isActive=!1})},i.onAllMonths=function(){i.existsFilterByYear()&&i.monthList.map(function(i){i.isActive=!0})},i.onCheckMonth=function(n){i.existsFilterByYear()||(n.isActive=!1)}}]);
"use strict";app.factory("PositivaFGNIndicatorFilterService",["$rootScope","ListService","ModuleListService",function(t,e,i){function n(){var t=[{name:"positiva_fgn_consultant_sectional",criteria:{regionalId:null}},{name:"positiva_fgn_all_regional_sectional",criteria:{}}];e.getDataList(t).then(function(t){u=t.data.data.regionalList,c=t.data.data.sectionalList},function(t){$scope.status="Unable to load customer data: "+t.message})}function a(){var t=[{name:"positiva_fgn_period_all",value:null}];i.getDataList("/positiva-fgn-fgn-management/config",t).then(function(t){s=t.data.result.positivaFgnPeriod},function(t){$scope.status="Unable to load activity data: "+t.message})}var o={},r=null,u=[],c=[],s=[],l=[],f=[],v=null,g=[{item:"Enero",value:"01"},{item:"Febrero",value:"02"},{item:"Marzo",value:"03"},{item:"Abril",value:"04"},{item:"Mayo",value:"05"},{item:"Junio",value:"06"},{item:"Julio",value:"07"},{item:"Agosto",value:"08"},{item:"Septiembre",value:"09"},{item:"Octubre",value:"10"},{item:"Noviembre",value:"11"},{item:"Diciembre",value:"12"}];return o.setRegionals=function(t){u=t},o.getRegionals=function(){return u},o.setSectionals=function(t){c=t},o.getSectionals=function(){return c},o.setYears=function(t){s=t},o.getYears=function(){return s},o.getMonths=function(){return g},o.setGroups=function(t){l=t},o.getGroups=function(){return l&&0===l.length&&(l=t.parameters("positiva_fgn_activity_group")),l},o.setAxis=function(t){f=t},o.getAxis=function(){return f&&0===f.length&&(f=t.parameters("positiva_fgn_activity_axis")),f},o.setIndicator=function(t){v=t},o.getAllIndicators=function(){return[{name:"Cumplimiento",value:"compliance"},{name:"Cobertura",value:"coverage"}]},o.setDivision=function(t){r=t},o.getDivision=function(){return r||"national"},o.filteredRegionals=function(){var t=[];return u.map(function(e){e.isActive&&t.push(e.value)}),t},o.filteredSectionals=function(){var t=[];return c.map(function(e){e.isActive&&t.push(e.value)}),t},o.getPeriods=function(){var t=s.find(function(t){return t.isActive===t.period}),e=g.filter(function(t){return t.isActive===!0});if(!t||!e)return[];var i=[];return e.forEach(function(e){i.push(t.period.toString()+e.value)}),i},o.filteredGroups=function(){var t=[];return l.map(function(e){e.isActive&&t.push(e.value)}),t},o.filteredAxis=function(){var t=[];return f.map(function(e){e.isActive&&t.push(e.value)}),t},o.filteredIndicator=function(){return v||"compliance"},n(),a(),o}]);
"use strict";app.controller("positivaFgnSectionalListCtrl",["$scope","$stateParams","$log","DTOptionsBuilder","DTColumnBuilder","DTColumnDefBuilder","$localStorage","$compile","toaster","$state","$rootScope","$timeout","$http","SweetAlert","$aside","$document","ListService",function(t,i,n,a,e,o,l,r,s,c,d,u,f,p,h,w,m){function v(){var i=[{name:"criteria_operators",value:null},{name:"criteria_conditions",value:null},{name:"positiva_fgn_seccionals_filter_field",value:null}];m.getDataList(i).then(function(i){t.criteria=i.data.data.criteriaOperatorList,t.conditions=i.data.data.criteriaConditionList,t.audit.fields=i.data.data.filterField},function(i){t.status="Unable to load customer data: "+i.message})}t.audit={fields:[],filters:[]},v(),t.addFilter=function(){null==t.audit.filters&&(t.audit.filters=[]),t.audit.filters.push({id:0,field:null,criteria:t.criteria.length>0?t.criteria[1]:null,condition:t.conditions.length>0?t.conditions[0]:null,value:""})},t.onFilter=function(){t.reloadData()},t.removeFilter=function(i){t.audit.filters.splice(i,1)},t.onCleanFilter=function(){t.audit.filters=[],t.reloadData()};var g="sectionalListCtrl-"+window.currentUser.id;t.dtInstancePositivaFgn={},t.dtOptionsPositivaFgn=a.newOptions().withBootstrap().withOption("responsive",!0).withOption("ajax",{data:function(i){return angular.isDefined(t.audit)&&angular.isDefined(t.audit.filters)&&(i.filter={filters:t.audit.filters.filter(function(t){return null!=t&&null!=t.field&&null!=t.criteria}).map(function(t,i,n){return{field:t.field.name,operator:t.criteria.value,value:t.value,condition:t.condition.value}})}),JSON.stringify(i)},url:"api/positiva-fgn-sectional",type:"POST",beforeSend:function(){},complete:function(){}}).withDataProp("data").withOption("stateSave",!0).withOption("stateSaveCallback",function(t,i){l[g]=i}).withOption("stateLoadCallback",function(){return l[g]}).withOption("order",[[0,"desc"]]).withOption("serverSide",!0).withOption("processing",!0).withOption("fnPreDrawCallback",function(){return!0}).withOption("fnDrawCallback",function(){O()}).withOption("language",{}).withPaginationType("full_numbers").withOption("createdRow",function(i,n,a){r(angular.element(i).contents())(t)}),t.dtColumnsPositivaFgn=[e.newColumn(null).withTitle("Acciones").withOption("width",120).notSortable().renderWith(function(t){var i="",n="",a='<a class="btn btn-primary btn-xs editRow lnk" href="#"  uib-tooltip="Editar"  data-id="'+t.id+'" data-seccional="'+t.id+'" '+n+'><i class="fa fa-edit"></i></a>',e='<a class="btn btn-danger btn-xs dropRow lnk" href="#"  uib-tooltip="Borrar"  data-id="'+t.id+'" data-seccional="'+t.id+'" '+n+'><i class="fa fa-trash"></i></a>',o='<a class="btn btn-info btn-xs addUser lnk" href="#"  uib-tooltip="Configurar Profesionales" data-id="'+t.id+'" data-seccional="'+t.idSeccional+'" '+n+'><i class="fa fa-user-plus"></i></a>';return i+=a,i+=e,i+=o}),e.newColumn("regional").withTitle("Regional").withOption("width",200).withOption("defaultContent",""),e.newColumn("nit").withTitle("Nit").withOption("width",200).withOption("defaultContent",""),e.newColumn("name").withTitle("Seccional").withOption("width",200).withOption("defaultContent",""),e.newColumn("isActive").withTitle("Estado").withOption("width",200).renderWith(function(t,i,n,a){var e="label label-danger",o="Inactivo";return 1==t&&(e="label label-success",o="Activo"),'<span class="'+e+'">'+o+"</span>"})];var O=function(){$("#dtPositivaFgn a.editRow").on("click",function(){var t=$(this).data("id");C(t)}),$("#dtPositivaFgn a.dropRow").on("click",function(){var t=$(this).data("id");b(t)}),$("#dtPositivaFgn a.addUser").on("click",function(){var t=$(this).data("id"),i=$(this).data("regional"),n=$(this).data("seccional");S(t,i,n)})};t.reloadData=function(){t.dtInstancePositivaFgn.reloadData()},t.onCreate=function(){C(0)};var C=function(i){t.sectionalId=i;var n=h.open({templateUrl:d.app.views.urlRoot+"modules/positiva-fgn/sectionals/sectional_edit_modal.htm",placement:"right",backdrop:"static",size:"md",controller:"SectionalEditModalCtrl",scope:t});n.result.then(function(){t.reloadData()})},b=function(i){p.swal({title:"Está seguro?",text:"Eliminará el registro seleccionado.",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Si, eliminar!",cancelButtonText:"No, continuar!",closeOnConfirm:!0,closeOnCancel:!0},function(n){if(n){var a={id:i};f({method:"POST",url:"api/positiva-fgn-sectional/delete",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(a)}).then(function(t){p.swal("Proceso Exitoso","Se ha eliminado correctamente el registro.","success")})["catch"](function(t){p.swal("Error en la eliminación","Se ha presentado un error durante la eliminación del registro por favor intentelo de nuevo","error")})["finally"](function(){t.reloadData()})}})},S=function(i){t.sectionalId=i;var n=h.open({templateUrl:d.app.views.urlRoot+"modules/positiva-fgn/sectionals/sectional_professional.htm",placement:"right",backdrop:"static",size:"lg",controller:"SectionalProfessionalModalCtrl",scope:t});n.result.then(function(){})}}]);
app.controller("SectionalEditModalCtrl",["$rootScope","$stateParams","$scope","$uibModalInstance","DTOptionsBuilder","DTColumnBuilder","DTColumnDefBuilder","$log","$timeout","SweetAlert","$http","ListService",function(e,n,t,a,o,r,i,l,s,c,u,d){function f(){var e=[{name:"positiva_fgn_consultant_sectional",criteria:{regionalId:null}}];d.getDataList(e).then(function(e){t.regionalList=e.data.data.regionalList},function(e){t.status="Unable to load customer data: "+e.message})}function m(){if(null!=t.entity.id){var e={},n=JSON.stringify({id:t.entity.id});return e.data=Base64.encode(n),u({method:"post",url:"api/positiva-fgn-sectional/show",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(e)}).then(function(e){t.entity=e.data.result})["catch"](function(e){l.error(e),c.swal("Error al consultar la información.",e.data.message,"error")})}}t.regionalList=[];var p=function(){t.entity={id:t.sectionalId||null,regional:null,name:null,nit:null,isActive:!0}};p(),f(),m(),t.form={submit:function(e){if(t.Form=e,e.$valid)return void g();var n=null,a=null;for(n in e)"$"!=n[0]&&(null!==a||e[n].$valid||(a=e[n].$name),e[n].$pristine&&(e[n].$dirty=!0));angular.element(".ng-invalid[name="+a+"]").focus(),c.swal("El formulario contiene errores!","Por favor corrige los errores del formulario e intentalo de nuevo.","error")},reset:function(){t.Form.$setPristine(!0),p()}};var g=function(){var e=JSON.stringify(t.entity),n={data:Base64.encode(e)};return u({method:"POST",url:"api/positiva-fgn-sectional/save",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(n)}).then(function(e){t.form.reset(),c.swal("Proceso Exitoso","Se ha almacenado correctamente la información.","success"),t.onBack()})["catch"](function(e){l.error(e),c.swal("Error de guardado",e.data.message,"error")})};t.onBack=function(){a.close(1)}}]);
"use strict";app.controller("SectionalProfessionalModalCtrl",["$scope","$stateParams","$log","DTOptionsBuilder","DTColumnBuilder","DTColumnDefBuilder","$localStorage","$compile","toaster","$state","$rootScope","$timeout","$http","SweetAlert","$aside","$document","ListService","$uibModalInstance",function(e,t,n,i,o,a,l,r,s,c,u,d,f,p,m,w,h,v){var O=function(){e.entity={id:e.professionalId||0,sectionalId:e.sectionalId,isActiveProfessional:!0,documentType:null,documentNumber:null,fullName:null,job:null,telephone:null,email:null}};O();var g="sectionalProfessionalCtrl-"+window.currentUser.id;e.dtIstanceProfessionalSectional={},e.dtOptionsProfessionalSectional=i.newOptions().withBootstrap().withOption("responsive",!0).withOption("ajax",{data:function(t){return angular.isDefined(e.audit)&&angular.isDefined(e.audit.filters)&&(t.filter={filters:e.audit.filters.filter(function(e){return null!=e&&null!=e.field&&null!=e.criteria}).map(function(e,t,n){return{field:e.field.name,operator:e.criteria.value,value:e.value,condition:e.condition.value}})}),t.sectionalId=e.entity.sectionalId,JSON.stringify(t)},url:"api/positiva-fgn-sectional/professional",type:"POST",beforeSend:function(){},complete:function(){}}).withDataProp("data").withOption("stateSave",!0).withOption("stateSaveCallback",function(e,t){l[g]=t}).withOption("stateLoadCallback",function(){return l[g]}).withOption("order",[[0,"desc"]]).withOption("serverSide",!0).withOption("processing",!0).withOption("fnPreDrawCallback",function(){return!0}).withOption("fnDrawCallback",function(){C()}).withOption("language",{}).withPaginationType("full_numbers").withOption("createdRow",function(t,n,i){r(angular.element(t).contents())(e)}),e.dtColumnsProfessionalSectional=[o.newColumn(null).withTitle("Eliminar").withOption("width",120).notSortable().renderWith(function(e){var t="",n="",i='<div align="center"><a class="btn btn-danger btn-xs deleteProfessional lnk" href="#" uib-tooltip="Editar"  data-id="'+e.id+'" '+n+'><i class="fa fa-edit"></i><i class="fas fa-trash"></i></a></div>';return t+=i}),o.newColumn("documentType").withTitle("Tipo documento").withOption("width",200).withOption("defaultContent",""),o.newColumn("documentNumber").withTitle("# Documento").withOption("width",200).withOption("defaultContent",""),o.newColumn("fullName").withTitle("Profesional").withOption("width",200).withOption("defaultContent",""),o.newColumn("job").withTitle("Cargo").withOption("width",200).withOption("defaultContent",""),o.newColumn("isActive").withTitle("Estado").withOption("width",200).renderWith(function(e){var t="label label-danger",n=e;return"Activo"==e&&(t="label label-success"),'<span class="'+t+'">'+n+"</span>"})];var C=function(){$("#dtProfessionalSectional a.deleteProfessional").on("click",function(){var e=$(this).data("id");P(e)})},P=function(t){p.swal({title:"Está seguro?",text:"Eliminará el registro seleccionado.",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Si, eliminar!",cancelButtonText:"No, continuar!",closeOnConfirm:!0,closeOnCancel:!0},function(n){if(n){var i={id:t};f({method:"POST",url:"api/positiva-fgn-professional/deleteSectional",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(i)}).then(function(e){p.swal("Proceso Exitoso","Se ha eliminado correctamente el registro.","success")})["catch"](function(e){p.swal("Error en la eliminación","Se ha presentado un error durante la eliminación del registro por favor intentelo de nuevo","error")})["finally"](function(){e.dtIstanceProfessionalSectional.reloadData()})}})};e.onCancel=function(){v.close(1)},e.onSelectProfessional=function(){var t=m.open({templateUrl:u.app.views.urlRoot+"modules/positiva-fgn/sectionals/sectional_professional_list.htm",placement:"right",windowTopClass:"top-modal",backdrop:"static",size:"lg",controller:"sectionalProfessionalListCtrl",scope:e});t.result.then(function(t){e.entity={id:null,modulo:"seccionales",professionalId:t.id,isActive:t.isActive,documentType:t.documentType,documentNumber:t.documentNumber,fullName:t.fullName,job:t.job,telephone:t.telephone,email:t.email,sectionalId:e.sectionalId}})},e.onCancel=function(){v.close(1)},e.formProfessional={submit:function(t){if(e.FormProfessional=t,t.$valid)return void S();var n=null,i=null;for(n in t)"$"!=n[0]&&(null!==i||t[n].$valid||(i=t[n].$name),t[n].$pristine&&(t[n].$dirty=!0));angular.element(".ng-invalid[name="+i+"]").focus(),p.swal("El formulario contiene errores!","Por favor corrige los errores del formulario e intentalo de nuevo.","error")},reset:function(){e.FormProfessional.$setPristine(!0),O()}};var S=function(){var t=JSON.stringify(e.entity),n={data:Base64.encode(t)};return f({method:"POST",url:"api/positiva-fgn-professional/saveSectional",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(n)}).then(function(t){""!=t.data.result.id&&(e.formProfessional.reset(),p.swal("Proceso exitoso","Se ha almacenado correctamente la información.","success"))})["catch"](function(e){p.swal("Error de guardado",e.data.message,"error")})["finally"](function(){e.dtIstanceProfessionalSectional.reloadData()})}}]);
"use strict";app.controller("sectionalProfessionalListCtrl",["$scope","$stateParams","$log","$uibModalInstance","DTOptionsBuilder","DTColumnBuilder","DTColumnDefBuilder","$localStorage","$compile","toaster","$state","$rootScope","$timeout","$http","SweetAlert","$aside","$document","ListService",function(t,i,n,e,o,a,l,r,s,u,c,d,f,p,w,h,m,O){t.addFilter=function(){null==t.audit.filters&&(t.audit.filters=[]),t.audit.filters.push({id:0,field:null,criteria:t.criteria.length>0?t.criteria[1]:null,condition:t.conditions.length>0?t.conditions[0]:null,value:""})},t.onFilter=function(){t.reloadData()},t.removeFilter=function(i){t.audit.filters.splice(i,1)},t.onCleanFilter=function(){t.audit.filters=[],t.reloadData()};var C="sectionalProfessionalListCtrl-"+window.currentUser.id;t.dtInstanceProfessionalList={},t.dtOptionsProfessionalList=o.newOptions().withBootstrap().withOption("responsive",!0).withOption("ajax",{data:function(i){return angular.isDefined(t.audit)&&angular.isDefined(t.audit.filters)&&(i.filter={filters:t.audit.filters.filter(function(t){return null!=t&&null!=t.field&&null!=t.criteria}).map(function(t,i,n){return{field:t.field.name,operator:t.criteria.value,value:t.value,condition:t.condition.value}})}),i.sectionalId=t.entity.sectionalId,JSON.stringify(i)},url:"api/positiva-fgn-sectional/listProfessionals",type:"POST",beforeSend:function(){},complete:function(){}}).withDataProp("data").withOption("stateSave",!0).withOption("stateSaveCallback",function(t,i){r[C]=i}).withOption("stateLoadCallback",function(){return r[C]}).withOption("order",[[0,"desc"]]).withOption("serverSide",!0).withOption("processing",!0).withOption("fnPreDrawCallback",function(){return!0}).withOption("fnDrawCallback",function(){v()}).withOption("language",{}).withPaginationType("full_numbers").withOption("createdRow",function(i,n,e){s(angular.element(i).contents())(t)}),t.dtColumnsProfessionalList=[a.newColumn(null).withTitle("Añadir").withOption("width",120).notSortable().renderWith(function(t){var i="",n="",e='<div align="center"><a class="btn btn-success btn-xs addProfessional lnk" href="#" uib-tooltip="Editar"  data-id="'+t.id+'" '+n+'><i class="fas fa-plus"></i></a>';return i+=e}),a.newColumn("documentType").withTitle("Tipo Documento").withOption("width",150).withOption("defaultContent",""),a.newColumn("documentNumber").withTitle("# Documento").withOption("width",170).withOption("defaultContent",""),a.newColumn("fullName").withTitle("Nombre").withOption("width",200).withOption("defaultContent",""),a.newColumn("job").withTitle("Cargo").withOption("width",200).withOption("defaultContent","")];var v=function(){$("#dtProfessionalList a.addProfessional").on("click",function(){var t=$(this).data("id");g(t)})},g=function(t){var i={id:t};t&&p({method:"GET",url:"api/positiva-fgn-professional/get",params:i})["catch"](function(t,i){w.swal("Error","Se ha presentado un error al intentar acceder a la información.","error")}).then(function(t){f(function(){e.close(t.data.result)})})};t.onCancel=function(){e.close(1)}}]);
"use strict";app.controller("positivaFgnProfessionalListCtrl",["$scope","$stateParams","$log","DTOptionsBuilder","DTColumnBuilder","DTColumnDefBuilder","$localStorage","$compile","toaster","$state","$rootScope","$timeout","$http","SweetAlert","$aside","$document","ListService",function(t,i,n,e,o,a,l,r,s,u,d,c,f,p,w,h,m){function v(){var i=[{name:"criteria_operators",value:null},{name:"criteria_conditions",value:null},{name:"positiva_fgn_professionals_filter_field",value:null}];m.getDataList(i).then(function(i){t.criteria=i.data.data.criteriaOperatorList,t.conditions=i.data.data.criteriaConditionList,t.audit.fields=i.data.data.filterField},function(i){t.status="Unable to load customer data: "+i.message})}t.audit={fields:[],filters:[]},v(),t.addFilter=function(){null==t.audit.filters&&(t.audit.filters=[]),t.audit.filters.push({id:0,field:null,criteria:t.criteria.length>0?t.criteria[1]:null,condition:t.conditions.length>0?t.conditions[0]:null,value:""})},t.onFilter=function(){t.reloadData()},t.removeFilter=function(i){t.audit.filters.splice(i,1)},t.onCleanFilter=function(){t.audit.filters=[],t.reloadData()};var g="professionalListCtrl-"+window.currentUser.id;t.dtInstancePositivaFgn={},t.dtOptionsPositivaFgn=e.newOptions().withBootstrap().withOption("responsive",!0).withOption("ajax",{data:function(i){return angular.isDefined(t.audit)&&angular.isDefined(t.audit.filters)&&(i.filter={filters:t.audit.filters.filter(function(t){return null!=t&&null!=t.field&&null!=t.criteria}).map(function(t,i,n){return{field:t.field.name,operator:t.criteria.value,value:t.value,condition:t.condition.value}})}),JSON.stringify(i)},url:"api/positiva-fgn-professional",type:"POST",beforeSend:function(){},complete:function(){}}).withDataProp("data").withOption("stateSave",!0).withOption("stateSaveCallback",function(t,i){l[g]=i}).withOption("stateLoadCallback",function(){return l[g]}).withOption("order",[[0,"desc"]]).withOption("serverSide",!0).withOption("processing",!0).withOption("fnPreDrawCallback",function(){return!0}).withOption("fnDrawCallback",function(){O()}).withOption("language",{}).withPaginationType("full_numbers").withOption("createdRow",function(i,n,e){r(angular.element(i).contents())(t)}),t.dtColumnsPositivaFgn=[o.newColumn(null).withTitle("Acciones").withOption("width",120).notSortable().renderWith(function(t){var i="",n="",e='<a class="btn btn-primary btn-xs editRow lnk" href="#" uib-tooltip="Editar" data-id="'+t.id+'" '+n+'><i class="fa fa-edit"></i></a>',o='<a class="btn btn-danger btn-xs dropRow lnk" href="#"  uib-tooltip="Borrar" data-id="'+t.id+'" '+n+'><i class="fa fa-trash"></i></a>';return i+=e,i+=o}),o.newColumn("documentType").withTitle("Tipo Documento").withOption("width",200).withOption("defaultContent",""),o.newColumn("documentNumber").withTitle("# Documento").withOption("width",200).withOption("defaultContent",""),o.newColumn("fullName").withTitle("Nombre").withOption("width",200).withOption("defaultContent",""),o.newColumn("job").withTitle("Cargo").withOption("width",200).withOption("defaultContent",""),o.newColumn("telephone").withTitle("Teléfono").withOption("width",200).withOption("defaultContent",""),o.newColumn("isActive").withTitle("Estado").withOption("width",200).renderWith(function(t,i,n,e){var o="label label-danger",a="Inactivo";return 1==t&&(o="label label-success",a="Activo"),'<span class="'+o+'">'+a+"</span>"})];var O=function(){$("#dtPositivaFgn a.editRow").on("click",function(){var t=$(this).data("id");C(t)}),$("#dtPositivaFgn a.dropRow").on("click",function(){var t=$(this).data("id");b(t)})};t.reloadData=function(){t.dtInstancePositivaFgn.reloadData()},t.onCreate=function(){C(0)};var C=function(i){t.professionalId=i;var n=w.open({templateUrl:d.app.views.urlRoot+"modules/positiva-fgn/professional/professional_edit.htm",placement:"right",backdrop:"static",size:"lg",controller:"positivaFgnProfessionalEditCtrl",scope:t});n.result.then(function(){t.reloadData()})},b=function(i){p.swal({title:"Está seguro?",text:"Eliminará el registro seleccionado.",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Si, eliminar!",cancelButtonText:"No, continuar!",closeOnConfirm:!0,closeOnCancel:!0},function(n){if(n){var e={id:i};f({method:"POST",url:"api/positiva-fgn-professional/delete",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(e)}).then(function(i){p.swal("Proceso Exitoso","Se ha eliminado correctamente el registro.","success"),t.reloadData()})["catch"](function(t){p.swal("Error en la eliminación","Se ha presentado un error durante la eliminación del registro por favor intentelo de nuevo","error")})["finally"](function(){t.reloadData()})}})}}]);
"use strict";app.controller("positivaFgnProfessionalEditCtrl",["$rootScope","$stateParams","$scope","$log","$timeout","SweetAlert","$http","$compile","ListService","$state","$uibModalInstance","DTOptionsBuilder","DTColumnBuilder","$cookies",function(t,n,e,i,o,a,r,l,s,c,u,d,f,p){function m(){var t=[{name:"positiva_fgn_consultant_sectional",criteria:{regionalId:e.entitySectional.regionalId?e.entitySectional.regionalId.value:null}}];s.getDataList(t).then(function(t){e.regionalList=t.data.data.regionalList,e.sectionalList=t.data.data.sectionalList},function(t){e.status="Unable to load customer data: "+t.message})}function w(){if(e.entity.id){var t={id:e.entity.id};r({method:"GET",url:"api/positiva-fgn-professional/get",params:t})["catch"](function(t,n){a.swal("Error","Se ha presentado un error al intentar acceder a la información.","error")}).then(function(t){o(function(){e.entity=t.data.result,console.log(t.data.result)})})}}e.documentTypeList=t.parameters("employee_document_type"),e.regionalList=[],e.sectionaList=[];var g=function(){e.entity={id:e.professionalId||0,isActive:!0,documentType:null,documentNumber:null,fullName:null,job:null,telephone:null,email:null}},h=function(){e.entitySectional={id:0,professionalId:e.entity.id,modulo:"profesionales",sectionalId:null,isActive:!0}};g(),h(),w(),m(),e.filterSectional=function(){e.entitySectional.sectionalId=null,m()},e.formInsertProfessional={submit:function(t){if(e.FormInsertProfessional=t,t.$valid)return void v();var n=null,i=null;for(n in t)"$"!=n[0]&&(null!==i||t[n].$valid||(i=t[n].$name),t[n].$pristine&&(t[n].$dirty=!0));angular.element(".ng-invalid[name="+i+"]").focus(),a.swal("El formulario contiene errores!","Por favor corrige los errores del formulario e intentalo de nuevo.","error")},reset:function(){e.FormInsertProfessional.$setPristine(!0),g()}};var v=function(){var t=JSON.stringify(e.entity),n={data:Base64.encode(t)};return r({method:"POST",url:"api/positiva-fgn-professional/save",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(n)}).then(function(t){e.entity.id=t.data.result.id,a.swal("Proceso exitoso","Se ha almacenado correctamente la información.","success"),e.onBack()})["catch"](function(t){i.error(t),a.swal("Error de guardado","Error guardando el registro. Por favor verifique los datos ingresados!","error")})};e.onBack=function(){u.close(1)},e.formSecXProfe={submit:function(t){if(e.FormSectional=t,t.$valid)return void S();var n=null,i=null;for(n in t)"$"!=n[0]&&(null!==i||t[n].$valid||(i=t[n].$name),t[n].$pristine&&(t[n].$dirty=!0));angular.element(".ng-invalid[name="+i+"]").focus(),a.swal("El formulario contiene errores!","Por favor corrige los errores del formulario e intentalo de nuevo.","error")},reset:function(){e.FormSectional.$setPristine(!0),h()}};var S=function(){var t=JSON.stringify(e.entitySectional),n={data:Base64.encode(t)};return r({method:"POST",url:"api/positiva-fgn-professional/saveSectional",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(n)}).then(function(t){e.formSecXProfe.reset(),e.dtInstancePositivaFgn.reloadData()})["catch"](function(t){a.swal("Error de guardado",t.data.message,"error")})};e.dtInstanceSectionalFgn={},e.dtOptionsSectionalFgn=d.newOptions().withBootstrap().withOption("responsive",!0).withOption("ajax",{data:function(t){return t.professionalId=e.entity.id,JSON.stringify(t)},url:"api/positiva-fgn-professional/listSectional",type:"POST",beforeSend:function(){},complete:function(){}}).withDataProp("data").withOption("stateSave",!0).withOption("stateSaveCallback",function(n,e){p.putObject("consultantListCtrl-"+t.$id,e)}).withOption("stateLoadCallback",function(){return p.getObject("consultantListCtrl-"+t.$id)}).withOption("order",[[0,"desc"]]).withOption("serverSide",!0).withOption("processing",!0).withOption("fnPreDrawCallback",function(){return!0}).withOption("fnDrawCallback",function(){O()}).withOption("language",{}).withPaginationType("full_numbers").withOption("createdRow",function(t,n,i){l(angular.element(t).contents())(e)}),e.dtColumnsSectionalFgn=[f.newColumn(null).withTitle("Acciones").withOption("width",120).notSortable().renderWith(function(t){var n='<div align="center"><a class="btn btn-danger btn-xs dropRow lnk" href="#" uib-tooltip="Borrar"  data-id="'+t.id+'"><i class="fa fa-trash"></i></a></div>';return n}),f.newColumn("regional").withTitle("Regional").withOption("width",200).withOption("defaultContent",""),f.newColumn("sectional").withTitle("Seccional").withOption("width",200).withOption("defaultContent",""),f.newColumn("isActive").withTitle("Estado").withOption("width",200).renderWith(function(t,n,e,i){var o="label label-danger",a=t;return"Activo"==t&&(o="label label-success"),'<span class="'+o+'">'+a+"</span>"})];var O=function(){$("#dtInstanceSectionalFgn a.dropRow").on("click",function(){var t=$(this).data("id");y(t)})},y=function(t){a.swal({title:"Está seguro?",text:"Eliminará el registro seleccionado.",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Si, eliminar!",cancelButtonText:"No, continuar!",closeOnConfirm:!0,closeOnCancel:!0},function(n){if(n){var i={id:t};r({method:"POST",url:"api/positiva-fgn-professional/deleteSectional",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$.param(i)}).then(function(t){a.swal("Proceso Exitoso","Se ha eliminado correctamente el registro.","success")})["catch"](function(t){a.swal("Error en la eliminación","Se ha presentado un error durante la eliminación del registro por favor intentelo de nuevo","error")})["finally"](function(){e.dtInstancePositivaFgn.reloadData()})}})};e.dtInstanceSectionalFgnCallback=function(t){e.dtInstancePositivaFgn=t}}]);